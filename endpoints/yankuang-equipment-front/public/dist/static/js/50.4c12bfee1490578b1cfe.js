webpackJsonp([50],{L0Rd:function(t,n,e){var a=e("jJox");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("2fed2052",a,!0)},"a2R+":function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("mvHQ"),i=e.n(a),s=e("ZjsX"),l=e("lbHh"),r=e.n(l),o=e("lDdF"),u=e.n(o),c=e("uXZL"),p=e.n(c),d=r.a.get("token"),m={name:"zjm",data:function(){return{listQuery:{date:"",deptCode:"",equipmentEffect:""},applyCompanyList:[],effectList:[],tableData3:[],dtkData:{},equipmentList:[],obj:{name:"",deptCode:"",id:""},firstLine:{sumTxt:"总计",notShow:!0,sbName:"",equipmentModel:"",assetUnit:"",equipmentNum:"",costA1:"",day:"",sum:0,newEquipment:"",limit:"",remarks:""}}},created:function(){this.getDeptList()},methods:{handleEdit:function(t,n){n.sum=n.equipmentNum*n.day*n.costA1;var e=0;this.tableData3.forEach(function(t,n){0!==n&&(e+=t.sum)}),this.tableData3[0].sum=e},getDeptList:function(){var t=this;this.applyCompanyList=[],Object(s.d)("/v1/elplan?page=1&size=100&type=21",{token:d,authorityCode:1},{},function(n){200===n.data.status?n.data.data.list.forEach(function(n,e){var a={};a.deptCode=n.code,a.name=n.name,a.id=n.id,t.applyCompanyList.push(a)}):t.$notify({title:"错误",message:n.data.meta.message,type:"error",duration:3e3})})},getEffect:function(t){if(""!==t){var n=this;if(this.effectList=[],this.listQuery.equipmentEffect="",this.obj=this.applyCompanyList.find(function(n){return n.deptCode===t}),this.listQuery.deptCode){var e=this.listQuery.deptCode;Object(s.d)("/v1/elplan/findPositionList?planPosition="+e,{token:d,authorityCode:1},{},function(t){200===t.data.status?t.data.data.forEach(function(t,e){var a={};a.code=t.code,a.name=t.name,n.effectList.push(a)}):n.$notify({title:"错误",message:t.data.meta.message,type:"error",duration:3e3})})}else this.$notify({title:"提示",message:"请先选择单位！",type:"info",duration:3e3})}},search:function(){if(""===this.listQuery.deptCode||""===this.listQuery.date||""===this.listQuery.equipmentEffect)this.$notify({title:"系统提示",message:"请完整选择搜索条件！",type:"warning",duration:3e3});else{this.tableData3=[],this.dtkData=[];var t=this,n=this.listQuery.date.substring(0,4),e=parseInt(this.listQuery.date.substring(5,7))+"",a={};a.equipmentEffect=this.listQuery.equipmentEffect,a.useYear=n,a.useMonth=e,a.deptCode=this.listQuery.deptCode,Object(s.d)("/v1/report?page=1&size=1000&jsonString="+i()(a),{token:d,authorityCode:1},{},function(n){if(200===n.data.status){var e=n.data.data.pageInfo.list;e&&0!==e.length?(t.dtkData=n.data.data.dtkList,t.firstLine.sum=t.dtkData.sum,e.unshift(t.firstLine),t.tableData3=e):(t.tableData3=[],t.$notify({title:"系统提示",message:"搜索结果为空",type:"info",duration:3e3}))}else t.$notify({title:"错误",message:n.data.meta.message,type:"error",duration:3e3})})}},exportExcel:function(){if(0!==this.tableData3.length){var t=this,n=this.listQuery.date.substring(0,4),e=this.listQuery.date.substring(5),a=[];this.tableData3.forEach(function(t,n){if(0!==n){var e={};e.name=t.sbName||"",e.equipmentModel=t.equipmentModel||"",e.equipmentUnit=t.unit||"",e.equipmentNum=parseInt(t.equipmentNum)||null,e.costA1=parseFloat(t.costA1)||null,e.day=parseInt(t.day)||null,e.sum=parseFloat(t.sum)||null,e.remark=t.remarks||"",e.equipmentCode=t.sbCode||"",e.isNew=t.isNew,e.feeDay=t.feeDay,a.push(e)}});var i={useDeptName:this.obj.name,useDeptCode:this.listQuery.deptCode,number:this.listQuery.equipmentEffect,createExcelName:this.dtkData.createExcelName||"",statusName:this.dtkData.statusName||"",sureName:this.dtkData.sureName||"",createExcelCode:this.dtkData.createExcelCode||"",statusCode:this.dtkData.statusCode||"",sureCode:this.dtkData.sureCode||"",sum:this.tableData3[0].sum,useAtString:this.dtkData.useAt,equipmentPosition:this.listQuery.equipmentEffect,useYear:n,useMonth:e,type:this.dtkData.type||null,listZReportItems:a};Object(s.f)("/v1/report",{token:d,authorityCode:1},i,function(n){200===n.data.status?(t.excel(),t.$notify({title:"系统提示",message:"导出成功",type:"success",duration:3e3})):t.$notify({title:"错误",message:n.data.meta.message,type:"error",duration:3e3})})}else this.$notify({title:"提示",message:"数据为空，不可导出",type:"info",duration:3e3})},excel:function(){var t=p.a.utils.table_to_book(document.querySelector("#reportDiv")),n=p.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{u.a.saveAs(new Blob([n],{type:"application/octet-stream"}),"综机设备使用清单.xlsx")}catch(t){"undefined"!=typeof console&&console.log(t,n)}return n},reset:function(){this.listQuery.date="",this.listQuery.deptCode="",this.listQuery.equipmentEffect="",this.tableData3=[]}},filters:{numFilter:function(t){var n=Number(t).toFixed(2),e=n.substring(0,n.length);return Number(e)}}},f={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"filter-container2"},[e("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{type:"month",placeholder:"选择年月","value-format":"yyyy-MM",format:"yyyy-MM"},model:{value:t.listQuery.date,callback:function(n){t.$set(t.listQuery,"date",n)},expression:"listQuery.date"}}),t._v(" "),e("el-select",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{filterable:"",clearable:"",placeholder:"选择单位"},on:{change:t.getEffect},model:{value:t.listQuery.deptCode,callback:function(n){t.$set(t.listQuery,"deptCode",n)},expression:"listQuery.deptCode"}},t._l(t.applyCompanyList,function(t){return e("el-option",{key:t.deptCode,attrs:{label:t.name,value:t.deptCode}})})),t._v(" "),e("el-select",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{filterable:"",clearable:"",placeholder:"选择功能位置"},model:{value:t.listQuery.equipmentEffect,callback:function(n){t.$set(t.listQuery,"equipmentEffect",n)},expression:"listQuery.equipmentEffect"}},t._l(t.effectList,function(t){return e("el-option",{key:t.code,attrs:{label:t.name,value:t.name}})})),t._v(" "),e("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),e("el-button",{staticClass:"filter-item",attrs:{size:"small",icon:"el-icon-refresh"},on:{click:t.reset}},[t._v("重置")]),t._v(" "),e("div",{staticClass:"btn_right"},[e("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"warning",icon:"el-icon-upload"},on:{click:t.exportExcel}},[t._v("导出")])],1)],1),t._v(" "),e("div",{staticClass:"table-center2",attrs:{id:"reportDiv"}},[e("el-table",{staticClass:"fix-header",staticStyle:{width:"1401px"},attrs:{fit:""}},[e("el-table-column",{attrs:{label:"综机设备使用清单",align:"center"}},[e("el-table-column",{attrs:{label:"使用单位："+t.obj.name||""}}),t._v(" "),e("el-table-column",{attrs:{label:"编号："+t.listQuery.equipmentEffect,align:"right"}})],1)],1),t._v(" "),e("el-table",{staticClass:"list-table1",staticStyle:{width:"1401px"},attrs:{data:t.tableData3,border:"",fit:"","highlight-current-row":""}},[e("el-table-column",{attrs:{width:"40px",align:"center",prop:"sumTxt"}}),t._v(" "),e("el-table-column",{attrs:{width:"180px",align:"center",prop:"sbName",label:"名称"}}),t._v(" "),e("el-table-column",{attrs:{width:"180px",align:"center",prop:"equipmentModel",label:"规格型号"}}),t._v(" "),e("el-table-column",{attrs:{width:"60px",align:"center",prop:"assetUnit",label:"单位"}}),t._v(" "),e("el-table-column",{attrs:{width:"80px",align:"center",label:"数量"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-input",{directives:[{name:"show",rawName:"v-show",value:!n.row.notShow,expression:"!scope.row.notShow"}],staticClass:"table-input",attrs:{type:"text"},on:{change:function(e){t.handleEdit(n.$index,n.row)}},model:{value:n.row.equipmentNum,callback:function(e){t.$set(n.row,"equipmentNum",e)},expression:"scope.row.equipmentNum"}}),t._v(" "),e("span",[t._v(t._s(n.row.equipmentNum))])]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"160px",align:"center",label:"日计费标准（元）"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-input",{directives:[{name:"show",rawName:"v-show",value:!n.row.notShow,expression:"!scope.row.notShow"}],staticClass:"table-input",attrs:{type:"text"},on:{change:function(e){t.handleEdit(n.$index,n.row)}},model:{value:n.row.costA1,callback:function(e){t.$set(n.row,"costA1",e)},expression:"scope.row.costA1"}}),t._v(" "),e("span",[t._v(t._s(n.row.costA1))])]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"100px",align:"center",label:"收费天数"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-input",{directives:[{name:"show",rawName:"v-show",value:!n.row.notShow,expression:"!scope.row.notShow"}],staticClass:"table-input",attrs:{type:"text"},on:{change:function(e){t.handleEdit(n.$index,n.row)}},model:{value:n.row.day,callback:function(e){t.$set(n.row,"day",e)},expression:"scope.row.day"}}),t._v(" "),e("span",[t._v(t._s(n.row.day))])]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"100px",align:"center",label:"金额（元）"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",[t._v(t._s(t._f("numFilter")(n.row.sum)))])]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"100px",align:"center",prop:"isNew",label:"新设备"}}),t._v(" "),e("el-table-column",{attrs:{width:"160px",align:"center",prop:"feeDay",label:"收费期限"}}),t._v(" "),e("el-table-column",{attrs:{width:"240px",align:"center",label:"备注"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-input",{directives:[{name:"show",rawName:"v-show",value:!n.row.notShow,expression:"!scope.row.notShow"}],staticClass:"table-input",attrs:{type:"text"},model:{value:n.row.remarks,callback:function(e){t.$set(n.row,"remarks",e)},expression:"scope.row.remarks"}}),t._v(" "),e("span",[t._v(t._s(n.row.remarks))])]}}])})],1)],1)])},staticRenderFns:[]};var h=e("VU/8")(m,f,!1,function(t){e("L0Rd")},null,null);n.default=h.exports},jJox:function(t,n,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/* 头部表名table无数据时不显示 暂无数据字样 */\n.fix-header .el-table__empty-block{\r\n    min-height: 0;\n}\n.btn_right{\r\n      float: right;\n}\n.table-center2{\r\n    width: 1450px;\r\n    padding-top: 30px;\r\n    margin: 0 auto;\n}\n.theader{\r\n    color: #606266;\r\n    font-size: 1.2rem\n}\n.set-color-zjm{\r\n    width: 1401px;\r\n    padding: 15px;\r\n    color: #606266\n}\n.center{\r\n    text-align: center\n}\n.right{\r\n    text-align: right\n}\r\n  /* 行内编辑 */\n.list-table1 .el-input {\r\n    display: none\n}\n.list-table1 .current-row .el-input {\r\n    display: block\n}\n.list-table1 .current-row .el-input + span {\r\n    display: none\n}\n.list-table1 .el-input--medium .el-input__inner{\r\n    height: 22px;\r\n    line-height: 22px;\r\n    padding: 0 10px;\n}\r\n",""])}});