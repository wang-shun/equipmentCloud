webpackJsonp([32],{Plvd:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.el-date-editor .el-range-separator{\r\n  width: 6%;\n}\n.el-table__empty-block{\r\n    min-height: 0;\n}\n.btn_right {\r\n    float: right;\n}\n.block {\r\n    margin-top: 15px;\n}\n.commonTit {\r\n    border-left: 4px solid rgba(22, 155, 213, 1);\r\n    padding-left: 5px;\r\n    margin-top: 0;\r\n    margin-bottom: 5px;\n}\r\n  /* .el-dialog {\r\n    margin-top: 1% !important;\r\n  } */\n.el-dialog__body {\r\n    padding: 10px 20px !important\n}\n.delEq {\r\n    padding: 2px 10px;\r\n    color: #FF0000;\r\n    border: 1px solid #fff;\r\n    border-radius: 3px;\n}\n.delEq:hover {\r\n    border: 1px solid #FF0000;\r\n    background: #FF0000;\r\n    color: #fff;\r\n    border-radius: 3px;\n}\n.el-date-editor.el-input, .el-date-editor.el-input__inner {\r\n    width: 100%;\n}\n.showOperBtn {\r\n    pointer-events: none;\r\n    color: gray;\n}\n.danger{\r\n    color: red;\n}\n.filter-container .filter-item{ \r\n    margin-bottom: 4px !important;\n}\n.app-container{\r\n    padding: 10px 20px 10px;\n}\n.el-table--medium td, .el-table--medium th {\r\n    padding: 3px 0 !important;\n}\r\n",""])},"Q/y4":function(t,e,i){var a=i("Plvd");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("72568599",a,!0)},rHQG:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("BO1k"),s=i.n(a),n=i("mvHQ"),o=i.n(n),l=i("lDdF"),r=i.n(l),d=i("uXZL"),c=i.n(d),u=i("ZjsX"),h=i("cAgV"),p=i("7t+N"),f=i.n(p),g=JSON.parse(sessionStorage.getItem("dwbbList")),m=sessionStorage.getItem("token"),y={name:"eqApplication_ty",directives:{waves:h.a},data:function(){return{istianjia:!1,checked:!1,setDisabled:!1,disable:!1,nochoose:!1,isUpdate:!0,dialogStatus:"",textMap:{update:"编辑",create:"添加",info:"详情"},dialogFormVisible:!1,listLoading:!0,tableKey:0,total:null,currentPage:1,pageSize:15,tableHeight:document.body.clientHeight-200,tableHeight1:document.body.clientHeight-350,listQuery:{startDate:"",endDate:"",kaishidate:"",jieshudate:"",searchDate:"",unit:""},Tj:{deptCode:"",year:"",deptName:""},rules:{deptCode:[{required:!0,message:"请选择单位"}],year:[{required:!0,message:"请选择年度"}],hf:[{required:!0,message:"请输入灰分"}],rxl:[{required:!0,message:"请输入入洗量"}]},varietiesList:[{code:"全选",name:"全选"},{code:"11000",name:"选煤产品"},{code:"11100",name:"精煤产品"},{code:"11110",name:"精煤"}],varietiesLists:[{code:"11000",name:"选煤产品"},{code:"11100",name:"精煤产品"},{code:"11110",name:"精煤"}],SalesList:[{code:"01",name:"国内"},{code:"02",name:"国外"}],unitList:[],unitLists:g,flowList:[{code:"全选",name:"全选"},{code:"dx",name:"地销"},{code:"hc",name:"火车"},{code:"nbdb",name:"内部调拨"}],flowLists:[{code:"dx",name:"地销"},{code:"hc",name:"火车"},{code:"nbdb",name:"内部调拨"}],oldOptions:[],oldOptionsflow:[],oldOptionsvarieties:[],temp:{deptCode:"",deptName:"",date:"",hf:"",rxl:""},dataList:[],xmList:[],resetxmList:[],authorityCodebutton:[],authorityCodePage:""}},created:function(){var t=sessionStorage.getItem("index");this.buttonlist=Object(u.b)(t),this.authorityCodebutton=this.buttonlist[0],this.authorityCodePage=this.buttonlist[1],this.getList(this.currentPage,this.pageSize),this.getxm()},watch:{checked:function(t,e){console.log(this.checked),!1===this.checked?this.disable=!0:!0===this.checked&&(this.disable=!1)},"listQuery.searchDate":function(t,e){this.listQuery.startDate=this.listQuery.searchDate[0],this.listQuery.endDate=this.listQuery.searchDate[1],this.listQuery.startDate?(this.listQuery.kaishidate=this.listQuery.startDate,this.listQuery.kaishidate=this.listQuery.kaishidate.replace("-","年").replace("-","日")+"月"):this.listQuery.kaishidate="",this.listQuery.endDate?(this.listQuery.jieshudate=this.listQuery.endDate,this.listQuery.jieshudate="--"+this.listQuery.jieshudate.replace("-","年").replace("-","日")+"月"):this.listQuery.jieshudate=""}},methods:{selectRow:function(t){this.selectlistRow=t},getxm:function(){var t=this;Object(u.d)("/v1/spmType/list",{token:m,authorityCode:1},{},function(e){if(t.listLoading=!1,console.log(e),200===e.data.status){var i=e.data.data;t.resetxmList=i,t.xmList=i}else t.$notify({title:"系统提示",message:e.data.msg,type:"error",duration:3e3})},function(e){t.listLoading=!1,console.log(e),t.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},handleInfo:function(t){var e=this;this.dialogStatus="info",this.dialogFormVisible=!0,this.isUpdate=!1,this.setDisabled=!0,this.$nextTick(function(){e.$refs.dataForm.clearValidate()}),this.getSpModalInfo(t.id)},getSpModalInfo:function(t){this.dialogFormVisible=!0;var e=this;Object(u.d)("/v1/hdjh/"+t,{token:m,authorityCode:1},{},function(t){if(console.log(t),200===t.data.status){var i=t.data.data;e.xmList=i,e.Tj.deptCode=t.data.data[0].deptCode,e.Tj.year=t.data.data[0].year}else e.$notify({title:"系统提示",message:t.data.msg,type:"warning",duration:2e3})},function(t){e.listLoading=!1,console.log(t),this.$notify({title:"系统提示",message:"请求错误",type:"error",duration:3e3})})},getList:function(t,e){this.listLoading=!0;var i=this;Object(u.d)("/v1/hdjh",{token:m,authorityCode:1},{jsonString:{}},function(t){if(i.listLoading=!1,console.log(t,111111),200===t.data.status){var e=t.data.data;i.dataList=e}else i.$notify({title:"系统提示",message:t.data.msg,type:"error",duration:3e3})},function(t){i.listLoading=!1,console.log(t),i.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},createData:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){t.istianjia=!0,t.disable=!0;for(var i=t,a=0;a<t.unitLists.length;a++)i.Tj.deptCode===i.unitLists[a].code&&(i.Tj.deptName=i.unitLists[a].name);for(var s=[],n=0;n<t.xmList.length;n++)if(t.xmList[n].ashContent){t.xmList[n].ashContent=t.xmList[n].ashContent;var o={};o.ashContent=t.xmList[n].ashContent,o.spmCode=t.xmList[n].code,s[n]=o}else{t.xmList[n].ashContent="";var l={ashContent:""};l.spmCode=t.xmList[n].code,s[n]=l}var r={year:i.Tj.year.split("-")[0],deptCode:i.Tj.deptCode,deptName:i.Tj.deptName,spmHdjhList:s};console.log(s),Object(u.f)("/v1/hdjh",{token:m,authorityCode:1},r,function(t){console.log(t),200===t.data.status?(i.getList(i.currentPage,i.pageSize),i.dialogFormVisible=!1,i.$notify({title:"系统提示",message:"创建成功",type:"success",duration:2e3}),i.istianjia=!1):(i.istianjia=!1,i.$notify({title:"系统提示",message:t.data.msg,type:"warning",duration:2e3}))},function(t){i.listLoading=!1,i.istianjia=!1,console.log(t),i.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}})},settemp:function(){this.temp={deptCode:"",deptName:"",date:"",hf:"",rxl:""}},handleCreate:function(){var t=this;this.settemp(),this.xmList=this.resetxmList,this.checked=!1,this.disable=!0,this.nochoose=!1,this.setDisabled=!1,this.isUpdate=!0,this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()}),setTimeout(function(){t.$refs.dataForm.resetFields()},100)},edit:function(){var t=this;this.selectlistRow&&0!==this.selectlistRow.length&&1===this.selectlistRow.length?(this.getSpModalInfo(this.selectlistRow[0].id),this.dialogStatus="update",this.isUpdate=!0,this.nochoose=!0,this.setDisabled=!1,this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})):this.$notify({title:"系统提示",message:"请选择一条数据进行编辑！",type:"warning",duration:2e3})},delData:function(){var t=this;this.selectlistRow&&0!==this.selectlistRow.length?this.$confirm("确认要删除么?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var e=t,i=[],a=0;a<e.selectlistRow.length;a++)i.push(e.selectlistRow[a].id);f.a.ajax({url:u.a+"/v1/hdjh",method:"delete",headers:{token:m,authorityCode:1,"Content-Type":"application/json; charset=utf-8"},dataType:"json",data:o()({ids:i}),success:function(t){console.log(t),200===t.status?(e.$notify({title:"系统提示",message:"删除成功",type:"warning",duration:2e3}),e.getList(e.currentPage,e.pageSize)):e.$notify({title:"系统提示",message:"删除失败",type:"warning",duration:2e3})}})}):this.$notify({message:"请选择数据进行删除操作！",type:"warning",duration:3e3,title:"系统提示"})},updateData:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){for(var i=t,a=[],s=0;s<i.xmList.length;s++){var n={};n.ashContent=i.xmList[s].ashContent,n.spmCode=i.xmList[s].spmCode,n.id=i.xmList[s].id,a[s]=n}var o={spmHdjhList:a};Object(u.g)("/v1/hdjh",{token:m,authorityCode:1},o,function(t){console.log(t),200===t.data.status?(i.dialogFormVisible=!1,i.$notify({title:"系统提示",message:"更新成功",type:"success",duration:2e3}),i.getList(i.currentPage,i.pageSize)):i.$notify({title:"系统提示",message:"更新失败",type:"error",duration:2e3})},function(t){i.listLoading=!1,console.log(t),i.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}})},formatDate:function(){var t=new Date,e=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0");return t.getFullYear()+"-"+e+"-"+i},reset:function(){this.listQuery.unit=[],this.listQuery.searchDate=[],this.getList(this.currentPage,this.pageSize)},handleSizeChange:function(t){this.getList(this.currentPage,t)},handleCurrentChange:function(t){this.getList(t,this.pageSize)},search:function(){this.getList(this.currentPage,this.pageSize)},selectAll:function(t){var e=[],i=!0,a=!1,n=void 0;try{for(var o,l=s()(this.unitList);!(i=(o=l.next()).done);i=!0){var r=o.value;e.push(r.code)}}catch(t){a=!0,n=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw n}}var d=1===this.oldOptions.length?this.oldOptions[0]:[];if(t.includes("全选")&&(this.listQuery.unit=e),d.includes("全选")&&!t.includes("全选")&&(this.listQuery.unit=[]),d.includes("全选")&&t.includes("全选")){var c=t.indexOf("全选");t.splice(c,1),this.listQuery.unit=t}d.includes("全选")||t.includes("全选")||(console.log(11),t.length===e.length-1&&(this.listQuery.unit=["全选"].concat(t))),this.oldOptions[0]=this.listQuery.unit},Allflow:function(t){var e=[],i=!0,a=!1,n=void 0;try{for(var o,l=s()(this.flowList);!(i=(o=l.next()).done);i=!0){var r=o.value;e.push(r.code)}}catch(t){a=!0,n=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw n}}var d=1===this.oldOptionsflow.length?this.oldOptionsflow[0]:[];if(t.includes("全选")&&(this.listQuery.flow=e),d.includes("全选")&&!t.includes("全选")&&(this.listQuery.flow=[]),d.includes("全选")&&t.includes("全选")){var c=t.indexOf("全选");t.splice(c,1),this.listQuery.flow=t}d.includes("全选")||t.includes("全选")||(console.log(11),t.length===e.length-1&&(this.listQuery.flow=["全选"].concat(t))),this.oldOptionsflow[0]=this.listQuery.flow},Allvarieties:function(t){var e=[],i=!0,a=!1,n=void 0;try{for(var o,l=s()(this.varietiesList);!(i=(o=l.next()).done);i=!0){var r=o.value;e.push(r.code)}}catch(t){a=!0,n=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw n}}var d=1===this.oldOptionsvarieties.length?this.oldOptionsvarieties[0]:[];if(t.includes("全选")&&(this.listQuery.varieties=e),d.includes("全选")&&!t.includes("全选")&&(this.listQuery.varieties=[]),d.includes("全选")&&t.includes("全选")){var c=t.indexOf("全选");t.splice(c,1),this.listQuery.varieties=t}d.includes("全选")||t.includes("全选")||(console.log(11),t.length===e.length-1&&(this.listQuery.varieties=["全选"].concat(t))),this.oldOptionsvarieties[0]=this.listQuery.varieties},printContent:function(){var t=document.getElementById("reportDiv").innerHTML,e=document.body.innerHTML;document.body.innerHTML=t,window.print(),window.localtion.reload(),document.body.innerHTML=e},exportExcel:function(){var t=c.a.utils.table_to_book(document.querySelector("#reportDiv")),e=c.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{r.a.saveAs(new Blob([e],{type:"application/octet-stream"}),"商品煤质量销售台账.xlsx")}catch(t){"undefined"!=typeof console&&console.log(t,e)}return e}},filters:{}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container",staticStyle:{float:"right"}},t._l(t.authorityCodebutton,function(e){return i("div",{key:e.a,staticStyle:{float:"left"}},["添加"===e.name?i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus-outline"},on:{click:t.handleCreate}},[t._v("添加")]):t._e(),t._v(" "),"编辑"===e.name?i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){t.edit()}}},[t._v("编辑")]):t._e(),t._v(" "),"删除"===e.name?i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(e){e.preventDefault(),t.delData()}}},[t._v("删除")]):t._e()],1)})),t._v(" "),i("div",{attrs:{id:"reportDiv"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,ref:"moviesTable",staticStyle:{width:"100%"},attrs:{data:t.dataList,stripe:"",border:"",fit:"","highlight-current-row":"",height:t.tableHeight},on:{"selection-change":t.selectRow}},[i("el-table-column",{attrs:{type:"selection",width:"35"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"ID",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"单位名称",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.deptName))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"产量",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.yield))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"灰分",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.ashContent))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"150px",align:"center",label:"年度"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.year))])]}}])})],1)],1),t._v(" "),i("el-dialog",{staticStyle:{padding:"10px 20px"},attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,width:"65%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"dataForm",staticClass:"form",staticStyle:{"max-height":"550px",overflow:"auto"},attrs:{rules:t.rules,"status-icon":"",model:t.Tj,"label-position":"right","label-width":"130px",disabled:t.setDisabled}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"单位:",required:"",prop:"deptCode"}},[i("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择",disabled:t.nochoose},model:{value:t.Tj.deptCode,callback:function(e){t.$set(t.Tj,"deptCode",e)},expression:"Tj.deptCode"}},t._l(t.unitLists,function(t){return i("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1)],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"年度",required:"",prop:"year"}},[i("el-date-picker",{staticStyle:{width:"250px"},attrs:{type:"year",placeholder:"选择年度","value-format":"yyyy",format:"yyyy",disabled:t.nochoose},model:{value:t.Tj.year,callback:function(e){t.$set(t.Tj,"year",e)},expression:"Tj.year"}})],1)],1)],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,ref:"moviesTable",staticStyle:{width:"100%"},attrs:{data:t.xmList,stripe:"",border:"",fit:"","highlight-current-row":"",height:t.tableHeight1},on:{"selection-change":t.selectRow}},[i("el-table-column",{attrs:{align:"center",label:"项目",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.spmName?i("span",[t._v(t._s(e.row.spmName))]):i("span",[t._v(t._s(e.row.catalog))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"灰分",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{attrs:{size:"small"},model:{value:e.row.ashContent,callback:function(i){t.$set(e.row,"ashContent",i)},expression:"scope.row.ashContent"}})]}}])})],1)],1),t._v(" "),i("div",{staticStyle:{clear:"both"}}),t._v(" "),t.isUpdate?i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),"create"==t.dialogStatus?i("el-button",{attrs:{type:"primary",loading:t.istianjia},on:{click:t.createData}},[t._v("确定")]):i("el-button",{attrs:{type:"primary"},on:{click:t.updateData}},[t._v("确定")])],1):t._e()],1)],1)},staticRenderFns:[]};var b=i("VU/8")(y,v,!1,function(t){i("Q/y4")},null,null);e.default=b.exports}});