webpackJsonp([18],{"9pIf":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.el-date-editor .el-range-separator{\r\n  width: 6%;\n}\n.el-table__empty-block{\r\n    min-height: 0;\n}\n.btn_right {\r\n    float: right;\n}\n.filter-container{\r\n    padding-bottom: -5px;\n}\n.el-table--medium th{\r\n    padding: 2px 0;\n}\n.app-container{\r\n    padding: 10px 20px 10px;\n}\n.filter-container {\r\n    padding-bottom: 0px !important;\n}\r\n",""])},QR7p:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),l=a("ZjsX"),n=a("cAgV"),o=sessionStorage.getItem("token"),r=sessionStorage.getItem("deptCode"),d=sessionStorage.getItem("deptName"),c={name:"check_gl",directives:{waves:n.a},data:function(){var t=function(t,e,a){e?!1===/^[0-9]+([.]{1}[0-9]+){0,1}$/.test(e)?a(new Error("请输入正确的整数或小数")):a():a(new Error(t.msg))},e=function(t,e,a){""!==e?!1===/^[0-9a-zA-Z]{1,32}$/.test(e)?a(new Error("数字，字母组合，不可输入特殊符号")):a():a(new Error("请输入正确的"+("spotCode"===t.field?"抽查号":"原编号")))};return{rules:{analysisDate:[{required:!0,message:"请选择日期"}],spotCode:[{validator:e}],originCode:[{validator:e}],adC:[{validator:t,msg:"请输入Ad抽查值"}],vdC:[{validator:t,msg:"请输入Vd抽查值"}],stdC:[{validator:t,msg:"请输入St,d抽查值"}],qgrdC:[{validator:t,msg:"请输入Qgr,d抽查值 "}]},afterCreateHs:!1,afterUpdateHs:!1,departmentCode:r,departmentName:d,checked:!1,setDisabled:!1,disable:!1,isUpdate:!0,dialogStatus:"",textMap:{update:"编辑台账",create:"添加台账",info:"台账信息详情"},dialogFormVisible:!1,listLoading:!0,tableKey:0,tableHeight:document.body.clientHeight-280,temp:{analysisDate:"",spotCode:"",originCode:"",adC:null,adY:null,vdC:null,vdY:null,stdC:null,stdY:null,qgrdC:null,qgrdY:null,remarks:""},dataList:[]}},created:function(){this.getList()},methods:{handleInfo:function(t){var e=this;this.dialogStatus="info",this.dialogFormVisible=!0,this.isUpdate=!1,this.setDisabled=!0,this.$nextTick(function(){e.$refs.dataForm.clearValidate()}),setTimeout(function(){e.$refs.dataForm.resetFields()},100),this.getSpModalInfo(t.id)},getSpModalInfo:function(t){this.dialogFormVisible=!0;var e=this;Object(l.d)("/v1/hySelfcheck/"+t,{token:o,authorityCode:1},{},function(t){if(200===t.data.status){var a=t.data.data;e.temp=a}else e.$notify({title:"系统提示",message:t.data.msg,type:"warning",duration:2e3})},function(t){e.listLoading=!1,console.log(t),e.$notify({title:"系统提示",message:"请求错误",type:"error",duration:3e3})})},getList:function(){var t=this,e={departmentCode:r};Object(l.d)("/v1/hySelfcheck?jsonString="+s()(e),{token:o,authorityCode:1},{},function(e){if(t.listLoading=!1,200===e.data.status){t.total=null===e.data.data?null:e.data.data.total;var a=null===e.data.data?null:e.data.data.list;null!==a?t.dataList=a:t.$notify({title:"系统提示",message:"搜索结果为空",type:"info",duration:3e3})}else t.$notify({title:"系统提示",message:e.data.msg,type:"error",duration:3e3})},function(e){t.listLoading=!1,console.log(e),t.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},settemp:function(){this.temp={analysisDate:"",spotCode:"",originCode:"",adC:"",adY:"",vdC:"",vdY:"",stdC:"",stdY:"",qgrdC:"",qgrdY:"",remarks:""}},handleCreate:function(){var t=this;this.settemp(),this.checked=!1,this.disable=!0,this.afterCreateHs=!1,this.setDisabled=!1,this.isUpdate=!0,this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()}),setTimeout(function(){t.$refs.dataForm.resetFields()},100)},doCreateHs:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){var a=t.temp;a.departmentCode=r,a.departmentName=d;var i=t;Object(l.f)("/v1/hySelfcheck/assayCheck",{token:o,authorityCode:1},a,function(t){if(200===t.data.status){i.afterCreateHs=!0;var e=t.data.data;i.temp.adY=e.adY,i.temp.vdY=e.vdY,i.temp.stdY=e.stdY,i.temp.qgrdY=e.qgrdY}else i.$notify({title:"系统提示",message:t.data.msg,type:"warning",duration:2e3})},function(t){i.listLoading=!1,console.log(t),i.$notify({title:"系统提示",message:"请求错误",type:"error",duration:3e3})})}})},doUpdateHs:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){var a=t.temp;a.departmentCode=r,a.departmentName=d;var i=t;Object(l.f)("/v1/hySelfcheck/assayCheck",{token:o,authorityCode:1},a,function(t){if(200===t.data.status){i.afterUpdateHs=!0;var e=t.data.data;i.temp.adY=e.adY,i.temp.vdY=e.vdY,i.temp.stdY=e.stdY,i.temp.qgrdY=e.qgrdY}else i.$notify({title:"系统提示",message:t.data.msg,type:"warning",duration:2e3})},function(t){i.listLoading=!1,console.log(t),i.$notify({title:"系统提示",message:"请求错误",type:"error",duration:3e3})})}})},edit:function(){var t=this;this.selectlistRow&&0!==this.selectlistRow.length&&1===this.selectlistRow.length?(this.getSpModalInfo(this.selectlistRow[0].id),this.afterUpdateHs=!1,this.dialogStatus="update",this.isUpdate=!0,this.setDisabled=!1,this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})):this.$notify({title:"系统提示",message:"请选择一条数据进行编辑！",type:"warning",duration:2e3})},delData:function(){var t=this;this.selectlistRow&&0!==this.selectlistRow.length?this.$confirm("确认要删除么?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e,a={ids:[]};t.selectlistRow.forEach(function(t){a.ids.push(t.id)}),e=s()(a),Object(l.c)("/v1/hySelfcheck",{token:o,authorityCode:1},e,function(e){t.$notify({message:"删除成功",type:"warning",duration:3e3,title:"系统提示"}),t.getList()},function(e){t.listLoading=!1,console.log(e),t.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}).catch(function(){t.$notify({type:"info",message:"已取消删除",duration:3e3,title:"系统提示"})}):t.$notify({message:"请选择数据进行删除操作！",type:"warning",duration:3e3,title:"系统提示"})},updateData:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){var a=t;["createAt","createBy","pageNum","pageSize","updateAt","updateBy","code","reportMonthStr"].forEach(function(e){return delete t.temp[e]}),t.temp.departmentCode=r,t.temp.departmentName=d;var i=t.temp;Object(l.g)("/v1/hySelfcheck",{token:o,authorityCode:1},i,function(t){200===t.data.status?(a.dialogFormVisible=!1,a.afterUpdateHs=!1,a.$notify({title:"系统提示",message:"更新成功",type:"success",duration:2e3}),a.getList()):a.$notify({title:"系统提示",message:"更新失败",type:"error",duration:2e3})},function(t){a.listLoading=!1,console.log(t),a.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}})},createData:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){t.disable=!0;var a=t,i=t.temp;i.departmentCode=r,i.departmentName=d,Object(l.f)("/v1/hySelfcheck",{token:o,authorityCode:1},i,function(t){200===t.data.status?(a.dialogFormVisible=!1,a.afterCreateHs=!1,a.$notify({title:"系统提示",message:"创建成功",type:"success",duration:2e3}),a.getList()):a.$notify({title:"系统提示",message:t.data.msg,type:"warning",duration:2e3})},function(t){a.listLoading=!1,console.log(t),a.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}})},formatDate:function(){var t=new Date,e=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getDate().toString().padStart(2,"0");return t.getFullYear()+"-"+e+"-"+a},selectRow:function(t){this.selectlistRow=t}},filters:{}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("div",{staticStyle:{"margin-top":"3px"}},[a("div",{staticStyle:{float:"right"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus-outline"},on:{click:t.handleCreate}},[t._v("添加")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){t.edit()}}},[t._v("编辑")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(e){e.preventDefault(),t.delData()}}},[t._v("删除")])],1)])]),t._v(" "),a("div",{attrs:{id:"reportDiv"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"自查台账管理"}})],1),t._v(" "),a("el-table",{key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.dataList,stripe:"",border:"",fit:"","highlight-current-row":"",height:t.tableHeight},on:{"selection-change":t.selectRow,"row-click":t.handleInfo}},[a("el-table-column",{attrs:{type:"selection",width:"35"}}),t._v(" "),a("el-table-column",{attrs:{width:"150px",label:"单位",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.departmentName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"180px",label:"日期",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.analysisDate))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"180px",label:"抽查编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.spotCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"130px",label:"原编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.originCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"Ad",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.adC))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"Ad原值",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.adY))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"Vd",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.vdC))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"Vd原值",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.vdY))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"St,d",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.stdC))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"St,d原值",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.stdY))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"Qgr,d",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.qgrdC))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"Qgr,d原值",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.qgrdY))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"备注",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.remarks))])]}}])})],1)],1),t._v(" "),a("el-dialog",{staticStyle:{"margin-top":"-5% !important"},attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,width:"80%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticClass:"form",attrs:{rules:t.rules,"status-icon":"",model:t.temp,"label-position":"right","label-width":"130px",disabled:t.setDisabled}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"单位:",prop:"departmentCode"}},[a("span",[t._v(t._s(t.departmentName))])])],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"日期:",required:"",prop:"analysisDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd"},model:{value:t.temp.analysisDate,callback:function(e){t.$set(t.temp,"analysisDate",e)},expression:"temp.analysisDate"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"抽查号:",prop:"spotCode"}},[a("el-input",{attrs:{maxlength:32},model:{value:t.temp.spotCode,callback:function(e){t.$set(t.temp,"spotCode",e)},expression:"temp.spotCode"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"原编号:",prop:"originCode"}},[a("el-input",{attrs:{maxlength:32},model:{value:t.temp.originCode,callback:function(e){t.$set(t.temp,"originCode",e)},expression:"temp.originCode"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"Ad（抽）:",prop:"adC"}},[a("el-input",{attrs:{maxlength:50},model:{value:t.temp.adC,callback:function(e){t.$set(t.temp,"adC",e)},expression:"temp.adC"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"Ad:",prop:"adY"}},[a("el-input",{attrs:{maxlength:13,disabled:""},model:{value:t.temp.adY,callback:function(e){t.$set(t.temp,"adY",e)},expression:"temp.adY"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"Vd（抽）:",prop:"vdC"}},[a("el-input",{attrs:{maxlength:13},model:{value:t.temp.vdC,callback:function(e){t.$set(t.temp,"vdC",e)},expression:"temp.vdC"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"Vd:",prop:"vdY"}},[a("el-input",{attrs:{maxlength:13,disabled:""},model:{value:t.temp.vdY,callback:function(e){t.$set(t.temp,"vdY",e)},expression:"temp.vdY"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"St,d（抽）:",prop:"stdC"}},[a("el-input",{attrs:{maxlength:13},model:{value:t.temp.stdC,callback:function(e){t.$set(t.temp,"stdC",e)},expression:"temp.stdC"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"St,d:",prop:"stdY"}},[a("el-input",{attrs:{maxlength:13,disabled:""},model:{value:t.temp.stdY,callback:function(e){t.$set(t.temp,"stdY",e)},expression:"temp.stdY"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"Qgr,d（抽）:",prop:"qgrdC"}},[a("el-input",{attrs:{maxlength:13},model:{value:t.temp.qgrdC,callback:function(e){t.$set(t.temp,"qgrdC",e)},expression:"temp.qgrdC"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"Qgr,d:",prop:"qgrdY"}},[a("el-input",{attrs:{maxlength:13,disabled:""},model:{value:t.temp.qgrdY,callback:function(e){t.$set(t.temp,"qgrdY",e)},expression:"temp.qgrdY"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"备注:",prop:"remarks"}},[a("el-input",{attrs:{maxlength:255},model:{value:t.temp.remarks,callback:function(e){t.$set(t.temp,"remarks",e)},expression:"temp.remarks"}})],1)],1)],1)],1),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),t.isUpdate?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),"create"==t.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:t.doCreateHs}},[t._v("核算")]):a("el-button",{attrs:{type:"primary"},on:{click:t.doUpdateHs}},[t._v("核算")]),t._v(" "),"create"==t.dialogStatus?a("el-button",{attrs:{type:"primary",disabled:!t.afterCreateHs},on:{click:t.createData}},[t._v("添加")]):a("el-button",{attrs:{type:"primary",disabled:!t.afterUpdateHs},on:{click:t.updateData}},[t._v("更新")])],1):t._e()],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,p,!1,function(t){a("qlR/")},null,null);e.default=u.exports},"qlR/":function(t,e,a){var i=a("9pIf");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("84104618",i,!0)}});