webpackJsonp([25],{"8st4":function(t,e,a){var n=a("B1lG");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("915320fe",n,!0)},B1lG:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.btn_right{\r\n    float: right;\n}\n.filter-container .filter-item{\r\n  margin-bottom: 5px\n}\n.inputh .el-input__inner{\r\n    height: 22px;\r\n    line-height: 22px;\n}\n.el-table__empty-block{\r\n  min-height: 0;\n}\n.app-container {\r\n    font-family: Helvetica Neue, Helvetica, PingFang SC, Hiragino Sans GB, Microsoft YaHei, SimSun, sans-serif;\r\n    overflow: auto;\r\n    font-weight: 400;\r\n    -webkit-font-smoothing: antialiased;\n}\n.inputsun .el-input {\r\n    display: none\n}\n.inputsun .current-row .el-input {\r\n    display: block;\n}\n.el-input--small .el-input__inner {\r\n  height: 22px;\r\n  line-height: 22px;\n}\n.inputsun .current-row .el-input+span {\r\n    display: none\n}\r\n",""])},uJbk:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("ZjsX"),l=a("lbHh"),i=a.n(l),r=a("lDdF"),o=a.n(r),s=a("uXZL"),c=a.n(s),u=i.a.get("token"),h={name:"gather",data:function(){return{equipmentDialog:!1,ddd:!0,sss:!1,showHeader:!1,jisuan:!1,firstSum:[],secondSum:[],totalNum:[],tableData3:[],tableData1:[],tableData2:[],month:"",ss:"",zhu1:"",listId:"",zhu:[{remark:""}],listQuery:{date:"2018"}}},created:function(t){this.getList(this.listQuery.date),this.times()},methods:{examineUnPass:function(){var t={remark:this.zhu1,id:this.listId};Object(n.g)("/v1/reportEquipmentZMonth/updateRemarkById",{token:u,authorityCode:1},t,function(t){console.log(t)})},equipmentDialogShow:function(){this.equipmentDialog=!0,console.log(this.zhu1)},search:function(){console.log(this.listQuery.date),""!==this.listQuery.date?this.getList(this.listQuery.date):this.$notify.info({title:"系统提示",message:"查询年份不能为空!",type:"warning"})},times:function(){var t=new Date;this.month=t.getMonth()+1,this.ss=this.month,t.getDate()>20&&t.getDate()<32&&(this.jisuan=!0)},newCalculation:function(){var t=this;Object(n.g)("/v1/reportEquipmentZMonth/ReCalReportEquipmentZMonth",{token:u,authorityCode:1},{},function(e){console.log(e),200===e.data.status?t.getList(t.listQuery.date):t.$notify.info({title:"系统提示",message:e.data.msg,type:"error"})})},handleCurrentChange:function(t,e,a){},chongzhi:function(){this.listQuery.date="",this.tableData1=[],this.tableData2=[],this.tableData3=[],this.zhu1="",this.zhu=[],this.listId=""},show:function(t){this.sss=!0,this.ddd=!1},changeCount:function(t){var e=this;if(this.sss=!1,this.ddd=!0,null!==t.id){var a={id:t.id,yearPlanVal:Number(t.yearPlanVal)};Object(n.g)("/v1/reportEquipmentZMonth/updateYearPlanValById",{token:u,authorityCode:1},a,function(t){e.getList(e.listQuery.date)})}else this.getList(this.listQuery.date),this.$notify.info({title:"系统提示",message:"小计和累计不允许更改！",type:"warning"})},getList:function(t){var e=this;Object(n.d)("/v1/reportEquipmentZMonth/findSumByYear/"+t,{token:u,authorityCode:1},{},function(t){if(200===t.data.status)if(null!==t.data.data.id){e.tableData1=t.data.data.list1,e.tableData2=t.data.data.list2,e.tableData3=t.data.data.list3;for(var a=t.data.data.remark.split("。"),n=[],l=0;l<a.length&&a[l].toString()+"。"!="。";l++){var i={};i.remark=a[l].toString()+"。",n[l]=i}e.zhu1=t.data.data.remark,e.zhu=n,e.listId=t.data.data.id}else e.$notify.info({title:"系统提示",message:"查询结果为空！",type:"warning"}),e.chongzhi();else e.$notify.info({title:"系统提示",message:t.data.msg,type:"error"})})},exportExcel:function(){if(""!==this.listId){var t=c.a.utils.table_to_book(document.querySelector("#rng")),e=c.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{o.a.saveAs(new Blob([e],{type:"application/octet-stream"}),this.listQuery.date+"综机折旧修理费月报（汇总）.xlsx")}catch(t){}return e}this.$notify.info({title:"系统提示",message:"列表为空，不能导出！",type:"warning"})}},mounted:function(){}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"year",placeholder:"选择年","value-format":"yyyy",format:"yyyy"},model:{value:t.listQuery.date,callback:function(e){t.$set(t.listQuery,"date",e)},expression:"listQuery.date"}}),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{size:"small",icon:"el-icon-refresh"},on:{click:t.chongzhi}},[t._v("重置")]),t._v(" "),t.jisuan?a("el-button",{staticClass:"filter-item",attrs:{size:"small",icon:"el-icon-sort",type:"primary"},on:{click:t.newCalculation}},[t._v("重新计算")]):t._e(),t._v(" "),a("div",{staticClass:"btn_right"},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"warning",icon:"el-icon-upload"},on:{click:t.exportExcel}},[t._v("导出")])],1)],1),t._v(" "),a("div",{attrs:{id:"rng"}},[a("el-table",{ref:"upTable",staticClass:"inputsun",staticStyle:{width:"100%","max-height":"740px"},attrs:{data:t.tableData1,border:"",fit:"","highlight-current-row":""},on:{"row-click":t.handleCurrentChange}},[a("el-table-column",{attrs:{align:"center",label:t.listQuery.date+"综机折旧修理费月报（汇总）---"+t.month+"月份"}},[a("el-table-column",{attrs:{type:"index",width:"50px",align:"center",prop:"deptCode",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{width:"200",align:"center",prop:"deptName",label:"矿别"}}),t._v(" "),a("el-table-column",{attrs:{width:"230",align:"center",label:"上报煤业版  年度计划指标（万元）"},scopedSlots:t._u([{key:"default",fn:function(e){return["小计"!==e.row.deptName?a("el-input",{attrs:{size:"small"},on:{blur:function(a){t.changeCount(e.row)}},model:{value:e.row.yearPlanVal,callback:function(a){t.$set(e.row,"yearPlanVal",a)},expression:"scope.row.yearPlanVal"}}):t._e(),t._v(" "),(e.row.deptName,a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.yearPlanVal))]))]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"200",align:"center",prop:"curMonthsPlanVal",label:"1-"+t.month+"月预期（万元）"}}),t._v(" "),a("el-table-column",{attrs:{width:"200",align:"center",prop:"curMonthsVal",label:"1-"+t.month+"月实收（万元）"}}),t._v(" "),a("el-table-column",{attrs:{width:"200",align:"center",prop:"preMonthsVal",label:"1-"+t.ss+"月实收（万元）"}}),t._v(" "),a("el-table-column",{attrs:{width:"200",align:"center",prop:"curMonthVal",label:t.ss+"月实收（万元）"}})],1)],1),t._v(" "),a("el-table",{ref:"downTable",staticClass:"inputsun",staticStyle:{width:"100%","max-height":"740px","margin-top":"20px"},attrs:{data:t.tableData2,"show-header":t.showHeader,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center"}},[a("el-table-column",{attrs:{type:"index",width:"50px",align:"center",prop:"serialNumber",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{width:"200px",align:"center",prop:"deptName",label:"矿别"}}),t._v(" "),a("el-table-column",{attrs:{width:"230",align:"center",label:"上报煤业版  年度计划指标（万元）"},scopedSlots:t._u([{key:"default",fn:function(e){return["小计"!==e.row.deptName?a("el-input",{attrs:{size:"small"},on:{blur:function(a){t.changeCount(e.row)}},model:{value:e.row.yearPlanVal,callback:function(a){t.$set(e.row,"yearPlanVal",a)},expression:"scope.row.yearPlanVal"}}):t._e(),t._v(" "),(e.row.deptName,a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.yearPlanVal))]))]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"200",align:"center",prop:"curMonthsPlanVal",label:"上半年按煤业版的一半（万元）"}}),t._v(" "),a("el-table-column",{attrs:{width:"200px",align:"center",prop:"curMonthsVal",label:"1-6月实收（万元）"}}),t._v(" "),a("el-table-column",{attrs:{width:"200px",align:"center",prop:"preMonthsVal",label:"1-5月实收（万元）"}}),t._v(" "),a("el-table-column",{attrs:{width:"200px",align:"center",prop:"curMonthVal",label:"6月实收（万元）"}})],1)],1),t._v(" "),a("el-table",{ref:"downTable",staticStyle:{width:"100%","max-height":"740px","margin-top":"20px"},attrs:{data:t.tableData3,"show-header":t.showHeader,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center"}},[a("el-table-column",{attrs:{type:"index",width:"50px",align:"center",prop:"serialNumber",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{width:"200",align:"center",prop:"deptName",label:"矿别"}}),t._v(" "),a("el-table-column",{attrs:{width:"230",align:"center",prop:"yearPlanVal",label:"上报煤业版  年度计划指标（万元）"}}),t._v(" "),a("el-table-column",{attrs:{width:"200",align:"center",prop:"curMonthsPlanVal",label:"上半年按煤业版的一半（万元）"}}),t._v(" "),a("el-table-column",{attrs:{width:"200",align:"center",prop:"curMonthsVal",label:"1-6月实收（万元）"}}),t._v(" "),a("el-table-column",{attrs:{width:"200",align:"center",prop:"preMonthsVal",label:"1-5月实收（万元）"}}),t._v(" "),a("el-table-column",{attrs:{width:"200",align:"center",prop:"curMonthVal",label:"6月实收（万元）"}})],1)],1),t._v(" "),a("el-table",{ref:"downTable",staticStyle:{width:"100%","max-height":"740px","margin-top":"20px"},attrs:{data:t.zhu,"show-header":t.showHeader,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{on:{click:t.equipmentDialogShow}},[t._v(t._s(e.row.remark))])]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.equipmentDialog,width:"80%",title:"注"},on:{"update:visible":function(e){t.equipmentDialog=e}}},[a("el-form",{staticStyle:{"margin-top":"10px"}},[a("el-form-item",[a("el-input",{attrs:{type:"textarea",maxlength:200},model:{value:t.zhu1,callback:function(e){t.zhu1=e},expression:"zhu1"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"success"},on:{click:function(e){t.equipmentDialog=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.examineUnPass}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(h,p,!1,function(t){a("8st4")},null,null);e.default=d.exports}});