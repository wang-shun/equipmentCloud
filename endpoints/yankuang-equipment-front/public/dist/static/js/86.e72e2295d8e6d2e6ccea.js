webpackJsonp([86],{"20EB":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.el-table__empty-block{\r\n    min-height: 0;\n}\n.btn_right {\r\n  float: right;\n}\n.el-table--medium td, .el-table--medium th {\r\n    padding: 3px 0 !important;\n}\r\n",""])},OxyO:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("cAgV"),s=a("lDdF"),i=a.n(s),n=a("uXZL"),r=a.n(n),o=a("ZjsX"),c=sessionStorage.getItem("token"),u=[{code:"套一",name:"套一"},{code:"套二",name:"套二"},{code:"套三",name:"套三"}],d=JSON.parse(sessionStorage.getItem("dwbbList")),h=d.reduce(function(t,e){return t[e.code]=e.name,t},{}),m=[{code:"01",name:"掘进"},{code:"02",name:"回采"},{code:"本矿合计",name:"本矿合计"}].reduce(function(t,e){return t[e.code]=e.name,t},{}),p={directives:{waves:l.a},filters:{statusFilter:function(t){return m[t]}},data:function(){return{tbList:u,reportdate:"",name:"",tableHeight:document.body.clientHeight-245,unitLists:d,isloading:!1,listQuery:{date:"",istb:"",isdwname:"",datename:"",deptCode:"",searchDate:[],kaishidate:"",jieshudate:""},temp:{},dataList:[],spanArr:[],pos:""}},created:function(){},methods:{setTable:function(){var t=this,e=[],a=0;return t.dataList.forEach(function(l,s){0===s?e.push(1):l.cmType===t.dataList[s-1].cmType?(e[a]+=1,e.push(0)):(e.push(1),a=s)}),{one:e}},objectOneMethod:function(t){t.row,t.column;var e=t.rowIndex;if(0===t.columnIndex){var a=this.setTable(this.dataList).one[e];return{rowspan:a,colspan:a>0?1:0}}},search:function(){var t=this;t.isloading=!0;var e={jsonString:{startDateString:t.listQuery.startDate,endDateString:t.listQuery.endDate,deptCode:t.listQuery.deptCode}};Object(o.d)("/v1/mm/mmReport",{token:c,authorityCode:1},e,function(e){if(console.log(e,11111),200===e.data.status){t.isloading=!1;var a=e.data.data;t.dataList=a}else t.isloading=!1,t.$notify({title:"系统提示",message:e.data.msg,type:"error",duration:3e3})},function(e){console.log(e),t.isloading=!1,t.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},reset:function(){this.listQuery.date="",this.listQuery.istb="",this.listQuery.isdwname="",this.listQuery.datename="",this.listQuery.searchDate=[],this.dataList=[]},exportExcel:function(){var t=r.a.utils.table_to_book(document.querySelector("#reportDiv")),e=r.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{i.a.saveAs(new Blob([e],{type:"application/octet-stream"}),"毛煤产量情况.xlsx")}catch(t){"undefined"!=typeof console&&console.log(t,e)}}},watch:{"listQuery.searchDate":function(t,e){this.listQuery.startDate=this.listQuery.searchDate[0],this.listQuery.endDate=this.listQuery.searchDate[1],this.listQuery.searchDate?(this.listQuery.startDate?(this.listQuery.kaishidate=this.listQuery.startDate,this.listQuery.kaishidate=this.listQuery.kaishidate.replace("-","年").replace("-","日")+"月"):this.listQuery.kaishidate="",this.listQuery.endDate?(this.listQuery.jieshudate=this.listQuery.endDate,this.listQuery.jieshudate="--"+this.listQuery.jieshudate.replace("-","年").replace("-","日")+"月"):this.listQuery.jieshudate=""):(this.listQuery.kaishidate="",this.listQuery.jieshudate="")},"listQuery.deptCode":function(t,e){this.listQuery.isdwname=h[this.listQuery.deptCode],void 0===this.listQuery.isdwname&&(this.listQuery.isdwname="")}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("div",{staticStyle:{float:"left","margin-bottom":"3px"}},[a("el-select",{staticStyle:{width:"140px"},attrs:{clearable:"",placeholder:"请选择单位",size:"mini"},model:{value:t.listQuery.deptCode,callback:function(e){t.$set(t.listQuery,"deptCode",e)},expression:"listQuery.deptCode"}},t._l(t.unitLists,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-date-picker",{staticStyle:{width:"400px"},attrs:{type:"daterange","unlink-panels":"","range-separator":"至","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini"},model:{value:t.listQuery.searchDate,callback:function(e){t.$set(t.listQuery,"searchDate",e)},expression:"listQuery.searchDate"}}),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticStyle:{"margin-left":"8px"},attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:t.reset}},[t._v("重置")])],1),t._v(" "),a("div",{staticClass:"btn_right",staticStyle:{float:"right"}},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"warning",icon:"el-icon-upload"},on:{click:t.exportExcel}},[t._v("导出")])],1)]),t._v(" "),a("div",{staticClass:"content",attrs:{id:"reportDiv"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"毛煤产量情况"}},[a("el-table-column",{attrs:{align:"left",label:this.listQuery.isdwname}}),t._v(" "),a("el-table-column",{attrs:{align:"left",label:this.listQuery.kaishidate+this.listQuery.jieshudate}})],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isloading,expression:"isloading"}],ref:"moviesTable",staticClass:"tb-edit",staticStyle:{width:"100%"},attrs:{data:t.dataList,border:"","span-method":t.objectOneMethod,height:t.tableHeight}},[a("el-table-column",{attrs:{align:"center",label:"区队层别",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.cmType))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"采样地点",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.positionName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"本月毛煤产量"}},[a("el-table-column",{attrs:{align:"center",label:"毛煤质量(吨)",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.clSum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"扣产数量(吨)",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.chkcSum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"扣产后数量(吨)",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.chaSum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"灰分率(%)"}},[a("el-table-column",{attrs:{align:"center",label:"计划"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.jhhfSum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"实际"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.sjhfSum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"灰分量"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.jhhfSums))])]}}])})],1),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"含矸率(%)"}},[a("el-table-column",{attrs:{align:"center",label:"计划"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.jhhglSum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"实际"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.sjhglSum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"含矸量"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.jhhglSums))])]}}])})],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"left",label:"单位负责人:"}}),t._v(" "),a("el-table-column",{attrs:{align:"left",label:"审核:"}}),t._v(" "),a("el-table-column",{attrs:{align:"left",label:"制表人："}}),t._v(" "),a("el-table-column",{attrs:{align:"left",label:"报出日期:"}})],1)],1)])},staticRenderFns:[]};var f=a("VU/8")(p,y,!1,function(t){a("XTIJ")},null,null);e.default=f.exports},XTIJ:function(t,e,a){var l=a("20EB");"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);a("rjj0")("40d78866",l,!0)}});