webpackJsonp([15],{De1G:function(n,t,e){var a=e("rS25");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("rjj0")("2a46d555",a,!0)},d40S:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("mvHQ"),i=e.n(a),s=e("ZjsX"),l=e("lbHh"),r=e.n(l),o=e("lDdF"),u=e.n(o),p=e("uXZL"),c=e.n(p),d=r.a.get("token"),h={name:"ydh",data:function(){return{listQuery:{date:"",useDepartment:"",number:""},applyCompanyList:[],tableData3:[],sign:{satrap:"",sectionChief:"",shPerson:"",centerManager:""},tableData:[{name1:"主管：",name2:"审核：",name3:"公司经办人：",name4:"东滩矿机电环保科科长："}]}},created:function(){this.getDeptList()},methods:{objectSpanMethod:function(n){n.row,n.column;var t=n.rowIndex,e=n.columnIndex;if(0===e){if(t===this.tableData3.length-2)return[2,1];if(t===this.tableData3.length-1)return[0,0]}if(t===this.tableData3.length-1){if(3===e)return[1,3];if(2===e||4===e)return[0,0]}},getDeptList:function(){var n=this;this.applyCompanyList=[],Object(s.d)("/v1/elplan?page=1&size=100&type=21",{token:d,authorityCode:1},{},function(t){200===t.data.status?t.data.data.list.forEach(function(t,e){var a={};a.deptCode=t.code,a.name=t.name,a.id=t.id,n.applyCompanyList.push(a)}):n.$notify({title:"错误",message:t.data.meta.message,type:"error",duration:3e3})})},search:function(){if(""===this.listQuery.useDepartment||""===this.listQuery.date||null===this.listQuery.date||""===this.listQuery.equipmentEffect)this.$notify({title:"系统提示",message:"请完整选择搜索条件！",type:"warning",duration:3e3});else{var n=this,t=this.listQuery.date.substring(0,4),e=parseInt(this.listQuery.date.substring(5,7))+"",a=parseInt(this.listQuery.date.substring(8))+"",l={};l.zjxlYear=t,l.zjxlMonth=e,l.zjxlDay=a,l.useDepartment=this.listQuery.useDepartment,l.number=this.listQuery.number,Object(s.d)("/v1/zjxl?page=1&size=1000&jsonString="+i()(l),{token:d,authorityCode:1},{},function(t){if(200===t.data.status){var e=t.data.data;e&&0!==e.length?(n.sign.satrap=e[0].satrap,n.sign.sectionChief=e[0].sectionChief,n.sign.shPerson=e[0].shPerson,n.sign.centerManager=e[0].centerManager,n.addBottom(e)):(n.tableData3=[],n.sign.satrap="",n.sign.sectionChief="",n.sign.shPerson="",n.sign.centerManager="",n.$notify({title:"系统提示",message:"搜索结果为空",type:"info",duration:3e3}))}else n.$notify({title:"错误",message:t.data.meta.message,type:"error",duration:3e3})})}},addBottom:function(n){var t={usePosition:"合计",usePositionNum:"",appendixPage:n[0].appendixPageSum,zjxlFee:n[0].sum,remark:"",notShow:!0},e={usePosition:"",usePositionNum:"大写",appendixPage:null,zjxlFee:n[0].capital,remark:""};n.push(t,e),this.tableData3=n},exportExcel:function(){var n=this;if(0!==this.tableData3.length){var t=this,e=this.listQuery.date.substring(0,4),a=parseInt(this.listQuery.date.substring(5,7))+"",i=parseInt(this.listQuery.date.substring(8))+"",l=[];this.tableData3.forEach(function(t,s){if(s!==n.tableData3.length-2&&s!==n.tableData3.length-1){var r={};r.appendixPage=t.appendixPage,r.appendixPageSum=t.appendixPageSum,r.capital=t.capital,r.centerManager=n.sign.centerManager,r.kb=t.kb,r.number=t.number,r.remark=t.remark,r.satrap=n.sign.satrap,r.sectionChief=n.sign.sectionChief,r.shPerson=n.sign.shPerson,r.sum=t.sum,r.useDepartment=n.listQuery.useDepartment,r.usePosition=t.usePosition,r.usePositionNum=t.usePositionNum,r.zc=t.zc,r.zjxlDay=i,r.zjxlFee=t.zjxlFee,r.zjxlMonth=a,r.zjxlYear=e,l.push(r)}});var r={zjxlReports:l};Object(s.f)("/v1/zjxl",{token:d,authorityCode:1},r,function(n){200===n.data.status?(t.excel(),t.$notify({title:"系统提示",message:"导出成功",type:"success",duration:3e3})):t.$notify({title:"错误",message:n.data.meta.message,type:"error",duration:3e3})})}else this.$notify({title:"提示",message:"数据为空，不可导出",type:"info",duration:3e3})},excel:function(){var n=c.a.utils.table_to_book(document.querySelector("#reportDiv")),t=c.a.write(n,{bookType:"xlsx",bookSST:!0,type:"array"});try{u.a.saveAs(new Blob([t],{type:"application/octet-stream"}),"东华重工有限公司综机折旧修理费.xlsx")}catch(n){"undefined"!=typeof console&&console.log(n,t)}return t},reset:function(){this.listQuery.date="",this.listQuery.useDepartment="",this.listQuery.number="",this.tableData3=[]}},filters:{dateFilter:function(n){return(n?n.substring(0,4):"")+" 年 "+(n?n.substring(5,7):"")+" 月 "+(n?n.substring(8):"")+" 日"},monthFilter:function(n){var t=n?n.substring(5,7):"";return t?"东华重工有限公司（"+t+"）月综机折旧修理费":"东华重工有限公司综机折旧修理费"}}},m={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"filter-container1"},[e("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd"},model:{value:n.listQuery.date,callback:function(t){n.$set(n.listQuery,"date",t)},expression:"listQuery.date"}}),n._v(" "),e("el-select",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{filterable:"",clearable:"",placeholder:"选择单位"},model:{value:n.listQuery.useDepartment,callback:function(t){n.$set(n.listQuery,"useDepartment",t)},expression:"listQuery.useDepartment"}},n._l(n.applyCompanyList,function(n){return e("el-option",{key:n.deptCode,attrs:{label:n.name,value:n.name}})})),n._v(" "),e("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"输入编号"},model:{value:n.listQuery.number,callback:function(t){n.$set(n.listQuery,"number",t)},expression:"listQuery.number"}}),n._v(" "),e("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:n.search}},[n._v("搜索")]),n._v(" "),e("el-button",{staticClass:"filter-item",attrs:{size:"small",icon:"el-icon-refresh"},on:{click:n.reset}},[n._v("重置")]),n._v(" "),e("div",{staticClass:"btn_right"},[e("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"warning",icon:"el-icon-upload"},on:{click:n.exportExcel}},[n._v("导出")])],1)],1),n._v(" "),e("div",{staticClass:"table-center1",attrs:{id:"reportDiv"}},[e("el-table",{staticClass:"fix-header",staticStyle:{width:"961px"},attrs:{fit:""}},[e("el-table-column",{attrs:{label:n._f("monthFilter")(n.listQuery.date),align:"center"}},[e("el-table-column",{attrs:{label:"使用单位："+n.listQuery.useDepartment}}),n._v(" "),e("el-table-column",{attrs:{label:n._f("dateFilter")(n.listQuery.date),align:"center"}}),n._v(" "),e("el-table-column",{attrs:{label:"编号："+n.listQuery.number,align:"right"}})],1)],1),n._v(" "),e("el-table",{staticClass:"list-table1",staticStyle:{width:"961px"},attrs:{data:n.tableData3,"span-method":n.objectSpanMethod,border:"",fit:"","highlight-current-row":""}},[e("el-table-column",{attrs:{width:"180px",align:"center",prop:"usePosition",label:"使用地点"}}),n._v(" "),e("el-table-column",{attrs:{width:"180px",align:"center",prop:"usePositionNum",label:"申请单编号"}}),n._v(" "),e("el-table-column",{attrs:{width:"160px",align:"center",prop:"appendixPage",label:"附清单（张）"}}),n._v(" "),e("el-table-column",{attrs:{width:"200px",align:"center",prop:"zjxlFee",label:"综机折旧大修费（元）"}}),n._v(" "),e("el-table-column",{attrs:{width:"240px",align:"center",label:"备注"},scopedSlots:n._u([{key:"default",fn:function(t){return[t.row.notShow?n._e():e("el-input",{staticClass:"table-input",attrs:{type:"text"},model:{value:t.row.remark,callback:function(e){n.$set(t.row,"remark",e)},expression:"scope.row.remark"}}),n._v(" "),e("span",[n._v(n._s(t.row.remark))])]}}])})],1),n._v(" "),e("el-table",{staticClass:"fix-header",staticStyle:{width:"901px"},attrs:{data:n.tableData,"show-header":!1}},[e("el-table-column",{attrs:{width:"185px"},scopedSlots:n._u([{key:"default",fn:function(t){return[e("span",[n._v(n._s(t.row.name1))]),n._v(" "),e("span",{staticStyle:{display:"none"}},[n._v(n._s(n.sign.satrap))]),n._v(" "),e("el-input",{attrs:{type:"text"},model:{value:n.sign.satrap,callback:function(t){n.$set(n.sign,"satrap",t)},expression:"sign.satrap"}})]}}])}),n._v(" "),e("el-table-column",{attrs:{width:"185px"},scopedSlots:n._u([{key:"default",fn:function(t){return[e("span",[n._v(n._s(t.row.name2))]),n._v(" "),e("span",{staticStyle:{display:"none"}},[n._v(n._s(n.sign.shPerson))]),n._v(" "),e("el-input",{attrs:{type:"text"},model:{value:n.sign.shPerson,callback:function(t){n.$set(n.sign,"shPerson",t)},expression:"sign.shPerson"}})]}}])}),n._v(" "),e("el-table-column",{attrs:{width:"230px"},scopedSlots:n._u([{key:"default",fn:function(t){return[e("span",[n._v(n._s(t.row.name3))]),n._v(" "),e("span",{staticStyle:{display:"none"}},[n._v(n._s(n.sign.centerManager))]),n._v(" "),e("el-input",{attrs:{type:"text"},model:{value:n.sign.centerManager,callback:function(t){n.$set(n.sign,"centerManager",t)},expression:"sign.centerManager"}})]}}])}),n._v(" "),e("el-table-column",{attrs:{width:"300px"},scopedSlots:n._u([{key:"default",fn:function(t){return[e("span",[n._v(n._s(t.row.name4))]),n._v(" "),e("span",{staticStyle:{display:"none"}},[n._v(n._s(n.sign.sectionChief))]),n._v(" "),e("el-input",{attrs:{type:"text"},model:{value:n.sign.sectionChief,callback:function(t){n.$set(n.sign,"sectionChief",t)},expression:"sign.sectionChief"}})]}}])})],1)],1)])},staticRenderFns:[]};var g=e("VU/8")(h,m,!1,function(n){e("De1G")},null,null);t.default=g.exports},rS25:function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* 头部表名table无数据时不显示 暂无数据字样 */\n.fix-header .el-table__empty-block{\n  min-height: 0;\n}\n.fix-header span{\n  float: left;\n  line-height: 30px;\n}\n.fix-header .el-input{\n  float: left;\n  width: 120px;\n}\n.fix-header .el-input--medium .el-input__inner{\n  height: 30px;\n  line-height: 30px;\n  border: none;\n  padding: 0 10px;\n}\n.btn_right{\n    float: right;\n}\n.filter-container1 .filter-item{\n  margin-bottom: 5px\n}\n.table-center1{\n  width: 1000px;\n  margin: 0 auto;\n}\n.theader1{\n  font-size: 1.2rem\n}\n.set-color1{\n  width: 961px;\n  padding: 15px;\n  color: #606266\n}\n.center{\n  text-align: center\n}\n.right{\n  text-align: right\n}\n.set-color1 .el-input--medium .el-input__inner{\n  height: 22px;\n  line-height: 22px;\n  border: none;\n  padding: 0 10px;\n}\n/* 行内编辑 */\n.list-table1 .el-input {\n  display: none\n}\n.list-table1 .current-row .el-input {\n  display: block\n}\n.list-table1 .current-row .el-input + span {\n  display: none\n}\n.list-table1 .el-input--medium .el-input__inner{\n  height: 22px;\n  line-height: 22px;\n  padding: 0 10px;\n}\n",""])}});