webpackJsonp([44],{"5+9O":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.el-date-editor .el-range-separator{\r\n  width: 6%;\n}\n.el-table__empty-block{\r\n    min-height: 0;\n}\n.btn_right {\r\n    float: right;\n}\n.filter-container{\r\n    padding-bottom: -5px;\n}\n.el-table--medium th{\r\n    padding: 2px 0;\n}\n.app-container{\r\n    padding: 10px 20px 10px;\n}\n.filter-container {\r\n    padding-bottom: 0px !important;\n}\r\n",""])},"9Cku":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),l=a("ZjsX"),n=a("cAgV"),o=sessionStorage.getItem("token"),r=JSON.parse(sessionStorage.getItem("dwbbList")),d={name:"management",directives:{waves:n.a},data:function(){var t=function(t,e,a){""!==e?!1===/^\d{0,10}(\.\d{1,2})?$/.test(e)?a(new Error("请输入正确的整数或小数")):a():a(new Error(t.msg))},e=function(t,e,a){""!==e?!1===/^[0-9a-zA-Z]{1,32}$/.test(e)?a(new Error("数字，字母组合，不可输入特殊符号")):a():a(new Error("请输入正确的"+("sampleCode"===t.field?"部煤样编号":"矿煤样编号")))};return{rules:{departmentCode:[{required:!0,message:"请选择单位"}],analysisDate:[{required:!0,message:"请选择日期"}],sampleCode:[{validator:e}],sampleCodeK:[{validator:e}],sampleTypeName:[{required:!0,message:"请填写样别"}],ad:[{validator:t,msg:"请填写部ad"}],adK:[{validator:t,msg:"请填写矿ad"}],vd:[{validator:t,msg:"请填写部vd"}],vdK:[{validator:t,msg:"请填写矿vd"}],std:[{validator:t,msg:"请填写部St,d"}],stdK:[{validator:t,msg:"请填写矿St,d"}],qgrd:[{validator:t,msg:"请填写部Qgr,d"}],qgrdK:[{validator:t,msg:"请填写矿Qgr,d"}]},total:null,currentPage:1,pageSize:15,unitLists:r,checked:!1,setDisabled:!1,disable:!1,isUpdate:!0,dialogStatus:"",textMap:{update:"编辑台账",create:"添加台账",info:"台账信息详情"},dialogFormVisible:!1,listLoading:!0,tableKey:0,tableHeight:document.body.clientHeight-280,varietiesLists:[],flowList:[],oldOptions:[],oldOptionsflow:[],oldOptionsvarieties:[],temp:{departmentCode:"",analysisDate:"",sampleCode:"",sampleCodeK:"",sampleTypeName:"",ad:"",adK:"",vd:"",vdK:"",std:"",stdK:"",qgrd:"",qgrdK:"",remarks:""},dataList:[]}},created:function(){this.getList(this.currentPage,this.pageSize)},watch:{checked:function(t,e){!1===this.checked?this.disable=!0:!0===this.checked&&(this.disable=!1)}},methods:{handleInfo:function(t){var e=this;this.dialogStatus="info",this.dialogFormVisible=!0,this.isUpdate=!1,this.setDisabled=!0,this.$nextTick(function(){e.$refs.dataForm.clearValidate()}),setTimeout(function(){e.$refs.dataForm.resetFields()},100),this.getSpModalInfo(t.id)},getSpModalInfo:function(t){this.dialogFormVisible=!0;var e=this;Object(l.d)("/v1/hySpotcheck/"+t,{token:o,authorityCode:1},{},function(t){if(200===t.data.status){var a=t.data.data;e.temp=a}else e.$notify({title:"系统提示",message:t.data.msg,type:"warning",duration:2e3})},function(t){e.listLoading=!1,console.log(t),e.$notify({title:"系统提示",message:"请求错误",type:"error",duration:3e3})})},getList:function(t,e){var a=this,i={pageNum:t,pageSize:e};Object(l.d)("/v1/hySpotcheck?jsonString="+i,{token:o,authorityCode:1},i,function(t){if(a.listLoading=!1,200===t.data.status){a.total=t.data.data.total;var e=null===t.data.data?null:t.data.data.list;null!==e?a.dataList=e:(a.dataList=e,a.$notify({title:"系统提示",message:"搜索结果为空",type:"info",duration:3e3}))}else a.$notify({title:"系统提示",message:t.data.msg,type:"error",duration:3e3})},function(t){a.listLoading=!1,console.log(t),a.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},settemp:function(){this.temp={departmentCode:"",analysisDate:"",sampleCode:"",sampleCodeK:"",sampleTypeName:"",ad:"",adK:"",vd:"",vdK:"",std:"",stdK:"",qgrd:"",qgrdK:"",remarks:""}},handleCreate:function(){var t=this;this.settemp(),this.checked=!1,this.disable=!0,this.setDisabled=!1,this.isUpdate=!0,this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()}),setTimeout(function(){t.$refs.dataForm.resetFields()},100)},edit:function(){var t=this;this.selectlistRow&&0!==this.selectlistRow.length&&1===this.selectlistRow.length?(this.getSpModalInfo(this.selectlistRow[0].id),this.dialogStatus="update",this.isUpdate=!0,this.setDisabled=!1,this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})):this.$notify({title:"系统提示",message:"请选择一条数据进行编辑！",type:"warning",duration:2e3})},delData:function(){var t=this;this.selectlistRow&&0!==this.selectlistRow.length?this.$confirm("确认要删除么?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e,a={ids:[]};t.selectlistRow.forEach(function(t){a.ids.push(t.id)}),e=s()(a),Object(l.c)("/v1/hySpotcheck",{token:o,authorityCode:1},e,function(e){t.$notify({message:"删除成功",type:"warning",duration:3e3,title:"系统提示"}),t.getList(t.currentPage,t.pageSize)},function(e){t.listLoading=!1,console.log(e),t.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}).catch(function(){t.$notify({type:"info",message:"已取消删除",duration:3e3,title:"系统提示"})}):t.$notify({message:"请选择数据进行删除操作！",type:"warning",duration:3e3,title:"系统提示"})},updateData:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){var a,i=t;["createAt","createBy","pageNum","pageSize","updateAt","updateBy","code"].forEach(function(e){return delete t.temp[e]}),t.unitLists.forEach(function(e,a){t.temp.departmentCode===e.code&&(t.temp.departmentName=e.name)}),a=t.temp,Object(l.g)("/v1/hySpotcheck",{token:o,authorityCode:1},a,function(t){200===t.data.status?(i.dialogFormVisible=!1,i.afterUpdateHs=!1,i.$notify({title:"系统提示",message:"更新成功",type:"success",duration:2e3}),i.getList(i.currentPage,i.pageSize)):i.$notify({title:"系统提示",message:"更新失败",type:"error",duration:2e3})},function(t){i.listLoading=!1,console.log(t),i.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}})},createData:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){t.disable=!0;var a=t;t.unitLists.forEach(function(e,a){t.temp.departmentCode===e.code&&(t.temp.departmentName=e.name)});var i=t.temp;Object(l.f)("/v1/hySpotcheck",{token:o,authorityCode:1},i,function(t){200===t.data.status?(a.dialogFormVisible=!1,a.afterCreateHs=!1,a.$notify({title:"系统提示",message:"创建成功",type:"success",duration:2e3}),a.getList(a.currentPage,a.pageSize)):a.$notify({title:"系统提示",message:t.data.msg,type:"warning",duration:2e3})},function(t){a.listLoading=!1,console.log(t),a.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}})},handleSizeChange:function(t){this.getList(this.currentPage,t)},handleCurrentChange:function(t){this.getList(t,this.pageSize)},formatDate:function(){var t=new Date,e=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getDate().toString().padStart(2,"0");return t.getFullYear()+"-"+e+"-"+a},selectRow:function(t){this.selectlistRow=t}},filters:{}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("div",{staticStyle:{"margin-top":"3px"}},[a("div",{staticStyle:{float:"left"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:t.getList}},[t._v("查询")])],1),t._v(" "),a("div",{staticStyle:{float:"right"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus-outline"},on:{click:t.handleCreate}},[t._v("添加")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){t.edit()}}},[t._v("编辑")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(e){e.preventDefault(),t.delData()}}},[t._v("删除")])],1)])]),t._v(" "),a("div",{attrs:{id:"reportDiv"}},[a("el-table",{key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.dataList,stripe:"",border:"",fit:"","highlight-current-row":"",height:t.tableHeight},on:{"selection-change":t.selectRow,"row-click":t.handleInfo}},[a("el-table-column",{attrs:{align:"center",label:"抽查结果台账"}},[a("el-table-column",{attrs:{type:"selection",width:"35"}}),t._v(" "),a("el-table-column",{attrs:{width:"150px",label:"单位",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.departmentName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"180px",label:"日期",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.analysisDate))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"180px",label:"煤样编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.sampleCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"130px",label:"矿煤样编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.sampleCodeK))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"130px",label:"样别",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.sampleTypeName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"部ad",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.ad))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"矿ad",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.adK))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"部vd",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.vd))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"矿vd",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.vdK))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"部st,d",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.std))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"矿st,d",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.stdK))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"部qgr,d",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.qgrd))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"矿qgr,d",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.qgrdK))])]}}])})],1)],1)],1),t._v(" "),a("el-dialog",{staticStyle:{"margin-top":"-5% !important"},attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,width:"80%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticClass:"form",attrs:{rules:t.rules,"status-icon":"",model:t.temp,"label-position":"right","label-width":"130px",disabled:t.setDisabled}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"单位:",prop:"departmentCode"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择单位"},model:{value:t.temp.departmentCode,callback:function(e){t.$set(t.temp,"departmentCode",e)},expression:"temp.departmentCode"}},t._l(t.unitLists,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"日期:",required:"",prop:"analysisDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd"},model:{value:t.temp.analysisDate,callback:function(e){t.$set(t.temp,"analysisDate",e)},expression:"temp.analysisDate"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"部煤样编号:",prop:"sampleCode"}},[a("el-input",{attrs:{maxlength:32},model:{value:t.temp.sampleCode,callback:function(e){t.$set(t.temp,"sampleCode",e)},expression:"temp.sampleCode"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"矿煤样编号:",prop:"sampleCodeK"}},[a("el-input",{attrs:{maxlength:32},model:{value:t.temp.sampleCodeK,callback:function(e){t.$set(t.temp,"sampleCodeK",e)},expression:"temp.sampleCodeK"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"样别:",required:"",prop:"sampleTypeName"}},[a("el-input",{attrs:{maxlength:32},model:{value:t.temp.sampleTypeName,callback:function(e){t.$set(t.temp,"sampleTypeName",e)},expression:"temp.sampleTypeName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"部ad:",prop:"ad"}},[a("el-input",{attrs:{maxlength:13},model:{value:t.temp.ad,callback:function(e){t.$set(t.temp,"ad",e)},expression:"temp.ad"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"矿ad:",prop:"adK"}},[a("el-input",{attrs:{maxlength:13},model:{value:t.temp.adK,callback:function(e){t.$set(t.temp,"adK",e)},expression:"temp.adK"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"部vd:",prop:"vd"}},[a("el-input",{attrs:{maxlength:13},model:{value:t.temp.vd,callback:function(e){t.$set(t.temp,"vd",e)},expression:"temp.vd"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"矿vd:",prop:"vdK"}},[a("el-input",{attrs:{maxlength:13},model:{value:t.temp.vdK,callback:function(e){t.$set(t.temp,"vdK",e)},expression:"temp.vdK"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"部St,d:",prop:"std"}},[a("el-input",{attrs:{maxlength:13},model:{value:t.temp.std,callback:function(e){t.$set(t.temp,"std",e)},expression:"temp.std"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"矿St,d:",prop:"stdK"}},[a("el-input",{attrs:{maxlength:13},model:{value:t.temp.stdK,callback:function(e){t.$set(t.temp,"stdK",e)},expression:"temp.stdK"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"部Qgr,d:",prop:"qgrd"}},[a("el-input",{attrs:{maxlength:13},model:{value:t.temp.qgrd,callback:function(e){t.$set(t.temp,"qgrd",e)},expression:"temp.qgrd"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"矿Qgr,d:",prop:"qgrdK"}},[a("el-input",{attrs:{maxlength:13},model:{value:t.temp.qgrdK,callback:function(e){t.$set(t.temp,"qgrdK",e)},expression:"temp.qgrdK"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"备注:",prop:"remarks"}},[a("el-input",{attrs:{maxlength:255},model:{value:t.temp.remarks,callback:function(e){t.$set(t.temp,"remarks",e)},expression:"temp.remarks"}})],1)],1)],1)],1),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),t.isUpdate?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),"create"==t.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v("添加")]):a("el-button",{attrs:{type:"primary"},on:{click:t.updateData}},[t._v("更新")])],1):t._e()],1),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[15,30,45,60,75,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var p=a("VU/8")(d,c,!1,function(t){a("AAxK")},null,null);e.default=p.exports},AAxK:function(t,e,a){var i=a("5+9O");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("2a99f75c",i,!0)}});