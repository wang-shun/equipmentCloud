webpackJsonp([22],{WYB8:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("/5sW"),s=i("cAgV"),n=i("ZjsX"),l=i("lbHh"),o=i.n(l).a.get("token"),r={name:"complexTable",directives:{waves:s.a},data:function(){return{tableHeight:document.body.clientHeight-240,codeShowYN:!1,isUpdate:!0,setDisabled:!1,tableKey:0,list:null,total:null,currentPage:1,pageSize:15,listLoading:!0,listQuery:{code:"",name:""},specificationModelTable:[],sbtypeOneList:[],sbtypeTwoList:[],sbtypeThreeList:[],temp:{id:"",code:"",name:"",sbtypeOne:"",sbtypeTwo:"",sbtypeThree:"",sbtypeOneName:"",sbtypeTwoName:"",sbtypeThreeName:""},dialogFormVisible:!1,dialogStatus:"",dialogPvVisible:!1,textMap:{update:"编辑设备规格型号",create:"添加设备规格型号",info:"设备规格型号详细"},rules:{name:[{required:!0,message:"请输入规格型号名称",trigger:"blur"}],sbtypeOne:[{required:!0,message:"请选择设备大类",trigger:"change"}],sbtypeTwo:[{required:!0,message:"请选择设备中类",trigger:"change"}]},sortOptions:[{label:"ID Ascending",key:"+id"},{label:"ID Descending",key:"-id"}],showReviewer:!1}},filters:{},created:function(){this.getList(this.currentPage,this.pageSize),this.getEqBigTypeList(1,"")},methods:{search:function(){this.getList(this.currentPage,this.pageSize)},reset:function(){this.listQuery.code="",this.listQuery.name="",this.getList(this.currentPage,this.pageSize)},selectRow:function(e){this.selectlistRow=e},handleCreate:function(){var e=this;this.dialogStatus="create",this.dialogFormVisible=!0,this.codeShowYN=!1,this.isUpdate=!0,this.setDisabled=!1,this.$nextTick(function(){e.$refs.dataForm.clearValidate()}),setTimeout(function(){e.$refs.dataForm.resetFields(),e.temp.sbtypeTwoName="",e.temp.sbtypeThreeName=""},300)},edit:function(){var e=this;this.selectlistRow&&0!==this.selectlistRow.length&&1===this.selectlistRow.length?(this.getEqMiddleTypeList(this.selectlistRow[0].sbtypeOne),this.getEqSmallTypeList(this.selectlistRow[0].sbtypeTwo),this.getSpModalInfo(this.selectlistRow[0].id),this.dialogStatus="update",this.codeShowYN=!0,this.isUpdate=!0,this.setDisabled=!1,this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.dataForm.clearValidate()})):this.$notify({title:"系统提示",message:"请选择一条数据进行编辑！",type:"warning",duration:2e3})},handleInfo:function(e){var t=this;this.dialogStatus="info",this.dialogFormVisible=!0,this.codeShowYN=!0,this.isUpdate=!1,this.setDisabled=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()}),this.getEqMiddleTypeList(e.sbtypeOne),this.getEqSmallTypeList(e.sbtypeTwo),this.getSpModalInfo(e.id)},getList:function(e,t){this.listLoading=!0;var i=this,s=i,l={code:this.listQuery.code,name:this.listQuery.name,pageNum:e,pageSize:t};Object(n.d)("/v1/sbmodel/list",{token:o,authorityCode:1},l,function(e){i.listLoading=!1;var t=[];if("200"===e.data.meta.code){i.total=e.data.data.total;for(var a=e.data.data.list,n=0;n<a.length;n++){var l={};l.id=a[n].id,l.code=a[n].code,l.name=a[n].name,l.sbtypeOne=a[n].sbtypeOne,l.sbtypeTwo=a[n].sbtypeTwo,l.sbtypeThree=a[n].sbtypeThree,l.sbtypeOneName=a[n].sbtypeOneName,l.sbtypeTwoName=a[n].sbtypeTwoName,l.sbtypeThreeName=a[n].sbtypeThreeName,t[n]=l}i.specificationModelTable=t}else s.$notify({title:"错误",message:e.data.meta.message,type:"warning",duration:2e3})},function(e){i.listLoading=!1,a.default.use(e),i.$notify({title:"错误",message:"请求失败",type:"error",duration:3e3})})},getEqBigTypeList:function(e,t){var i=this,s=i,l={level:e,p_code:t};Object(n.d)("/v1/sbtype/listByPcodeOrLevel",{token:o,authorityCode:1},l,function(t){i.listLoading=!1;var a=[];if("200"===t.data.meta.code){for(var n=t.data.data,l=0;l<n.length;l++){var o={};o.code=n[l].code,o.name=n[l].name,a[l]=o}1===e?i.sbtypeOneList=a:2===e?i.sbtypeTwoList=a:i.sbtypeThreeList=a}else s.$notify({title:"错误",message:t.data.meta.message,type:"warning",duration:2e3})},function(e){i.listLoading=!1,a.default.use(e),i.$notify({title:"错误",message:"请求失败",type:"error",duration:3e3})})},getEqMiddleTypeList:function(e){var t=e;this.getEqBigTypeList(2,t)},getEqSmallTypeList:function(e){var t=e;this.getEqBigTypeList(3,t)},addSpModel:function(){var e=this;this.$refs.dataForm.validate(function(t){if(t){var i=e;Object(n.f)("/v1/sbmodel/create",{token:o,authorityCode:1},e.temp,function(e){"200"===e.data.meta.code?(i.dialogFormVisible=!1,i.getList(i.currentPage,i.pageSize),i.$notify({title:"成功",message:"创建成功",type:"success",duration:3e3})):i.$notify({title:"失败",message:"创建失败",type:"error",duration:3e3})},function(e){i.listLoading=!1,a.default.use(e),i.$notify({title:"错误",message:"请求失败",type:"error",duration:3e3})})}})},getSpModalInfo:function(e){var t=this;Object(n.d)("/v1/sbmodel/find/"+e,{token:o,authorityCode:1},{},function(e){if("200"===e.data.meta.code){var i=e.data.data;t.temp.id=i.id,t.temp.code=i.code,t.temp.name=i.name,t.temp.sbtypeOne=i.sbtypeOne,t.temp.sbtypeTwo=i.sbtypeTwo,t.temp.sbtypeThree=i.sbtypeThree,t.temp.sbtypeOneName=i.sbtypeOneName,t.temp.sbtypeTwoName=i.sbtypeTwoName,t.temp.sbtypeThreeName=i.sbtypeThreeName}else t.$notify({title:"错误",message:"请求失败",type:"error",duration:3e3})},function(e){t.listLoading=!1,a.default.use(e),t.$notify({title:"错误",message:"请求失败",type:"error",duration:3e3})})},updateSpModal:function(){var e=this;this.$refs.dataForm.validate(function(t){if(t){var i=e;Object(n.g)("/v1/sbmodel/update",{token:o,authorityCode:1},e.temp,function(e){"200"===e.data.meta.code?(i.dialogFormVisible=!1,i.getList(i.currentPage,i.pageSize),i.$notify({title:"成功",message:"更新成功",type:"success",duration:3e3})):i.$notify({title:"失败",message:"更新失败",type:"error",duration:3e3})},function(e){i.listLoading=!1,a.default.use(e),i.$notify({title:"错误",message:"请求失败",type:"error",duration:3e3})})}})},delSpModal:function(){var e=this;this.selectlistRow&&0!==this.selectlistRow.length&&1===this.selectlistRow.length?this.$confirm("确认要删除么?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e;Object(n.c)("/v1/sbmodel/delete/"+e.selectlistRow[0].id,{token:o,authorityCode:1},{},function(e){"200"===e.data.meta.code?(t.dialogFormVisible=!1,t.getList(t.currentPage,t.pageSize),t.$notify({title:"成功",message:"删除成功！",type:"success",duration:3e3})):t.$notify({title:"错误",message:e.data.meta.message,type:"error",duration:3e3})},function(e){t.listLoading=!1,a.default.use(e),t.$notify({title:"错误",message:"请求失败",type:"error",duration:3e3})})}).catch(function(){e.$notify({title:"系统提示",message:"已取消删除",type:"info",duration:2e3})}):this.$notify({title:"系统提示",message:"请选择一条数据进行删除操作！",type:"warning",duration:2e3})},handleSizeChange:function(e){this.getList(this.currentPage,e)},handleCurrentChange:function(e){this.getList(e,this.pageSize)}}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{placeholder:"编码"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.listQuery.code,callback:function(t){e.$set(e.listQuery,"code",t)},expression:"listQuery.code"}}),e._v(" "),i("el-input",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{placeholder:"名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}}),e._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"small",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")]),e._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item btn_right",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(t){t.preventDefault(),e.delSpModal()}}},[e._v("删除")]),e._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item btn_right",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.edit()}}},[e._v("编辑")]),e._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item btn_right",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.handleCreate}},[e._v("添加")])],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,ref:"moviesTable",staticStyle:{width:"100%"},attrs:{data:e.specificationModelTable,height:e.tableHeight,border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.selectRow}},[i("el-table-column",{attrs:{type:"selection",width:"35"}}),e._v(" "),i("el-table-column",{attrs:{width:"180px",align:"center",label:"编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.code))])]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"150px",align:"center",label:"规格型号名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"link-type",attrs:{align:"center"},on:{click:function(i){e.handleInfo(t.row)}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"150px",align:"center",label:"设备大类"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.sbtypeOneName))])]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"150px",align:"center",label:"设备中类"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.sbtypeTwoName))])]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"150px",align:"center",label:"设备小类"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.sbtypeThreeName))])]}}])})],1),e._v(" "),i("div",{staticClass:"block"},[i("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[15,30,45,60,75,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"480px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"dataForm",staticStyle:{"margin-left":"25px"},attrs:{rules:e.rules,"status-icon":"",model:e.temp,"label-position":"right","label-width":"120px",disabled:e.setDisabled}},[e.codeShowYN?i("el-form-item",{attrs:{label:"编号"}},[i("span",[e._v(e._s(e.temp.code))])]):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"规格型号名称",required:"",prop:"name"}},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"250px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"设备大类",required:"",prop:"sbtypeOne"}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"250px"},on:{change:function(t){e.getEqMiddleTypeList(t)}},model:{value:e.temp.sbtypeOne,callback:function(t){e.$set(e.temp,"sbtypeOne",t)},expression:"temp.sbtypeOne"}},e._l(e.sbtypeOneList,function(e){return i("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"设备中类",required:"",prop:"sbtypeTwo"}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"250px"},on:{change:function(t){e.getEqSmallTypeList(t)}},model:{value:e.temp.sbtypeTwo,callback:function(t){e.$set(e.temp,"sbtypeTwo",t)},expression:"temp.sbtypeTwo"}},e._l(e.sbtypeTwoList,function(e){return i("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"设备小类",prop:"sbtypeThree"}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"250px"},model:{value:e.temp.sbtypeThree,callback:function(t){e.$set(e.temp,"sbtypeThree",t)},expression:"temp.sbtypeThree"}},e._l(e.sbtypeThreeList,function(e){return i("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1)],1),e._v(" "),e.isUpdate?i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),"create"==e.dialogStatus?i("el-button",{attrs:{type:"primary"},on:{click:e.addSpModel}},[e._v("确定")]):i("el-button",{attrs:{type:"primary"},on:{click:e.updateSpModal}},[e._v("确定")])],1):e._e()],1)],1)},staticRenderFns:[]};var d=i("VU/8")(r,c,!1,function(e){i("y9+N")},null,null);t.default=d.exports},xYYm:function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"\n.btn_right{\n  float: right;\n}\n.block {\n  margin-top: 15px;\n}\n",""])},"y9+N":function(e,t,i){var a=i("xYYm");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("rjj0")("1078cc14",a,!0)}});