webpackJsonp([42],{"5Nuu":function(e,t,i){var a=i("syI7");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("rjj0")("1957b693",a,!0)},"d/pQ":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("/5sW"),s=i("cAgV"),n=i("ZjsX"),o=sessionStorage.getItem("token"),l={name:"complexTable",directives:{waves:s.a},data:function(){return{istianjia:!1,addcode:"",tableHeight:document.body.clientHeight-240,codeShowYN:!1,isUpdate:!0,setDisabled:!1,tableKey:0,list:null,total:null,currentPage:1,pageSize:15,listLoading:!0,listQuery:{code:"",name:""},specificationModelTable:[],sbtypeOneList:[],sbtypeTwoList:[],sbtypeThreeList:[],temp:{id:"",code:"",name:"",sbtypeOne:"",sbtypeTwo:"",sbtypeThree:"",sbtypeOneName:"",sbtypeTwoName:"",sbtypeThreeName:""},dialogFormVisible:!1,dialogStatus:"",dialogPvVisible:!1,textMap:{update:"编辑设备规格型号",create:"添加设备规格型号",info:"设备规格型号详细"},rules:{name:[{required:!0,message:"请输入规格型号名称"}],sbtypeOne:[{required:!0,message:"请选择设备大类"}],sbtypeTwo:[{required:!0,message:"请选择设备中类"}]},sortOptions:[{label:"ID Ascending",key:"+id"},{label:"ID Descending",key:"-id"}],showReviewer:!1,buttonlist:[],authorityCodebutton:[],authorityCodePage:""}},filters:{},created:function(){var e=sessionStorage.getItem("index");this.buttonlist=Object(n.b)(e),this.authorityCodebutton=this.buttonlist[0],this.authorityCodePage=this.buttonlist[1],this.getList(this.currentPage,this.pageSize),this.getEqBigTypeList(1,"")},methods:{search:function(){this.getList(this.currentPage,this.pageSize)},reset:function(){this.listQuery.code="",this.listQuery.name="",this.getList(this.currentPage,this.pageSize)},selectRow:function(e){this.selectlistRow=e},handleCreate:function(){var e=this;this.dialogStatus="create",this.dialogFormVisible=!0,this.codeShowYN=!1,this.isUpdate=!0,this.setDisabled=!1,this.$nextTick(function(){e.$refs.dataForm.clearValidate()}),setTimeout(function(){e.$refs.dataForm.resetFields(),e.temp.sbtypeTwoName="",e.temp.sbtypeThreeName=""},300)},edit:function(){var e=this;this.selectlistRow&&0!==this.selectlistRow.length&&1===this.selectlistRow.length?(this.getEqMiddleTypeList(this.selectlistRow[0].sbtypeOne),this.getEqSmallTypeList(this.selectlistRow[0].sbtypeTwo),this.getSpModalInfo(this.selectlistRow[0].id),this.dialogStatus="update",this.codeShowYN=!0,this.isUpdate=!0,this.setDisabled=!1,this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.dataForm.clearValidate()})):this.$notify({title:"系统提示",message:"请选择一条数据进行编辑！",type:"warning",duration:2e3})},handleInfo:function(e){var t=this;this.dialogStatus="info",this.dialogFormVisible=!0,this.codeShowYN=!0,this.isUpdate=!1,this.setDisabled=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()}),this.getEqMiddleTypeList(e.sbtypeOne),this.getEqSmallTypeList(e.sbtypeTwo),this.getSpModalInfo(e.id)},getList:function(e,t){this.listLoading=!0;var i=this,s=i,l={code:this.listQuery.code,name:this.listQuery.name,pageNum:e,pageSize:t};Object(n.d)("/v1/sbmodel/list",{token:o,authorityCode:1},l,function(e){i.listLoading=!1;var t=[];if(200===e.data.status){i.total=e.data.data.total;for(var a=e.data.data.list,n=0;n<a.length;n++){var o={};o.id=a[n].id,o.code=a[n].code,o.name=a[n].name,o.sbtypeOne=a[n].sbtypeOne,o.sbtypeTwo=a[n].sbtypeTwo,o.sbtypeThree=a[n].sbtypeThree,o.sbtypeOneName=a[n].sbtypeOneName,o.sbtypeTwoName=a[n].sbtypeTwoName,o.sbtypeThreeName=a[n].sbtypeThreeName,t[n]=o}i.specificationModelTable=t}else s.$notify({title:"系统提示",message:e.data.msg,type:"warning",duration:2e3})},function(e){i.listLoading=!1,a.default.use(e),i.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},getEqBigTypeList:function(e,t){var i=this,s=i,l={level:e,p_code:t};Object(n.d)("/v1/sbtype/listByPcodeOrLevel",{token:o,authorityCode:1},l,function(t){i.listLoading=!1;var a=[];if(200===t.data.status){for(var n=t.data.data,o=0;o<n.length;o++){var l={};l.code=n[o].code,l.name=n[o].name,a[o]=l}1===e?i.sbtypeOneList=a:2===e?i.sbtypeTwoList=a:i.sbtypeThreeList=a}else s.$notify({title:"系统提示",message:t.data.msg,type:"warning",duration:2e3})},function(e){i.listLoading=!1,a.default.use(e),i.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},getEqMiddleTypeList:function(e){var t=e;this.getEqBigTypeList(2,t)},getEqSmallTypeList:function(e){var t=e;this.getEqBigTypeList(3,t)},addSpModel:function(){var e=this;this.$refs.dataForm.validate(function(t){if(t){e.istianjia=!0;var i=e;Object(n.f)("/v1/sbmodel/create",{token:o,authorityCode:1},e.temp,function(e){200===e.data.status?(i.dialogFormVisible=!1,i.istianjia=!1,i.getList(i.currentPage,i.pageSize),i.$notify({title:"系统提示",message:"创建成功",type:"success",duration:3e3})):(i.istianjia=!1,i.$notify({title:"系统提示",message:"创建失败",type:"error",duration:3e3}))},function(e){i.listLoading=!1,i.istianjia=!1,a.default.use(e),i.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}})},getSpModalInfo:function(e){var t=this;Object(n.d)("/v1/sbmodel/find/"+e,{token:o,authorityCode:1},{},function(e){if(200===e.data.status){var i=e.data.data;t.temp.id=i.id,t.temp.code=i.code,t.temp.name=i.name,t.temp.sbtypeOne=i.sbtypeOne,t.temp.sbtypeTwo=i.sbtypeTwo,t.temp.sbtypeThree=i.sbtypeThree,t.temp.sbtypeOneName=i.sbtypeOneName,t.temp.sbtypeTwoName=i.sbtypeTwoName,t.temp.sbtypeThreeName=i.sbtypeThreeName}else t.$notify({title:"系统提示",message:"请求失败",type:"warning",duration:3e3})},function(e){t.listLoading=!1,a.default.use(e),t.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},updateSpModal:function(){var e=this;this.$refs.dataForm.validate(function(t){if(t){var i=e;Object(n.g)("/v1/sbmodel/update",{token:o,authorityCode:1},e.temp,function(e){200===e.data.status?(i.dialogFormVisible=!1,i.getList(i.currentPage,i.pageSize),i.$notify({title:"系统提示",message:"更新成功",type:"success",duration:3e3})):i.$notify({title:"系统提示",message:"更新失败",type:"error",duration:3e3})},function(e){i.listLoading=!1,a.default.use(e),i.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}})},delSpModal:function(){var e=this;this.selectlistRow&&0!==this.selectlistRow.length?this.$confirm("确认要删除么?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t=e,i="",s=0;s<t.selectlistRow.length;s++)i+=t.selectlistRow[s].id+",";i=i.substring(0,i.length-1),Object(n.c)("/v1/sbmodel/deletes/"+i,{token:o,authorityCode:1},{},function(e){200===e.data.status?(t.dialogFormVisible=!1,t.getList(t.currentPage,t.pageSize),t.$notify({title:"系统提示",message:"删除成功！",type:"success",duration:3e3})):t.$notify({title:"系统提示",message:e.data.msg,type:"warning",duration:3e3})},function(e){t.listLoading=!1,a.default.use(e),t.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}).catch(function(){e.$notify({title:"系统提示",message:"已取消删除",type:"info",duration:2e3})}):this.$notify({title:"系统提示",message:"请选择一条数据进行删除操作！",type:"warning",duration:2e3})},handleSizeChange:function(e){this.getList(this.currentPage,e)},handleCurrentChange:function(e){this.getList(e,this.pageSize)}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{size:"mini",placeholder:"编号"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.listQuery.code,callback:function(t){e.$set(e.listQuery,"code",t)},expression:"listQuery.code"}}),e._v(" "),i("el-input",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{size:"mini",placeholder:"规格型号名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}}),e._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")]),e._v(" "),e._l(e.authorityCodebutton,function(t){return i("div",{key:t.a,staticClass:"btn_right"},["删除"===t.name?i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item btn_right",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(t){t.preventDefault(),e.delSpModal()}}},[e._v(e._s(t.name))]):e._e(),e._v(" "),"编辑"===t.name?i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item btn_right",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.edit()}}},[e._v(e._s(t.name))]):e._e(),e._v(" "),"添加"===t.name?i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item btn_right",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.handleCreate()}}},[e._v(e._s(t.name))]):e._e()],1)})],2),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,ref:"moviesTable",staticStyle:{width:"100%"},attrs:{data:e.specificationModelTable,height:e.tableHeight,border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.selectRow}},[i("el-table-column",{attrs:{type:"selection",width:"35"}}),e._v(" "),i("el-table-column",{attrs:{width:"120px",align:"center",label:"编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.code))])]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"200px",align:"center",label:"规格型号名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"link-type",attrs:{align:"center"},on:{click:function(i){e.handleInfo(t.row)}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"150px",align:"center",label:"设备大类"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.sbtypeOneName))])]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"150px",align:"center",label:"设备中类"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.sbtypeTwoName))])]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"150px",align:"center",label:"设备小类"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.sbtypeThreeName))])]}}])})],1),e._v(" "),i("div",{staticClass:"block"},[i("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[15,30,45,60,75,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"480px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"dataForm",staticStyle:{"margin-left":"25px"},attrs:{rules:e.rules,"status-icon":"",model:e.temp,"label-position":"right","label-width":"120px",disabled:e.setDisabled}},[e.codeShowYN?i("el-form-item",{attrs:{label:"编号"}},[i("span",[e._v(e._s(e.temp.code))])]):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"规格型号名称",required:"",prop:"name"}},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"250px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"设备大类",required:"",prop:"sbtypeOne"}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"250px"},attrs:{filterable:""},on:{change:function(t){e.getEqMiddleTypeList(t)}},model:{value:e.temp.sbtypeOne,callback:function(t){e.$set(e.temp,"sbtypeOne",t)},expression:"temp.sbtypeOne"}},e._l(e.sbtypeOneList,function(e){return i("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"设备中类",required:"",prop:"sbtypeTwo"}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"250px"},attrs:{filterable:""},on:{change:function(t){e.getEqSmallTypeList(t)}},model:{value:e.temp.sbtypeTwo,callback:function(t){e.$set(e.temp,"sbtypeTwo",t)},expression:"temp.sbtypeTwo"}},e._l(e.sbtypeTwoList,function(e){return i("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"设备小类",prop:"sbtypeThree"}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"250px"},attrs:{filterable:""},model:{value:e.temp.sbtypeThree,callback:function(t){e.$set(e.temp,"sbtypeThree",t)},expression:"temp.sbtypeThree"}},e._l(e.sbtypeThreeList,function(e){return i("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1)],1),e._v(" "),e.isUpdate?i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),"create"==e.dialogStatus?i("el-button",{attrs:{type:"primary",loading:e.istianjia},on:{click:e.addSpModel}},[e._v("确定")]):i("el-button",{attrs:{type:"primary"},on:{click:e.updateSpModal}},[e._v("确定")])],1):e._e()],1)],1)},staticRenderFns:[]};var c=i("VU/8")(l,r,!1,function(e){i("5Nuu")},null,null);t.default=c.exports},syI7:function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"\n.btn_right{\n  float: right;\n}\n.block {\n  margin-top: 15px;\n}\n.el-table--medium td, .el-table--medium th {\n  padding: 3px 0 !important;\n}\n",""])}});