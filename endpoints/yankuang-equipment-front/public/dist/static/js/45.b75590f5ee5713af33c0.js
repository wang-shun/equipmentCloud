webpackJsonp([45],{"/0GK":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),n=a("cAgV"),l=a("ZjsX"),o=a("lbHh"),r=a.n(o),u=a("7t+N"),m=a.n(u),c=r.a.get("token"),p=[{value:"1",label:"未提交"},{value:"2",label:"已提交"},{value:"3",label:"审核未通过"},{value:"4",label:"审核已通过"}].reduce(function(e,t){return e[t.value]=t.label,e},{}),d={name:"eqApplication_ty",directives:{waves:n.a},data:function(){return{rules:{planPosition:[{required:!0,message:"请选择退租单位",trigger:"change"}]},tableHeight:document.body.clientHeight-275,planId:null,tableKey:0,total:null,currentPage:1,pageSize:15,listLoading:!0,dialogFormVisible:!1,codeShowYN:!1,isUpdate:!0,isExamine:!1,setDisabled:!1,dialogStatus:"",equipmentDialog:!1,textMap:{update:"综机设备退租申请编辑",create:"综机设备退租申请",info:"综机设备退租详细",examine:"综机设备退租审核"},dialogStatus_eq:"",textMap_eq:{create:"选择设备",update:"选择设备"},listQuery:{name:"",startDate:"",endDate:"",planPosition:""},applyCompanyList:[{positionId:"",name:""}],sbtypeOneList:[],sbtypeTwoList:[],sbtypeThreeList:[],eqApplicationTable:[],equipmentDatas:[],eqDatas:[],temp:{code:"0101001",planPosition:"",positionName:"",applyName:"",applyId:12,applyDate:this.formatDate(),remarks:"",eqList:[]},eqColumn:{id:"",itemId:"",positionId:"",effectCode:"",bigTypeCode:"",middleTypeCode:"",smallTypeCode:"",specificationCode:"",equipmentParamName:"",equipmentParamValue:"",equipmentName:"",equipmentNum:"",itemRemarks:"",itemPosition:"",itemEffect:"",equipmentBigType:"",equipmentMiddleType:"",equipmentSmallType:"",equipmentSpecification:"",sbsbm:"",develop:""},nowDate:"",user:{},position:{},buttonlist:[],authorityCodebutton:[],authorityCodePage:""}},created:function(){this.user={name:sessionStorage.getItem("name"),id:sessionStorage.getItem("id"),code:sessionStorage.getItem("code")},this.position={id:sessionStorage.getItem("deptId"),name:sessionStorage.getItem("deptName"),code:sessionStorage.getItem("deptCode")};var e=sessionStorage.getItem("index");this.buttonlist=Object(l.b)(e),this.authorityCodebutton=this.buttonlist[0],this.authorityCodePage=this.buttonlist[1],this.getEqBigTypeList(1,""),this.getList(this.currentPage,this.pageSize),this.getPosition()},computed:{},methods:{formatDate:function(){var e=new Date,t=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return e.getFullYear()+"-"+t+"-"+a},getPosition:function(){var e=this;this.applyCompanyList=[],Object(l.d)("/v1/elplan?page=1&size=1000&type=3&pCode",{token:c,authorityCode:1},{},function(t){200===t.data.status?t.data.data.list.forEach(function(t,a){var i={};i.positionId=t.id,i.name=t.name,e.applyCompanyList.push(i)}):e.$notify({title:"错误",message:t.data.meta.message,type:"error",duration:3e3})})},selectRow:function(e){this.selectlistRow=e},selectRow1:function(e){this.selectlistRow=e},search:function(){this.listLoading=!0;var e=this,t=this.currentPage,a=this.pageSize,i={};i.useBy=this.listQuery.name,i.usePosition=this.listQuery.planPosition,i.startTime=this.listQuery.startDate,i.endTime=this.listQuery.endDate,i.useEquipmentType="2",Object(l.d)("/v1/elUses/findListTz?page="+t+"&size="+a+"&jsonString="+s()(i),{token:c,authorityCode:1},{},function(t){e.listLoading=!1;var a=[];200===t.data.status?(e.total=t.data.data.total,t.data.data.list.forEach(function(e,t){var i={};i.id=e.id,i.code=e.code,i.useAt=e.useAt,i.useBy=e.useBy,i.usePosition=e.usePosition,i.status=e.status,i.name=e.name,i.userName=e.userName,i.version=e.version,a[t]=i}),e.eqApplicationTable=a):e.$notify({title:"错误",message:t.data.msg,type:"error",duration:3e3})})},getEqBigTypeList:function(e,t){var a=this,i=a,s={level:e,p_code:t};Object(l.d)("/v1/sbtype/listByPcodeOrLevel",{token:c,authorityCode:1},s,function(t){var s=[];if("200"===t.data.meta.code){for(var n=t.data.data,l=0;l<n.length;l++){var o={};o.code=n[l].code,o.name=n[l].name,s[l]=o}1===e?s.forEach(function(e){"99"===e.code&&a.sbtypeOneList.push(e)}):2===e?a.sbtypeTwoList=s:a.sbtypeThreeList=s}else i.$notify({title:"错误",message:t.data.meta.message,type:"error",duration:3e3})})},getEqMiddleTypeList:function(e){this.eqColumn.middleTypeCode="",this.eqColumn.smallTypeCode="";var t=e;this.getEqBigTypeList(2,t)},getEqSmallTypeList:function(e){this.eqColumn.smallTypeCode="";var t=e;this.getEqBigTypeList(3,t)},searchEq:function(){var e=this,t=this.temp.applyDate.substring(0,4),a={planEquipmentType:"2",bigTypeCode:"99"};a.middleTypeCode=this.eqColumn.middleTypeCode,a.smallTypeCode=this.eqColumn.smallTypeCode,a.equipmentCode=this.eqColumn.sbsbm,a.equipmentName=this.eqColumn.equipmentName,a.equipmentModel=this.eqColumn.equipmentSpecification,a.equipmentFactory="",a.effectCode=this.eqColumn.effectCode,a.planYear=t,a.positionId=this.temp.planPosition,Object(l.d)("/v1/elplan/findByCreatorId?jsonString="+s()(a)+"&page=1&size=1000",{token:c,authorityCode:1},{},function(t){if(200===t.data.status){var a=t.data.data;null!==a&&0!==a.list.length?e.eqDatas=a.list:e.$notify({title:"提示",message:"查询结果为空！",type:"info",duration:3e3})}else e.$notify({title:"错误",message:t.data.msg,type:"error",duration:3e3})},function(e){console.log(e)})},reset:function(){this.listQuery.name="",this.listQuery.startDate="",this.listQuery.endDate="",this.listQuery.planPosition="",this.getList(this.currentPage,this.pageSize)},resetForm:function(){this.eqColumn.bigTypeCode="",this.eqColumn.middleTypeCode="",this.eqColumn.smallTypeCode="",this.eqColumn.sbsbm="",this.eqColumn.equipmentName="",this.eqColumn.itemEffect="",this.eqColumn.equipmentSpecification="",this.eqColumn.develop=""},handleDelete:function(e,t){var a=t[e].itemId;if(void 0===a)t.splice(e,1);else{var i=[a];m.a.ajax({url:l.a+"/v1/elUses/deleteById",method:"delete",headers:{token:c,authorityCode:1},dataType:"json",data:s()({ids:i}),success:function(a){200===a.status&&t.splice(e,1)}})}},handleSizeChange:function(e){this.getList(this.currentPage,e)},handleCurrentChange:function(e){this.getList(e,this.pageSize)},getList:function(e,t){this.listLoading=!0;var a=this;Object(l.d)("/v1/elUses/findListTz?page="+e+"&size="+t+'&jsonString={"useEquipmentType":"2"}',{token:c,authorityCode:1},{},function(e){a.listLoading=!1;var t=[];200===e.data.status?0!==e.data.data.list.length?(a.total=e.data.data.total,e.data.data.list.forEach(function(e,a){var i={};i.id=e.id,i.code=e.code,i.useAt=e.useAt,i.useBy=e.useBy,i.usePosition=e.usePosition,i.status=e.status,i.name=e.name,i.userName=e.userName,i.version=e.version,t[a]=i}),a.eqApplicationTable=t):a.$notify({title:"提示",message:"查询结果为空！",type:"info",duration:3e3}):a.$notify({title:"错误",message:e.data.msg,type:"error",duration:3e3})})},handleCreate:function(){var e=this;this.equipmentDatas=[],this.dialogFormVisible=!0,this.codeShowYN=!1,this.isUpdate=!0,this.setDisabled=!1,this.isExamine=!1,this.dialogStatus="create",this.temp.remarks="",this.temp.applyName=this.user.name,this.temp.planPosition=parseInt(this.position.id),this.$nextTick(function(){e.$refs.dataForm.clearValidate(),e.$refs.dataForm.resetFields()})},handleUpdate:function(){var e=this;this.dialogFormVisible=!0,this.codeShowYN=!0,this.isUpdate=!0,this.isExamine=!1,this.setDisabled=!1,this.dialogStatus="update",this.$nextTick(function(){e.$refs.dataForm.clearValidate()})},getPlanInfo:function(e){var t=this;this.equipmentDatas=[],Object(l.d)("/v1/elUses/findById/"+e,{token:c,authorityCode:1},{},function(e){if(200===e.data.status){var a=e.data.data;t.temp.applyName=a.userName,t.temp.planPosition=a.usePosition,t.temp.remarks=a.remarks,t.temp.applyDate=a.useAt,a.elUseItems.forEach(function(e,a){var i={};i.id=e.itemId,i.teachCode=e.sbEquipmentZ.techCode,i.effectName=e.equipmentEffect,i.bigTypeName=e.sbEquipmentZ.sbtypeOneName,i.middleTypeName=e.sbEquipmentZ.sbtypeTwoName,i.smallTypeName=e.sbEquipmentZ.sbtypeThreeName,i.equipmentModel=e.sbEquipmentZ.sbmodelCode,i.mainParamName=e.mainParamName,i.mainParamValue=e.mainParamValue,i.equipmentName=e.sbEquipmentZ.name,i.equipmentNum=e.equipmentNum,i.equipmentCode=e.sbEquipmentZ.code,i.status="在租",i.itemId=e.itemId,i.equipmentId=e.equipmentId,i.planUseId=e.planUseId,i.equipmentEffect=e.equipmentEffect,t.equipmentDatas.push(i)})}else t.$notify({title:"错误",message:e.data.msg,type:"error",duration:3e3})})},edit:function(){this.selectlistRow&&0!==this.selectlistRow.length&&1===this.selectlistRow.length?"1"===this.selectlistRow[0].status?(this.planId=this.selectlistRow[0].id,this.handleUpdate(),this.getPlanInfo(this.planId)):this.$notify({title:"系统提示",message:"该计划已提交不可编辑！",type:"warning",duration:3e3}):this.$notify({title:"系统提示",message:"请选择一条数据进行编辑！",type:"warning",duration:3e3})},handleInfo:function(e){var t=this;this.dialogFormVisible=!0,this.codeShowYN=!0,this.isUpdate=!1,this.isExamine=!1,this.setDisabled=!0,this.dialogStatus="info",this.$nextTick(function(){t.$refs.dataForm.clearValidate()}),this.getPlanInfo(e.id)},eqDialogShow:function(){var e=this;this.$refs.dataForm.validate(function(t){t?(e.eqDatas=[],e.dialogStatus_eq="create",e.equipmentDialog=!0,e.resetForm(),e.$nextTick(function(){e.$refs.eqDataForm.clearValidate()})):e.$notify({title:"提示",message:"请选择退租单位",type:"warning",duration:3e3})})},addApply:function(){var e=this;this.$refs.dataForm.validate(function(t){var a=e;if(t){var i=[];e.equipmentDatas.forEach(function(t){var a={};a.itemId=t.itemId,a.equipmentPosition=e.temp.planPosition,a.equipmentId=t.equipmentId,a.planUseId=t.planUseId,a.equipmentEffect=t.effectName,a.mainParamName=t.mainParamName,a.mainParamValue=t.mainParamValue,i.push(a)});var s={useBy:e.user.code,dateTime:e.temp.applyDate,remarks:e.temp.remarks,usePosition:e.temp.planPosition,createBy:e.user.code,useEquipmentType:2,elUseItems:i};0!==i.length?Object(l.f)("/v1/elUses/createTz",{token:c,authorityCode:1},s,function(e){200===e.data.status?(a.dialogFormVisible=!1,a.getList(a.currentPage,a.pageSize),a.$notify({title:"系统提示",message:"添加成功!",type:"success",duration:3e3})):500===e.data.status&&a.$notify({title:"错误",message:e.data.msg,type:"error",duration:3e3})}):e.$notify({title:"系统提醒",message:"设备列表不能为空，请选择设备！",type:"warning",duration:3e3})}})},updateApply:function(){var e=this;this.$refs.dataForm.validate(function(t){var a=e;if(t){var i=[];e.equipmentDatas.forEach(function(t){var a={};a.itemId=t.itemId,a.equipmentPosition=e.temp.planPosition,a.equipmentId=t.equipmentId,a.planUseId=t.planUseId,a.equipmentEffect=t.effectName,a.mainParamName=t.mainParamName,a.mainParamValue=t.mainParamValue,i.push(a)});var s={id:e.planId,useBy:e.user.code,remarks:e.temp.remarks,usePosition:e.temp.planPosition,createBy:e.user.code,useEquipmentType:2,elUseItems:i};0!==i.length?Object(l.g)("/v1/elUses",{token:c,authorityCode:1},s,function(e){200===e.data.status?(a.dialogFormVisible=!1,a.getList(a.currentPage,a.pageSize),a.$notify({title:"系统提示",message:"修改成功!",type:"success",duration:3e3})):500===e.data.status&&a.$notify({title:"错误",message:e.data.msg,type:"error",duration:3e3})}):e.$notify({title:"系统提醒",message:"设备列表不能为空，请选择设备！",type:"warning",duration:3e3})}})},createEq:function(){if(this.selectlistRow)if(0!==this.selectlistRow.length){for(var e=0;e<this.selectlistRow.length;e++){var t={};t.id=parseInt(100*Math.random())+1024,t.teachCode=this.selectlistRow[e].techCode,t.effectName=this.selectlistRow[e].effectName,t.bigTypeName=this.selectlistRow[e].bigTypeName,t.middleTypeName=this.selectlistRow[e].middleTypeName,t.smallTypeName=this.selectlistRow[e].smallTypeName,t.equipmentModel=this.selectlistRow[e].equipmentModel,t.mainParamName=this.selectlistRow[e].equipmentParamName,t.mainParamValue=this.selectlistRow[e].equipmentParamValue,t.equipmentName=this.selectlistRow[e].equipmentName,t.equipmentNum=this.selectlistRow[e].equipmentNum,t.equipmentCode=this.selectlistRow[e].equipmentCode,t.status="在租",t.equipmentId=this.selectlistRow[e].equipmentId,t.planUseId=this.selectlistRow[e].id,this.equipmentDatas.push(t)}this.equipmentDialog=!1,this.$notify({title:"成功",message:"添加成功",type:"success",duration:3e3})}else this.$notify({title:"系统提示",message:"请选择要添加的设备！",type:"warning",duration:3e3});else this.$notify({title:"系统提示",message:"请选择要添加的设备！",type:"warning",duration:3e3})},submit:function(){var e=this;this.selectlistRow&&0!==this.selectlistRow.length&&1===this.selectlistRow.length?"1"===this.selectlistRow[0].status?this.$confirm("确认提交计划吗？提交后不可再编辑！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.selectlistRow[0].id,a=e;Object(l.g)("/v1/elUses/status/"+t,{token:c,authorityCode:1},{},function(e){200===e.data.status?(a.dialogFormVisible=!1,a.getList(a.currentPage,a.pageSize),a.$notify({title:"系统提示",message:"提交成功！",type:"success",duration:3e3})):a.$notify({title:"错误",message:e.data.msg,type:"error",duration:3e3})})}).catch(function(){e.$notify({title:"系统提示",message:"已取消提交！",type:"info",duration:3e3})}):this.$notify({title:"系统提示",message:"该计划已提交！",type:"warning",duration:3e3}):this.$notify({title:"系统提示",message:"请选择一条数据进行编辑！",type:"warning",duration:3e3})},examine:function(){this.selectlistRow&&0!==this.selectlistRow.length&&1===this.selectlistRow.length?"2"===this.selectlistRow[0].status?(this.dialogFormVisible=!0,this.codeShowYN=!0,this.isUpdate=!1,this.isExamine=!0,this.setDisabled=!0,this.dialogStatus="examine",this.getPlanInfo(this.selectlistRow[0].id),this.planId=this.selectlistRow[0].id):"3"===this.selectlistRow[0].status||"4"===this.selectlistRow[0].status?this.$notify({title:"系统提示",message:"该计划已审核！",type:"warning",duration:3e3}):this.$notify({title:"系统提示",message:"该计划未提交，不可审核！",type:"warning",duration:3e3}):this.$notify({title:"系统提示",message:"请选择一条数据进行编辑！",type:"warning",duration:3e3})},examinePass:function(){this.dialogFormVisible=!1;var e=this,t={id:this.planId};Object(l.g)("/v1/elUses/successStatusTz",{token:c,authorityCode:1},t,function(t){200===t.data.status?(e.dialogFormVisible=!1,e.getList(e.currentPage,e.pageSize),e.$notify({title:"系统提示",message:"审核通过！",type:"success",duration:3e3})):e.$notify({title:"错误",message:t.data.msg,type:"error",duration:3e3})})},examineUnPass:function(){this.dialogFormVisible=!1;var e=this,t={id:this.planId};Object(l.f)("/v1/elUses/fail",{token:c,authorityCode:1},t,function(t){200===t.data.status?(e.dialogFormVisible=!1,e.getList(e.currentPage,e.pageSize),e.$notify({title:"系统提示",message:"提交成功！",type:"success",duration:3e3})):500===t.data.status&&e.$notify({title:"错误",message:t.data.msg,type:"error",duration:3e3})})},delData:function(){var e=this;if(this.selectlistRow){for(var t=!1,a=[],i=0;i<this.selectlistRow.length;i++)if(a[i]=this.selectlistRow[i].id,"1"!==this.selectlistRow[i].status){t=!0;break}t?this.$notify({title:"系统提示",message:"选中的已提交计划不可删除！",type:"warning",duration:3e3}):this.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e;m.a.ajax({url:l.a+"/v1/elUses",method:"delete",headers:{token:c,authorityCode:1},dataType:"json",data:s()({ids:a}),success:function(e){200===e.status&&t.getList(t.currentPage,t.pageSize)}})}).catch(function(){e.$notify({title:"系统提示",message:"取消删除！",type:"info",duration:3e3})})}else this.$notify({title:"系统提示",message:"请选择数据进行删除！",type:"warning",duration:3e3})}},filters:{statusFilter:function(e){return p[e]}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-row",[a("el-input",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{placeholder:"退租人"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}}),e._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{filterable:"",clearable:"",placeholder:"退租单位"},model:{value:e.listQuery.planPosition,callback:function(t){e.$set(e.listQuery,"planPosition",t)},expression:"listQuery.planPosition"}},e._l(e.applyCompanyList,function(e){return a("el-option",{key:e.positionId,attrs:{label:e.name,value:e.positionId}})})),e._v(" "),a("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{type:"date","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd",placeholder:"退租日期起"},model:{value:e.listQuery.startDate,callback:function(t){e.$set(e.listQuery,"startDate",t)},expression:"listQuery.startDate"}}),e._v(" "),a("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{type:"date","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd",placeholder:"退租日期止"},model:{value:e.listQuery.endDate,callback:function(t){e.$set(e.listQuery,"endDate",t)},expression:"listQuery.endDate"}})],1),e._v(" "),a("el-row",[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"small",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")]),e._v(" "),e._l(e.authorityCodebutton,function(t){return a("div",{key:t.a,staticClass:"btn_right"},["退租申请"===t.name?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.handleCreate}},[e._v("退租申请")]):e._e(),e._v(" "),"编辑"===t.name?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.edit()}}},[e._v("编辑")]):e._e(),e._v(" "),"提交"===t.name?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary",icon:"el-icon-circle-check"},on:{click:function(t){e.submit()}}},[e._v("提交")]):e._e(),e._v(" "),"审核"===t.name?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary",icon:"el-icon-question"},on:{click:function(t){e.examine()}}},[e._v("审核")]):e._e(),e._v(" "),"删除"===t.name?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(t){t.preventDefault(),e.delData()}}},[e._v("删除")]):e._e()],1)})],2)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,ref:"moviesTable",staticStyle:{width:"100%"},attrs:{data:e.eqApplicationTable,border:"",fit:"","highlight-current-row":"",height:e.tableHeight},on:{"selection-change":e.selectRow}},[a("el-table-column",{attrs:{type:"selection",width:"35"}}),e._v(" "),a("el-table-column",{attrs:{width:"180px",align:"center",label:"退租单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"link-type",on:{click:function(a){e.handleInfo(t.row)}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"150px",align:"center",label:"退租人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.userName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"180px",align:"center",label:"退租日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.useAt))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"300px",align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:{danger:"1"===t.row.status}},[e._v(e._s(e._f("statusFilter")(t.row.status)))])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[15,30,45,60,75,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"80%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("p",{staticClass:"commonTit"},[e._v("基本信息")]),e._v(" "),a("el-form",{ref:"dataForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"100px",disabled:e.setDisabled}},[a("el-form-item",{staticClass:"el-col el-col-6",attrs:{label:"退租单位",required:"",prop:"planPosition"}},[a("el-select",{staticClass:"filter-item",attrs:{filterable:""},model:{value:e.temp.planPosition,callback:function(t){e.$set(e.temp,"planPosition",t)},expression:"temp.planPosition"}},e._l(e.applyCompanyList,function(e){return a("el-option",{key:e.positionId,attrs:{label:e.name,value:e.positionId}})}))],1),e._v(" "),a("el-form-item",{staticClass:"el-col el-col-6",attrs:{label:"退租人",prop:"applyName"}},[a("span",[e._v(e._s(e.temp.applyName))])]),e._v(" "),a("el-form-item",{staticClass:"el-col el-col-6",attrs:{label:"退租日期",prop:"applyDate"}},[a("el-date-picker",{staticClass:"filter-item",attrs:{type:"date","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd",readonly:!("综机设备退租申请"===e.textMap[e.dialogStatus])},model:{value:e.temp.applyDate,callback:function(t){e.$set(e.temp,"applyDate",t)},expression:"temp.applyDate"}})],1),e._v(" "),a("div",{staticStyle:{clear:"both"}}),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:3}},model:{value:e.temp.remarks,callback:function(t){e.$set(e.temp,"remarks",t)},expression:"temp.remarks"}})],1)],1),e._v(" "),a("p",{staticClass:"commonTit"},[e._v("设备列表")]),e._v(" "),e.isUpdate?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item btn_right",staticStyle:{"margin-bottom":"10px"},attrs:{size:"small"},on:{click:e.eqDialogShow}},[e._v("添加")]):e._e(),e._v(" "),a("el-table",{attrs:{data:e.equipmentDatas,border:"",fit:"","highlight-current-row":"",height:"280px"}},[a("el-table-column",{attrs:{prop:"equipmentBigType",width:"150",align:"center",label:"设备大类"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.bigTypeName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"equipmentMiddleType",width:"150",align:"center",label:"设备中类"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.middleTypeName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"equipmentSmallType",width:"150",align:"center",label:"设备小类"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.smallTypeName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"jssbh",width:"150",align:"center",label:"技术识别号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.teachCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"equipmentName",width:"150",align:"center",label:"设备名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.equipmentName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"equipmentNum",width:"150",align:"center",label:"设备数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.equipmentNum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"equipmentSpecification",width:"150",align:"center",label:"规格型号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.equipmentModel))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"equipmentParamName",width:"150",align:"center",label:"技术参数名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.mainParamName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"equipmentParamValue",width:"150",align:"center",label:"技术参数值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.mainParamValue))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"itemEffect",width:"150",align:"center",label:"功能位置"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.effectName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sbsbm",width:"150",align:"center",label:"设备识别码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.equipmentCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"itemRemarks",width:"200",align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.status))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"delEq",class:{showOperBtn:e.setDisabled},on:{click:function(a){e.handleDelete(t.$index,e.equipmentDatas)}}},[e._v("删除")])]}}])})],1),e._v(" "),e.isExamine?a("el-form",{staticStyle:{"margin-top":"10px"}},[a("el-form-item",{attrs:{label:"审批意见"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:3}},model:{value:e.temp.planOpinion,callback:function(t){e.$set(e.temp,"planOpinion",t)},expression:"temp.planOpinion"}})],1)],1):e._e(),e._v(" "),e.isUpdate?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),"create"==e.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:e.addApply}},[e._v("确定")]):a("el-button",{attrs:{type:"primary"},on:{click:e.updateApply}},[e._v("确定")])],1):e._e(),e._v(" "),e.isExamine?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"success"},on:{click:e.examinePass}},[e._v("通过")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.examineUnPass}},[e._v("不通过")])],1):e._e()],1),e._v(" "),a("el-dialog",{attrs:{width:"1000px",title:e.textMap_eq[e.dialogStatus_eq],visible:e.equipmentDialog,"append-to-body":""},on:{"update:visible":function(t){e.equipmentDialog=t}}},[a("el-form",{ref:"eqDataForm",attrs:{model:e.eqColumn,"label-position":"right","label-width":"100px"}},[a("el-form-item",{staticClass:"el-col el-col-8",attrs:{label:"设备大类"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{filterable:""},on:{change:function(t){e.getEqMiddleTypeList(t)}},model:{value:e.eqColumn.bigTypeCode,callback:function(t){e.$set(e.eqColumn,"bigTypeCode",t)},expression:"eqColumn.bigTypeCode"}},e._l(e.sbtypeOneList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{staticClass:"el-col el-col-8",attrs:{label:"设备中类"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{filterable:""},on:{change:function(t){e.getEqSmallTypeList(t)}},model:{value:e.eqColumn.middleTypeCode,callback:function(t){e.$set(e.eqColumn,"middleTypeCode",t)},expression:"eqColumn.middleTypeCode"}},e._l(e.sbtypeTwoList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{staticClass:"el-col el-col-8",attrs:{label:"设备小类"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{filterable:""},model:{value:e.eqColumn.smallTypeCode,callback:function(t){e.$set(e.eqColumn,"smallTypeCode",t)},expression:"eqColumn.smallTypeCode"}},e._l(e.sbtypeThreeList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{staticClass:"el-col el-col-8",attrs:{label:"设备识别码"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},model:{value:e.eqColumn.sbsbm,callback:function(t){e.$set(e.eqColumn,"sbsbm",t)},expression:"eqColumn.sbsbm"}})],1),e._v(" "),a("el-form-item",{staticClass:"el-col el-col-8",attrs:{label:"设备名称"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},model:{value:e.eqColumn.equipmentName,callback:function(t){e.$set(e.eqColumn,"equipmentName",t)},expression:"eqColumn.equipmentName"}})],1),e._v(" "),a("el-form-item",{staticClass:"el-col el-col-8",attrs:{label:"功能位置"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.eqColumn.itemEffect,callback:function(t){e.$set(e.eqColumn,"itemEffect",t)},expression:"eqColumn.itemEffect"}})],1),e._v(" "),a("el-form-item",{staticClass:"el-col el-col-8",attrs:{label:"规格型号"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},model:{value:e.eqColumn.equipmentSpecification,callback:function(t){e.$set(e.eqColumn,"equipmentSpecification",t)},expression:"eqColumn.equipmentSpecification"}})],1),e._v(" "),a("el-form-item",{staticClass:"el-col el-col-8",attrs:{label:"生产厂商"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},model:{value:e.eqColumn.devlop,callback:function(t){e.$set(e.eqColumn,"devlop",t)},expression:"eqColumn.devlop"}})],1),e._v(" "),a("el-form-item",{staticClass:"el-col el-col-8",staticStyle:{"text-align":"right"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.searchEq}},[e._v("搜索")]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"small",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")])],1),e._v(" "),a("div",{staticStyle:{clear:"both"}})],1),e._v(" "),a("el-table",{attrs:{data:e.eqDatas,border:"",fit:"","highlight-current-row":"",height:"280px"},on:{"selection-change":e.selectRow1}},[a("el-table-column",{attrs:{type:"selection",width:"35"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bigTypeName",width:"150",align:"center",label:"设备大类"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.bigTypeName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"middleTypeName",width:"150",align:"center",label:"设备中类"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.middleTypeName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"smallTypeName",width:"150",align:"center",label:"设备小类"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.smallTypeName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"teachCode",width:"150",align:"center",label:"技术识别号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.teachCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"equipmentName",width:"150",align:"center",label:"设备名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.equipmentName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"equipmentNum",width:"150",align:"center",label:"设备数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.equipmentNum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"modelName",width:"150",align:"center",label:"规格型号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.equipmentModel))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"equipmentCode",width:"150",align:"center",label:"设备识别码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.equipmentCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"mainParamName",width:"150",align:"center",label:"技术参数名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.mainParamName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"mainParamValue",width:"150",align:"center",label:"技术参数值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.mainParamValue))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"assetCode",width:"150",align:"center",label:"资产编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.assetCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"effectName",width:"150",align:"center",label:"功能位置"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.effectName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",width:"100",align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("在租")])]}}])})],1),e._v(" "),e.isUpdate?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.equipmentDialog=!1}}},[e._v("取消")]),e._v(" "),"create"==e.dialogStatus_eq?a("el-button",{attrs:{type:"primary"},on:{click:e.createEq}},[e._v("确定")]):e._e()],1):e._e()],1)],1)},staticRenderFns:[]};var h=a("VU/8")(d,f,!1,function(e){a("oviJ")},null,null);t.default=h.exports},oviJ:function(e,t,a){var i=a("xPnb");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("61f610d7",i,!0)},xPnb:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.btn_right {\n  float: right;\n}\n.block {\n  margin-top: 15px;\n}\n.commonTit {\n  border-left: 4px solid rgba(22, 155, 213, 1);\n  padding-left: 5px;\n  margin-top: 0;\n  margin-bottom: 5px;\n}\n.el-dialog {\n  margin-top: 1% !important;\n}\n.el-dialog__body {\n  padding: 10px 20px !important\n}\n.delEq {\n  padding: 2px 10px;\n  color: #FF0000;\n  border: 1px solid #fff;\n  border-radius: 3px;\n}\n.delEq:hover {\n  border: 1px solid #FF0000;\n  background: #FF0000;\n  color: #fff;\n  border-radius: 3px;\n}\n.el-date-editor.el-input, .el-date-editor.el-input__inner {\n  width: 100%;\n}\n.showOperBtn {\n  pointer-events: none;\n  color: gray;\n}\n.danger{\n  color: red;\n}\n",""])}});