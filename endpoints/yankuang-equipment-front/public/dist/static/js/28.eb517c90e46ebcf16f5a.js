webpackJsonp([28],{Wiu4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),n=a("ZjsX"),l=a("cAgV"),r=sessionStorage.getItem("token"),o=sessionStorage.getItem("deptCode"),d=sessionStorage.getItem("deptName"),p={name:"management",directives:{waves:l.a},data:function(){var t=function(t,e,a){""!==e?!1===/^[0-9]+([.]{1}[0-9]+){0,1}$/.test(e)?a(new Error("请输入正确的整数或小数")):a():a(new Error(t.message))};return{rules:{analysisDate:[{required:!0,message:"请选择日期"}],analysisCode:[{validator:function(t,e,a){""!==e?!1===/^[0-9a-zA-Z]{1,32}$/.test(e)?a(new Error("数字，字母组合，不可输入特殊符号")):a():a(new Error("请输入正确的化验编号"))}}],positionName:[{required:!0,message:"请填写区队"}],surfaceName:[{required:!0,message:"请填写工作面"}],sampleType:[{required:!0,message:"请选择类别"}],mt:[{validator:t,message:"请填写mt"}],mad:[{validator:t,message:"请填写mad"}],ad:[{validator:t,message:"请填写ad"}],vd:[{validator:t,message:"请填写vd"}],std:[{validator:t,message:"请填写std"}],qgrd:[{validator:t,message:"请填写qgrd"}],qnetar:[{validator:t,message:"请填写qnetar"}]},tzType:[{1:"生产煤样"},{2:"煤层煤样"}],total:null,currentPage:1,pageSize:15,departmentCode:o,departmentName:d,checked:!1,setDisabled:!1,disable:!1,isUpdate:!0,dialogStatus:"",textMap:{update:"编辑台账",create:"添加台账",info:"台账信息详情"},dialogFormVisible:!1,listLoading:!0,tableKey:0,tableHeight:document.body.clientHeight-280,temp:{analysisDate:"",sampleType:"",positionName:"",surfaceName:"",analysisCode:"",ad:"",vd:"",std:"",mt:"",qgrd:"",qnetar:"",remarks:""},dataList:[]}},created:function(){this.getList()},methods:{handleInfo:function(t){var e=this;this.dialogStatus="info",this.dialogFormVisible=!0,this.isUpdate=!1,this.setDisabled=!0,this.$nextTick(function(){e.$refs.dataForm.clearValidate()}),setTimeout(function(){e.$refs.dataForm.resetFields()},100),this.getSpModalInfo(t.id)},getSpModalInfo:function(t){this.dialogFormVisible=!0;var e=this;Object(n.d)("/v1/hySample/"+t,{token:r,authorityCode:1},{},function(t){if(200===t.data.status){var a=t.data.data;a.sampleType=""+a.sampleType,e.temp=a}else e.$notify({title:"系统提示",message:t.data.msg,type:"warning",duration:2e3})},function(t){e.listLoading=!1,console.log(t),e.$notify({title:"系统提示",message:"请求错误",type:"error",duration:3e3})})},getList:function(t,e){var a=this,i={departmentCode:o,pageNum:t,pageSize:e};Object(n.d)("/v1/hySample?jsonString="+s()(i),{token:r,authorityCode:1},{},function(t){if(a.listLoading=!1,200===t.data.status){a.total=null===t.data.data?null:t.data.data.total;var e=null===t.data.data?null:t.data.data.list;null!==e?a.dataList=e:(a.dataList=e,a.$notify({title:"系统提示",message:"搜索结果为空",type:"info",duration:3e3}))}else a.$notify({title:"系统提示",message:t.data.msg,type:"error",duration:3e3})},function(t){a.listLoading=!1,console.log(t),a.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},settemp:function(){this.temp={analysisDate:"",sampleType:"",positionName:"",surfaceName:"",analysisCode:"",ad:"",vd:"",std:"",mt:"",qgrd:"",qnetar:"",remarks:""}},handleCreate:function(){var t=this;this.settemp(),this.checked=!1,this.disable=!0,this.afterCreateHs=!1,this.setDisabled=!1,this.isUpdate=!0,this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()}),setTimeout(function(){t.$refs.dataForm.resetFields()},100)},doCreateHs:function(){this.afterCreateHs=!0},doUpdateHs:function(){this.afterUpdateHs=!0},edit:function(){var t=this;this.selectlistRow&&0!==this.selectlistRow.length&&1===this.selectlistRow.length?(this.getSpModalInfo(this.selectlistRow[0].id),this.afterUpdateHs=!1,this.dialogStatus="update",this.isUpdate=!0,this.setDisabled=!1,this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})):this.$notify({title:"系统提示",message:"请选择一条数据进行编辑！",type:"warning",duration:2e3})},delData:function(){var t=this;this.selectlistRow&&0!==this.selectlistRow.length?this.$confirm("确认要删除么?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e,a={ids:[]};t.selectlistRow.forEach(function(t){a.ids.push(t.id)}),e=s()(a),Object(n.c)("/v1/hySample",{token:r,authorityCode:1},e,function(e){t.$notify({message:"删除成功",type:"warning",duration:3e3,title:"系统提示"}),t.getList()},function(e){t.listLoading=!1,console.log(e),t.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}).catch(function(){t.$notify({type:"info",message:"已取消删除",duration:3e3,title:"系统提示"})}):t.$notify({message:"请选择数据进行删除操作！",type:"warning",duration:3e3,title:"系统提示"})},updateData:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){var a,i=t;["createAt","createBy","pageNum","pageSize","updateAt","updateBy","code"].forEach(function(e){return delete t.temp[e]}),a=t.temp,Object(n.g)("/v1/hySample",{token:r,authorityCode:1},a,function(t){200===t.data.status?(i.dialogFormVisible=!1,i.$notify({title:"系统提示",message:"更新成功",type:"success",duration:2e3}),i.getList()):i.$notify({title:"系统提示",message:"更新失败",type:"error",duration:2e3})},function(t){i.listLoading=!1,console.log(t),i.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}})},createData:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){t.disable=!0;var a=t;t.temp.departmentCode=o,t.temp.departmentName=d;var i=t.temp;Object(n.f)("/v1/hySample",{token:r,authorityCode:1},i,function(t){200===t.data.status?(a.dialogFormVisible=!1,a.$notify({title:"系统提示",message:"创建成功",type:"success",duration:2e3}),a.getList()):a.$notify({title:"系统提示",message:t.data.msg,type:"warning",duration:2e3})},function(t){a.listLoading=!1,console.log(t),a.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}})},formatDate:function(){var t=new Date,e=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getDate().toString().padStart(2,"0");return t.getFullYear()+"-"+e+"-"+a},selectRow:function(t){this.selectlistRow=t},handleSizeChange:function(t){this.getList(this.currentPage,t)},handleCurrentChange:function(t){this.getList(t,this.pageSize)}},filters:{typeChange:function(t){return t=1===t||"1"===t?"生产煤样":"煤层煤样"}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("div",{staticStyle:{"margin-top":"3px"}},[a("div",{staticStyle:{float:"right"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus-outline"},on:{click:t.handleCreate}},[t._v("添加")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){t.edit()}}},[t._v("编辑")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(e){e.preventDefault(),t.delData()}}},[t._v("删除")])],1)])]),t._v(" "),a("div",{attrs:{id:"reportDiv"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"煤样台账"}})],1),t._v(" "),a("el-table",{key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.dataList,stripe:"",border:"",fit:"","highlight-current-row":"",height:t.tableHeight},on:{"selection-change":t.selectRow,"row-click":t.handleInfo}},[a("el-table-column",{attrs:{type:"selection",width:"35"}}),t._v(" "),a("el-table-column",{attrs:{width:"150px",label:"单位",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.departmentName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"180px",label:"日期",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.analysisDate))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"130px",label:"类别",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("typeChange")(e.row.sampleType)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"130px",label:"区队",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.positionName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"130px",label:"工作面",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.surfaceName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"180px",label:"化验编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.analysisCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"Ad",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.ad))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"Vd",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.vd))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"Std",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.std))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"Mt",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.mt))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"Qgrd",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.qgrd))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100px",label:"Qnetar",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.qnetar))])]}}])})],1)],1),t._v(" "),a("el-dialog",{staticStyle:{"margin-top":"-5% !important"},attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,width:"80%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticClass:"form",attrs:{rules:t.rules,"status-icon":"",model:t.temp,"label-position":"right","label-width":"130px",disabled:t.setDisabled}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"单位:",prop:"departmentCode"}},[a("span",[t._v(t._s(t.departmentName))])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"日期:",required:"",prop:"analysisDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd"},model:{value:t.temp.analysisDate,callback:function(e){t.$set(t.temp,"analysisDate",e)},expression:"temp.analysisDate"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"类别:",required:"",prop:"sampleType"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t.temp.sampleType,callback:function(e){t.$set(t.temp,"sampleType",e)},expression:"temp.sampleType"}},[a("el-radio",{attrs:{label:"1"}},[t._v("生产煤样")]),t._v(" "),a("el-radio",{attrs:{label:"2"}},[t._v("煤层煤样")])],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"区队:",required:"",prop:"positionName"}},[a("el-input",{attrs:{maxlength:50},model:{value:t.temp.positionName,callback:function(e){t.$set(t.temp,"positionName",e)},expression:"temp.positionName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"工作面:",required:"",prop:"surfaceName"}},[a("el-input",{attrs:{maxlength:50},model:{value:t.temp.surfaceName,callback:function(e){t.$set(t.temp,"surfaceName",e)},expression:"temp.surfaceName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"化验编号:",required:"",prop:"analysisCode"}},[a("el-input",{attrs:{maxlength:50},model:{value:t.temp.analysisCode,callback:function(e){t.$set(t.temp,"analysisCode",e)},expression:"temp.analysisCode"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"Ad:",required:"",prop:"ad"}},[a("el-input",{attrs:{maxlength:50},model:{value:t.temp.ad,callback:function(e){t.$set(t.temp,"ad",e)},expression:"temp.ad"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"Vd:",required:"",prop:"vd"}},[a("el-input",{attrs:{maxlength:50},model:{value:t.temp.vd,callback:function(e){t.$set(t.temp,"vd",e)},expression:"temp.vd"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"St,d:",required:"",prop:"std"}},[a("el-input",{attrs:{maxlength:50},model:{value:t.temp.std,callback:function(e){t.$set(t.temp,"std",e)},expression:"temp.std"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"Mt:",required:"",prop:"mt"}},[a("el-input",{attrs:{maxlength:50},model:{value:t.temp.mt,callback:function(e){t.$set(t.temp,"mt",e)},expression:"temp.mt"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"Qgr,d:",prop:"qgrd"}},[a("el-input",{attrs:{maxlength:50},model:{value:t.temp.qgrd,callback:function(e){t.$set(t.temp,"qgrd",e)},expression:"temp.qgrd"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"Qnet,ar:",required:"",prop:"qnetar"}},[a("el-input",{attrs:{required:"",maxlength:50},model:{value:t.temp.qnetar,callback:function(e){t.$set(t.temp,"qnetar",e)},expression:"temp.qnetar"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"备注:",prop:"remarks"}},[a("el-input",{attrs:{maxlength:50},model:{value:t.temp.remarks,callback:function(e){t.$set(t.temp,"remarks",e)},expression:"temp.remarks"}})],1)],1)],1)],1),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),t.isUpdate?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),"create"==t.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v("添加")]):a("el-button",{attrs:{type:"primary"},on:{click:t.updateData}},[t._v("更新")])],1):t._e()],1),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[15,30,45,60,75,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var m=a("VU/8")(p,c,!1,function(t){a("wlnL")},null,null);e.default=m.exports},eiUy:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.el-date-editor .el-range-separator{\r\n  width: 6%;\n}\n.el-table__empty-block{\r\n    min-height: 0;\n}\n.btn_right {\r\n    float: right;\n}\n.filter-container{\r\n    padding-bottom: -5px;\n}\n.el-table--medium th{\r\n    padding: 2px 0;\n}\n.app-container{\r\n    padding: 10px 20px 10px;\n}\n.filter-container {\r\n    padding-bottom: 0px !important;\n}\r\n",""])},wlnL:function(t,e,a){var i=a("eiUy");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("53b2ca90",i,!0)}});