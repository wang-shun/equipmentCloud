webpackJsonp([48],{"/J39":function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n /* 头部表名table无数据时不显示 暂无数据字样 */\n.fix-header .el-table__empty-block{\n    min-height: 0;\n}\n.fix-header span{\n    float: left;\n    line-height: 30px;\n}\n.fix-header .el-input{\n    float: left;\n    width: 180px;\n}\n.fix-header .el-input--medium .el-input__inner{\n    height: 30px;\n    line-height: 30px;\n    border: none;\n    padding: 0 10px;\n}\n.btn_right{\n\t\tfloat: right;\n}\n.no-border-input .el-input__inner{\n    border-top: none;\n    border-left: none;\n    border-right: none;\n    border-radius: 0;\n}\n.table-center1{\n\t\twidth: 1250px;\n\t\tmargin: 0 auto;\n}\n.grid-content{\n    line-height: 35px;\n}\n.theader{\n\t\tfont-size: 1.2rem\n}\n.set-color1{\n\t\twidth: 1221px;\n\t\tpadding: 15px;\n\t\tcolor: #606266\n}\n.center{\n\t\ttext-align: center\n}\n.right{\n\t\ttext-align: right\n}\n.bottom-sign{\n    margin-top: 50px\n}\n.set-color1 .el-input--medium .el-input__inner{\n    height: 22px;\n    line-height: 22px;\n    border: none;\n    padding: 0 10px;\n}\n  /* 行内编辑 */\n.list-table .el-input {\n    display: none\n}\n.list-table .current-row .el-input {\n    display: block\n}\n.list-table .current-row .el-input + span {\n    display: none\n}\n.list-table .el-input--medium .el-input__inner{\n    height: 22px;\n    line-height: 22px;\n    padding: 0 10px;\n}\n",""])},"21Tg":function(n,e,t){var a=t("/J39");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("rjj0")("d57e58e8",a,!0)},Lu7m:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("mvHQ"),s=t.n(a),i=t("ZjsX"),l=t("lbHh"),r=t.n(l),o=t("lDdF"),u=t.n(o),p=t("uXZL"),c=t.n(p),d=r.a.get("token"),m={name:"newDegree",data:function(){return{style:{borderTop:"none",borderLeft:"none",borderRight:"none"},deptCode:{},listQuery:{date:"",useDepartment:""},sign:{createExcelName:"",statusName:"",sureName:""},applyCompanyList:[],tableData3:[],tableData:[{name1:"制表：",name2:"审核：",name3:"矿方确认人："}]}},created:function(){this.getDeptList()},methods:{handleEdit:function(n,e){e.sum=e.equipmentNum*e.day*e.costA1;var t=0;this.tableData3.forEach(function(n,e){0!==e&&(t+=n.sum)}),this.tableData3[0].sum=t},getDeptList:function(){var n=this;this.applyCompanyList=[],Object(i.d)("/v1/elplan?page=1&size=100&type=21",{token:d,authorityCode:1},{},function(e){200===e.data.status?e.data.data.list.forEach(function(e,t){var a={};a.deptCode=e.code,a.name=e.name,a.id=e.id,n.applyCompanyList.push(a)}):n.$notify({title:"错误",message:e.data.meta.message,type:"error",duration:3e3})})},search:function(){if(""===this.listQuery.useDepartment||""===this.listQuery.date)this.$notify({title:"系统提示",message:"请完整选择搜索条件！",type:"warning",duration:3e3});else{var n=this,e=this.listQuery.date.substring(0,4),t=parseInt(this.listQuery.date.substring(5,7))+"",a={},l={};l.useYear=e,l.useMonth=t,l.useDeptCode=this.deptCode.deptCode,l.useDeptName=this.deptCode.name,Object(i.d)("/v1/newReport?page=1&size=1000&jsonString="+s()(l),{token:d,authorityCode:1},{},function(e){if(200===e.data.status){var t=e.data.data.list;t&&0!==t.length?(n.tableData3=t,n.sign.createExcelName=t[0].createExcelName,n.sign.statusName=t[0].statusName,n.sign.sureName=t[0].sureName,a.sum=t[0].feeSum,a.name="合计",a.notShow=!0,n.tableData3.unshift(a)):(n.tableData3=[],n.sign.createExcelName="",n.sign.statusName="",n.sign.sureName="",n.$notify({title:"系统提示",message:"搜索结果为空",type:"info",duration:3e3}))}else n.$notify({title:"错误",message:e.data.meta.message,type:"error",duration:3e3})})}},getDeptCode:function(n){this.deptCode=this.applyCompanyList.find(function(e){return e.name===n})},exportExcel:function(){var n=this;if(0!==this.tableData3.length){var e=this,t=this.listQuery.date.substring(0,4),a=parseInt(this.listQuery.date.substring(5,7))+"",s=[];this.tableData3.forEach(function(e,i){if(0!==i){var l={};l.name=e.name,l.equipmentModel=e.equipmentModel,l.equipmentUnit=e.equipmentUnit,l.equipmentNum=parseInt(e.equipmentNum),l.sum=parseFloat(e.sum),l.costA1=parseFloat(e.costA1),l.day=parseInt(e.day),l.remark=e.remark,l.equipmentCode=e.equipmentCode,l.feeDay=e.feeDay,l.feeSum=n.tableData3[0].sum,l.useDeptName=n.deptCode.name,l.useDeptCode=n.deptCode.deptCode,l.number=l.number,l.createExcelName=n.sign.createExcelName,l.statusName=n.sign.statusName,l.sureName=n.sign.sureName,l.useAt=e.useAt,l.equipmentPosition=e.equipmentPosition,l.useYear=t,l.useMonth=a,l.type=e.type,s.push(l)}});var l={zNewReports:s};Object(i.f)("/v1/newReport",{token:d,authorityCode:1},l,function(n){200===n.data.status?(e.excel(),e.$notify({title:"系统提示",message:"导出成功",type:"success",duration:3e3})):e.$notify({title:"错误",message:n.data.msg,type:"error",duration:3e3})})}else this.$notify({title:"提示",message:"数据为空，不可导出",type:"info",duration:3e3})},excel:function(){var n=c.a.utils.table_to_book(document.querySelector("#reportDiv")),e=c.a.write(n,{bookType:"xlsx",bookSST:!0,type:"array"});try{u.a.saveAs(new Blob([e],{type:"application/octet-stream"}),"综机设备新度系数调节费清单.xlsx")}catch(n){"undefined"!=typeof console&&console.log(n,e)}return e},reset:function(){this.listQuery.date="",this.listQuery.useDepartment="",this.tableData3=[]}},filters:{numFilter:function(n){var e=Number(n).toFixed(2),t=e.substring(0,e.length);return Number(t)}}},h={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container1"},[t("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{type:"month",placeholder:"选择年月","value-format":"yyyy-MM",format:"yyyy-MM"},model:{value:n.listQuery.date,callback:function(e){n.$set(n.listQuery,"date",e)},expression:"listQuery.date"}}),n._v(" "),t("el-select",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{filterable:"",clearable:"",placeholder:"选择单位"},on:{change:n.getDeptCode},model:{value:n.listQuery.useDepartment,callback:function(e){n.$set(n.listQuery,"useDepartment",e)},expression:"listQuery.useDepartment"}},n._l(n.applyCompanyList,function(n){return t("el-option",{key:n.deptCode,attrs:{label:n.name,value:n.name}})})),n._v(" "),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:n.search}},[n._v("搜索")]),n._v(" "),t("el-button",{staticClass:"filter-item",attrs:{size:"small",icon:"el-icon-refresh"},on:{click:n.reset}},[n._v("重置")]),n._v(" "),t("div",{staticClass:"btn_right"},[t("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"warning",icon:"el-icon-upload"},on:{click:n.exportExcel}},[n._v("导出")])],1)],1),n._v(" "),t("div",{staticClass:"table-center1",attrs:{id:"reportDiv"}},[t("el-table",{staticClass:"fix-header",staticStyle:{width:"1221px"},attrs:{fit:""}},[t("el-table-column",{attrs:{label:"综机设备新度系数调节费清单",align:"center"}},[t("el-table-column",{attrs:{label:"使用单位："+n.listQuery.useDepartment}})],1)],1),n._v(" "),t("el-table",{ref:"upTable",staticClass:"list-table",staticStyle:{width:"1221px"},attrs:{data:n.tableData3,border:"",fit:"","highlight-current-row":""}},[t("el-table-column",{attrs:{width:"100px",align:"center",prop:"equipmentPosition",label:"工作面"}}),n._v(" "),t("el-table-column",{attrs:{width:"180px",align:"center",prop:"name",label:"名称"}}),n._v(" "),t("el-table-column",{attrs:{width:"180px",align:"center",prop:"equipmentModel",label:"规格型号"}}),n._v(" "),t("el-table-column",{attrs:{width:"60px",align:"center",prop:"equipmentUnit",label:"单位"}}),n._v(" "),t("el-table-column",{attrs:{width:"80px",align:"center",label:"数量"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-input",{directives:[{name:"show",rawName:"v-show",value:!e.row.notShow,expression:"!scope.row.notShow"}],staticClass:"table-input",attrs:{type:"text"},on:{change:function(t){n.handleEdit(e.$index,e.row)}},model:{value:e.row.equipmentNum,callback:function(t){n.$set(e.row,"equipmentNum",t)},expression:"scope.row.equipmentNum"}}),n._v(" "),t("span",[n._v(n._s(e.row.equipmentNum))])]}}])}),n._v(" "),t("el-table-column",{attrs:{width:"160px",align:"center",label:"日计费标准（元）"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-input",{directives:[{name:"show",rawName:"v-show",value:!e.row.notShow,expression:"!scope.row.notShow"}],staticClass:"table-input",attrs:{type:"text"},on:{change:function(t){n.handleEdit(e.$index,e.row)}},model:{value:e.row.costA1,callback:function(t){n.$set(e.row,"costA1",t)},expression:"scope.row.costA1"}}),n._v(" "),t("span",[n._v(n._s(e.row.costA1))])]}}])}),n._v(" "),t("el-table-column",{attrs:{width:"100px",align:"center",label:"收费天数"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-input",{directives:[{name:"show",rawName:"v-show",value:!e.row.notShow,expression:"!scope.row.notShow"}],staticClass:"table-input",attrs:{type:"text"},on:{change:function(t){n.handleEdit(e.$index,e.row)}},model:{value:e.row.day,callback:function(t){n.$set(e.row,"day",t)},expression:"scope.row.day"}}),n._v(" "),t("span",[n._v(n._s(e.row.day))])]}}])}),n._v(" "),t("el-table-column",{attrs:{width:"100px",align:"center",label:"金额（元）"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("span",[n._v(n._s(n._f("numFilter")(e.row.sum)))])]}}])}),n._v(" "),t("el-table-column",{attrs:{width:"240px",align:"center",label:"备注"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-input",{directives:[{name:"show",rawName:"v-show",value:!e.row.notShow,expression:"!scope.row.notShow"}],staticClass:"table-input",attrs:{type:"text"},model:{value:e.row.remark,callback:function(t){n.$set(e.row,"remark",t)},expression:"scope.row.remark"}}),n._v(" "),t("span",[n._v(n._s(e.row.remark))])]}}])})],1),n._v(" "),t("el-table",{staticClass:"fix-header",staticStyle:{width:"1161px"},attrs:{data:n.tableData,"show-header":!1}},[t("el-table-column",{attrs:{width:"387px"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("span",[n._v(n._s(e.row.name1))]),n._v(" "),t("span",{staticStyle:{display:"none"}},[n._v(n._s(n.sign.createExcelName))]),n._v(" "),t("el-input",{attrs:{type:"text"},model:{value:n.sign.createExcelName,callback:function(e){n.$set(n.sign,"createExcelName",e)},expression:"sign.createExcelName"}})]}}])}),n._v(" "),t("el-table-column",{attrs:{width:"387px"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("span",[n._v(n._s(e.row.name2))]),n._v(" "),t("span",{staticStyle:{display:"none"}},[n._v(n._s(n.sign.statusName))]),n._v(" "),t("el-input",{attrs:{type:"text"},model:{value:n.sign.statusName,callback:function(e){n.$set(n.sign,"statusName",e)},expression:"sign.statusName"}})]}}])}),n._v(" "),t("el-table-column",{attrs:{width:"387px"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("span",[n._v(n._s(e.row.name3))]),n._v(" "),t("span",{staticStyle:{display:"none"}},[n._v(n._s(n.sign.sureNam))]),n._v(" "),t("el-input",{attrs:{type:"text"},model:{value:n.sign.sureName,callback:function(e){n.$set(n.sign,"sureName",e)},expression:"sign.sureName"}})]}}])})],1)],1)])},staticRenderFns:[]};var f=t("VU/8")(m,h,!1,function(n){t("21Tg")},null,null);e.default=f.exports}});