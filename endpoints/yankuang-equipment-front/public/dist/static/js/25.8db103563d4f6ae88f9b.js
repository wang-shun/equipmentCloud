webpackJsonp([25],{Ejn4:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.el-date-editor .el-range-separator{\r\n  width: 6%;\n}\n.el-table__empty-block{\r\n    min-height: 0;\n}\n.btn_right {\r\n    float: right;\n}\n.el-dialog__body {\r\n    padding: 10px 20px !important\n}\n.filter-container .filter-item{ \r\n    margin-bottom: 4px !important;\n}\n.el-table--medium td, .el-table--medium th {\r\n    padding: 3px 0 !important;\n}\r\n",""])},n6fz:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("BO1k"),a=i.n(s),n=i("lDdF"),l=i.n(n),o=i("uXZL"),r=i.n(o),c=i("ZjsX"),d=i("cAgV"),u=sessionStorage.getItem("token"),h={name:"eqApplication_ty",directives:{waves:d.a},data:function(){return{checked:!1,setDisabled:!1,disable:!1,isUpdate:!0,dialogStatus:"",textMap:{update:"编辑",create:"添加",info:"详情"},dialogFormVisible:!1,listLoading:!1,tableKey:0,total:null,currentPage:1,pageSize:15,tableHeight:document.body.clientHeight-250,listQuery:{startDate:"",endDate:"",kaishidate:"",jieshudate:"",searchDate:[]},rules:{deptCode:[{required:!0,message:"请选择单位"}],date:[{required:!0,message:"请选择日期"}],lx:[{required:!0,message:"请选择流向"}],pz:[{required:!0,message:"请选择品种"}]},varietiesList:[{code:"全选",name:"全选"},{code:"11000",name:"选煤产品"},{code:"11100",name:"精煤产品"},{code:"11110",name:"精煤"}],varietiesLists:[{code:"11000",name:"选煤产品"},{code:"11100",name:"精煤产品"},{code:"11110",name:"精煤"}],SalesList:[{code:"01",name:"国内"},{code:"02",name:"国外"}],unitList:[{code:"全选",name:"全选"},{code:"02",name:"鲍店矿"},{code:"01",name:"东滩矿"},{code:"03",name:"济一矿"}],unitLists:[{code:"02",name:"鲍店矿"},{code:"01",name:"东滩矿"},{code:"03",name:"济一矿"}],flowList:[{code:"全选",name:"全选"},{code:"dx",name:"地销"},{code:"hc",name:"火车"},{code:"nbdb",name:"内部调拨"}],flowLists:[{code:"dx",name:"地销"},{code:"hc",name:"火车"},{code:"nbdb",name:"内部调拨"}],oldOptions:[],oldOptionsflow:[],oldOptionsvarieties:[],temp:{deptCode:"",deptName:"",date:"",pc:"",lx:"",lxName:"",pzName:"",pz:"",xsxzName:"",dz:"",yhmc:"",cs:0,fyl:0,spl:0,hybh:"",jhhf:0,sjhf:0,jhfrl:0,sjfrl:0,qsf:0,lf:0,xxlv:0,bz:"",ksxs:9,ksl:0},dataList:[]}},created:function(){this.listQuery.searchDate[0]=this.formatDatestart(),this.listQuery.searchDate[1]=this.formatDate(),this.getList()},watch:{checked:function(t,e){console.log(this.checked),!1===this.checked?this.disable=!0:!0===this.checked&&(this.disable=!1)},"listQuery.searchDate":function(t,e){this.listQuery.startDate=this.listQuery.searchDate[0],this.listQuery.endDate=this.listQuery.searchDate[1],this.listQuery.startDate?(this.listQuery.kaishidate=this.listQuery.startDate,this.listQuery.kaishidate=this.listQuery.kaishidate.replace("-","年").replace("-","日")+"月"):this.listQuery.kaishidate="",this.listQuery.endDate?(this.listQuery.jieshudate=this.listQuery.endDate,this.listQuery.jieshudate="--"+this.listQuery.jieshudate.replace("-","年").replace("-","日")+"月"):this.listQuery.jieshudate=""}},methods:{selectRow:function(t){this.selectlistRow=t},handleInfo:function(t){var e=this;this.dialogStatus="info",this.dialogFormVisible=!0,this.isUpdate=!1,this.setDisabled=!0,this.$nextTick(function(){e.$refs.dataForm.clearValidate()}),this.getSpModalInfo(t.id)},getSpModalInfo:function(t){this.dialogFormVisible=!0;var e=this;Object(c.d)("/v1/spmxstz/find/"+t,{token:u,authorityCode:1},{},function(t){if(console.log(t),200===t.data.status){var i=t.data.data;e.temp=i}else e.$notify({title:"系统提示",message:t.data.msg,type:"warning",duration:2e3})},function(t){e.listLoading=!1,console.log(t),this.$notify({title:"系统提示",message:"请求错误",type:"error",duration:3e3})})},getList:function(){this.listLoading=!0,this.listQuery.startDate=this.listQuery.searchDate[0],this.listQuery.endDate=this.listQuery.searchDate[1];var t=this,e={q_startDate:this.listQuery.startDate,q_endDate:this.listQuery.endDate};Object(c.d)("/v1/spmxstz/listTwoCoalReport",{token:u,authorityCode:1},e,function(e){if(t.listLoading=!1,console.log(e),200===e.data.status){var i=e.data.data;t.dataList=i}else t.$notify({title:"系统提示",message:e.data.msg,type:"error",duration:3e3})},function(e){t.listLoading=!1,console.log(e),t.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},settemp:function(){this.temp={deptCode:"",deptName:"",date:"",pc:"",lx:"",lxName:"",pzName:"",pz:"",xsxzName:"",dz:"",yhmc:"",cs:0,fyl:0,spl:0,hybh:"",jhhf:0,sjhf:0,jhfrl:0,sjfrl:0,qsf:0,lf:0,xxlv:0,bz:"",ksxs:9,ksl:0}},handleCreate:function(){var t=this;this.settemp(),this.checked=!1,this.disable=!0,this.setDisabled=!1,this.isUpdate=!0,this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()}),setTimeout(function(){t.$refs.dataForm.resetFields()},100)},edit:function(){var t=this;this.selectlistRow&&0!==this.selectlistRow.length&&1===this.selectlistRow.length?(this.getSpModalInfo(this.selectlistRow[0].id),this.dialogStatus="update",this.isUpdate=!0,this.setDisabled=!1,this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})):this.$notify({title:"系统提示",message:"请选择一条数据进行编辑！",type:"warning",duration:2e3})},delData:function(){var t=this;t.selectlistRow&&0!==t.selectlistRow.length?t.$confirm("确认要删除么?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var e="",i=0;i<t.selectlistRow.length;i++)e+=t.selectlistRow[i].id+",";e=e.substring(0,e.length-1),Object(c.c)("/v1/spmxstz/deletes/"+e,{token:u,authorityCode:1},{},function(e){console.log(e),t.$notify({message:"删除成功",type:"warning",duration:3e3,title:"系统提示"}),t.getList(t.currentPage,t.pageSize)},function(e){t.listLoading=!1,console.log(e),t.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}).catch(function(){t.$notify({type:"info",message:"已取消删除",duration:3e3,title:"系统提示"})}):t.$notify({message:"请选择数据进行删除操作！",type:"warning",duration:3e3,title:"系统提示"})},updateData:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){for(var i=t,s=0;s<t.unitList.length;s++)i.temp.deptCode===i.unitList[s].code&&(i.temp.deptName=i.unitList[s].name);Object(c.g)("/v1/spmxstz/update",{token:u,authorityCode:1},i.temp,function(t){200===t.data.status?(i.dialogFormVisible=!1,i.$notify({title:"系统提示",message:"更新成功",type:"success",duration:2e3}),i.getList(i.currentPage,i.pageSize)):i.$notify({title:"系统提示",message:"更新失败",type:"error",duration:2e3})},function(t){i.listLoading=!1,console.log(t),i.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}})},createData:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){t.disable=!0;for(var i=t,s=0;s<t.unitList.length;s++)i.temp.deptCode===i.unitList[s].code&&(i.temp.deptName=i.unitList[s].name);console.log(i.checked,1243254354),!1===i.checked?(i.temp.ksxs="0",i.temp.ksl="0"):!0===i.checked&&(i.temp.ksxs=i.temp.ksxs,i.temp.ksl=i.temp.ksl),Object(c.f)("/v1/spmxstz/create",{token:u,authorityCode:1},i.temp,function(t){console.log(t),200===t.data.status?(i.getList(i.currentPage,i.pageSize),i.dialogFormVisible=!1,i.$notify({title:"系统提示",message:"创建成功",type:"success",duration:2e3})):i.$notify({title:"系统提示",message:t.data.msg,type:"warning",duration:2e3})},function(t){i.listLoading=!1,console.log(t),i.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}})},formatDate:function(){var t=new Date,e=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0");return t.getFullYear()+"-"+e+"-"+i},formatDatestart:function(){var t=new Date,e=(t.getMonth()+1).toString().padStart(2,"0");return t.getFullYear()+"-"+e+"-01"},reset:function(){this.listQuery.startDate="",this.listQuery.endDate="",this.listQuery.searchDate=[],this.dataList=[]},handleSizeChange:function(t){this.getList(this.currentPage,t)},handleCurrentChange:function(t){this.getList(t,this.pageSize)},search:function(){this.getList()},selectAll:function(t){var e=[],i=!0,s=!1,n=void 0;try{for(var l,o=a()(this.unitList);!(i=(l=o.next()).done);i=!0){var r=l.value;e.push(r.code)}}catch(t){s=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(s)throw n}}var c=1===this.oldOptions.length?this.oldOptions[0]:[];if(t.includes("全选")&&(this.listQuery.unit=e),c.includes("全选")&&!t.includes("全选")&&(this.listQuery.unit=[]),c.includes("全选")&&t.includes("全选")){var d=t.indexOf("全选");t.splice(d,1),this.listQuery.unit=t}c.includes("全选")||t.includes("全选")||(console.log(11),t.length===e.length-1&&(this.listQuery.unit=["全选"].concat(t))),this.oldOptions[0]=this.listQuery.unit},Allflow:function(t){var e=[],i=!0,s=!1,n=void 0;try{for(var l,o=a()(this.flowList);!(i=(l=o.next()).done);i=!0){var r=l.value;e.push(r.code)}}catch(t){s=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(s)throw n}}var c=1===this.oldOptionsflow.length?this.oldOptionsflow[0]:[];if(t.includes("全选")&&(this.listQuery.flow=e),c.includes("全选")&&!t.includes("全选")&&(this.listQuery.flow=[]),c.includes("全选")&&t.includes("全选")){var d=t.indexOf("全选");t.splice(d,1),this.listQuery.flow=t}c.includes("全选")||t.includes("全选")||(console.log(11),t.length===e.length-1&&(this.listQuery.flow=["全选"].concat(t))),this.oldOptionsflow[0]=this.listQuery.flow},Allvarieties:function(t){var e=[],i=!0,s=!1,n=void 0;try{for(var l,o=a()(this.varietiesList);!(i=(l=o.next()).done);i=!0){var r=l.value;e.push(r.code)}}catch(t){s=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(s)throw n}}var c=1===this.oldOptionsvarieties.length?this.oldOptionsvarieties[0]:[];if(t.includes("全选")&&(this.listQuery.varieties=e),c.includes("全选")&&!t.includes("全选")&&(this.listQuery.varieties=[]),c.includes("全选")&&t.includes("全选")){var d=t.indexOf("全选");t.splice(d,1),this.listQuery.varieties=t}c.includes("全选")||t.includes("全选")||(console.log(11),t.length===e.length-1&&(this.listQuery.varieties=["全选"].concat(t))),this.oldOptionsvarieties[0]=this.listQuery.varieties},printContent:function(){var t=document.getElementById("reportDiv").innerHTML,e=document.body.innerHTML;document.body.innerHTML=t,window.print(),location.reload(),document.body.innerHTML=e},exportExcel:function(){var t=r.a.utils.table_to_book(document.querySelector("#reportDiv")),e=r.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{l.a.saveAs(new Blob([e],{type:"application/octet-stream"}),"二号精煤合格率统计表.xlsx")}catch(t){"undefined"!=typeof console&&console.log(t,e)}return e}},filters:{}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("div",{staticStyle:{float:"left"}},[i("el-date-picker",{staticStyle:{width:"400px"},attrs:{type:"daterange","unlink-panels":"","range-separator":"至","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini"},model:{value:t.listQuery.searchDate,callback:function(e){t.$set(t.listQuery,"searchDate",e)},expression:"listQuery.searchDate"}}),t._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticStyle:{"margin-left":"8px"},attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:t.reset}},[t._v("重置")])],1),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"warning",icon:"el-icon-upload"},on:{click:t.exportExcel}},[t._v("导出")]),t._v(" "),i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"warning",icon:"el-icon-upload"},on:{click:t.printContent}},[t._v("打印")])],1)]),t._v(" "),i("div",{attrs:{id:"reportDiv"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,ref:"moviesTable",staticStyle:{width:"100%"},attrs:{data:t.dataList,stripe:"",border:"",fit:"","highlight-current-row":"",height:t.tableHeight},on:{"selection-change":t.selectRow}},[i("el-table-column",{attrs:{align:"center",label:"二号精煤合格率统计表"}},[i("el-table-column",{attrs:{align:"center",label:this.listQuery.kaishidate+this.listQuery.jieshudate}},[i("el-table-column",{attrs:{align:"center",label:"单位名称",width:"110px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.deptName))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"130px",label:"火车",align:"center"}},[i("el-table-column",{attrs:{width:"60px",align:"center",label:"合格"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.hcYes))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"70px",align:"center",label:"不合格"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.hcNo))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"70px",align:"center",label:"合格率（%）"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.hcYesRate))])]}}])})],1),t._v(" "),i("el-table-column",{attrs:{width:"70px",label:"地销",align:"center"}},[i("el-table-column",{attrs:{width:"60px",align:"center",label:"合格"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.dxYes))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"70px",align:"center",label:"不合格"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.dxNo))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"70px",align:"center",label:"合格率（%）"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.dxYesRate))])]}}])})],1),t._v(" "),i("el-table-column",{attrs:{width:"130px",label:"运河",align:"center"}},[i("el-table-column",{attrs:{width:"60px",align:"center",label:"合格"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.yhYes))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"70px",align:"center",label:"不合格"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.yhNo))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"70px",align:"center",label:"合格率（%）"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.yesRate))])]}}])})],1),t._v(" "),i("el-table-column",{attrs:{width:"130px",label:"海港",align:"center"}},[i("el-table-column",{attrs:{width:"60px",align:"center",label:"合格"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.hgYes))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"70px",align:"center",label:"不合格"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.hgNo))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"70px",align:"center",label:"合格率（%）"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.hgYesRate))])]}}])})],1),t._v(" "),i("el-table-column",{attrs:{width:"70px",align:"center",label:"不合格"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.sumNo))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"70px",align:"center",label:"总批数"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.sumAll))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"70px",align:"center",label:"合格率（%）"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.yesRate))])]}}])})],1)],1)],1),t._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"left",label:"审核人:"}}),t._v(" "),i("el-table-column",{staticStyle:{"margin-left":"-10px"},attrs:{align:"center",label:"制表人:"}})],1)],1)])},staticRenderFns:[]};var p=i("VU/8")(h,f,!1,function(t){i("w3rG")},null,null);e.default=p.exports},w3rG:function(t,e,i){var s=i("Ejn4");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("17717677",s,!0)}});