webpackJsonp([71],{"0F+h":function(e,t,l){(e.exports=l("FZ+f")(!1)).push([e.i,"\n.el-date-editor .el-range-separator{\r\n  width: 6%;\n}\n.el-table__empty-block{\r\n    min-height: 0;\n}\n.btn_right {\r\n    float: right;\n}\n.el-table--medium th{\r\n    padding: 2px 0;\n}\n.app-container{\r\n    padding: 10px 20px 10px;\n}\n.filter-container {\r\n    padding-bottom: 0px !important;\n}\n.filter-container .filter-item{ \r\n    margin-bottom: 4px !important;\n}\r\n",""])},"85Kn":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("BO1k"),n=l.n(a),i=l("mvHQ"),s=l.n(i),r=l("Gu7T"),o=l.n(r),c=l("lDdF"),d=l.n(c),u=l("uXZL"),p=l.n(u),f=l("ZjsX"),h=l("cAgV"),v=sessionStorage.getItem("token"),y=JSON.parse(sessionStorage.getItem("dwbbList")),m=sessionStorage.getItem("id"),g={name:"daily",directives:{waves:h.a},data:function(){return{listQuery:{searchDate:"",flow:[],varieties:[]},departmentCode:"",departmentName:"",listLoading:!0,tableKey:0,tableHeight:document.body.clientHeight-280,unitLists:y,flowList:[],varietiesList:[],oldOptionsflow:[],oldOptionsvarieties:[],dataList:[],col:["日期|rq","流向|lx","品种|pz","化验编号|bh","批次|pc","代表量|dbl","Mt","Mad","Ad","Vd","Vdaf","焦渣特性|crc","St,d|std","Qgr,ad|qgrad","Qgr,d|qgrd","Qnet,ar(MJ/kg)|mj","Qnet,ar(cal/g)|cal"],checkboxGroup:[],selectedCol:{},elBtnType:"primary",elBtnContent:"自定义表头"}},created:function(){var e=localStorage.getItem("yb"+m)?localStorage.getItem("yb"+m):"[]";this.checkboxGroup=JSON.parse(e),this.hideCol(),this.getLX(),this.getPZ()},methods:{getLX:function(){var e=this;Object(f.d)("/v1/spmTransport",{token:v,authorityCode:1},{},function(t){if(e.listLoading=!1,200===t.data.status){var l=null===t.data.data?null:t.data.data.list,a=[].concat(o()(l));a.unshift({code:"全选",name:"全选"}),e.flowList=a}else e.$notify({title:"系统提示",message:t.data.msg,type:"error",duration:3e3})},function(t){e.listLoading=!1,console.log(t),e.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},getPZ:function(){var e=this;Object(f.d)("/v1/spmType/findSmallestTypes",{token:v,authorityCode:1},{},function(t){if(e.listLoading=!1,200===t.data.status){var l=t.data.data,a=[].concat(o()(l));a.unshift({code:"全选",name:"全选"}),e.varietiesList=a}else e.$notify({title:"系统提示",message:t.data.msg,type:"error",duration:3e3})},function(t){e.listLoading=!1,console.log(t),e.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},getList:function(){var e=this.listQuery.flow.filter(function(e){return"全选"!==e}),t=this.listQuery.varieties.filter(function(e){return"全选"!==e}),l=this,a=this.listQuery.searchDate[0],n=this.listQuery.searchDate[1],i={departmentCode:this.departmentCode,monthStart:a,monthEnd:n,lxCodes:e,spmTypes:t};Object(f.d)("/v1/hyQuality/monthReports?jsonString="+s()(i),{token:v,authorityCode:1},{},function(e){if(l.listLoading=!1,200===e.data.status){var t=e.data.data;null!==t?l.dataList=t:(l.dataList=t,l.$notify({title:"系统提示",message:"搜索结果为空",type:"info",duration:3e3}))}else l.$notify({title:"系统提示",message:e.data.msg,type:"error",duration:3e3})},function(e){l.listLoading=!1,console.log(e),l.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},search:function(){this.getList()},getName:function(e){var t=this;this.unitLists.forEach(function(l){e!==l.code||(t.departmentName=l.name)})},reset:function(){this.listQuery.searchDate="",this.listQuery.flow=[],this.listQuery.varieties=[],this.departmentCode="",this.dataList=[]},hideCol:function(){var e=this;this.selectedCol={},this.checkboxGroup.forEach(function(t){var l=t.indexOf("|")>0?t.split("|")[1]:t;e.selectedCol[l]=!0})},changeType:function(){this.elBtnType="success",this.elBtnContent="保存设置"},saveSettings:function(){this.elBtnType="primary",this.elBtnContent="自定义表头",localStorage.setItem("yb"+m,s()(this.checkboxGroup))},Allflow:function(e){var t=[],l=!0,a=!1,i=void 0;try{for(var s,r=n()(this.flowList);!(l=(s=r.next()).done);l=!0){var o=s.value;t.push(o.code)}}catch(e){a=!0,i=e}finally{try{!l&&r.return&&r.return()}finally{if(a)throw i}}var c=1===this.oldOptionsflow.length?this.oldOptionsflow[0]:[];if(e.includes("全选")&&(this.listQuery.flow=t),c.includes("全选")&&!e.includes("全选")&&(this.listQuery.flow=[]),c.includes("全选")&&e.includes("全选")){var d=e.indexOf("全选");e.splice(d,1),this.listQuery.flow=e}c.includes("全选")||e.includes("全选")||e.length===t.length-1&&(this.listQuery.flow=["全选"].concat(e)),this.oldOptionsflow[0]=this.listQuery.flow},Allvarieties:function(e){var t=[],l=!0,a=!1,i=void 0;try{for(var s,r=n()(this.varietiesList);!(l=(s=r.next()).done);l=!0){var o=s.value;t.push(o.code)}}catch(e){a=!0,i=e}finally{try{!l&&r.return&&r.return()}finally{if(a)throw i}}var c=1===this.oldOptionsvarieties.length?this.oldOptionsvarieties[0]:[];if(e.includes("全选")&&(this.listQuery.varieties=t),c.includes("全选")&&!e.includes("全选")&&(this.listQuery.varieties=[]),c.includes("全选")&&e.includes("全选")){var d=e.indexOf("全选");e.splice(d,1),this.listQuery.varieties=e}c.includes("全选")||e.includes("全选")||e.length===t.length-1&&(this.listQuery.varieties=["全选"].concat(e)),this.oldOptionsvarieties[0]=this.listQuery.varieties},exportExcel:function(){var e=p.a.utils.table_to_book(document.querySelector("#reportDiv")),t=p.a.write(e,{bookType:"xlsx",bookSST:!0,type:"array"});try{d.a.saveAs(new Blob([t],{type:"application/octet-stream"}),this.departmentName+"煤质化验总台账.xlsx")}catch(e){"undefined"!=typeof console&&console.log(e,t)}return t}},filters:{}},_={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[l("div",{staticClass:"filter-container"},[l("el-row",[l("el-select",{attrs:{multiple:"",placeholder:"请选择流向","collapse-tags":"",size:"mini"},on:{change:e.Allflow},model:{value:e.listQuery.flow,callback:function(t){e.$set(e.listQuery,"flow",t)},expression:"listQuery.flow"}},e._l(e.flowList,function(e){return l("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),e._v(" "),l("el-select",{attrs:{multiple:"",placeholder:"请选择品种","collapse-tags":"",size:"mini"},on:{change:e.Allvarieties},model:{value:e.listQuery.varieties,callback:function(t){e.$set(e.listQuery,"varieties",t)},expression:"listQuery.varieties"}},e._l(e.varietiesList,function(e){return l("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),e._v(" "),l("el-date-picker",{staticStyle:{width:"350px"},attrs:{type:"daterange","unlink-panels":"","range-separator":"至","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini"},model:{value:e.listQuery.searchDate,callback:function(t){e.$set(e.listQuery,"searchDate",t)},expression:"listQuery.searchDate"}}),e._v(" "),l("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择单位",size:"mini"},on:{change:e.getName},model:{value:e.departmentCode,callback:function(t){e.departmentCode=t},expression:"departmentCode"}},e._l(e.unitLists,function(e){return l("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),l("el-row",{staticStyle:{margin:"12px 0"},attrs:{type:"flex",justify:"space-between"}},[l("el-col",[l("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),l("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.reset}},[e._v("重置")]),e._v(" "),l("el-popover",{staticClass:"filter-item",attrs:{placement:"bottom",trigger:"click"},on:{"after-enter":e.changeType,"after-leave":e.saveSettings}},[l("el-checkbox-group",{staticStyle:{padding:"10px"},attrs:{size:"mini"},on:{change:e.hideCol},model:{value:e.checkboxGroup,callback:function(t){e.checkboxGroup=t},expression:"checkboxGroup"}},e._l(e.col,function(t){return l("el-checkbox-button",{key:t,attrs:{label:t}},[e._v(e._s(t.indexOf("|")>0?t.split("|")[0]:t))])})),e._v(" "),l("el-button",{staticStyle:{"margin-left":"8px","min-width":"92px"},attrs:{slot:"reference",type:e.elBtnType,size:"mini"},slot:"reference"},[e._v(e._s(e.elBtnContent))])],1)],1),e._v(" "),l("el-col",[l("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{float:"right"},attrs:{type:"warning",size:"mini",icon:"el-icon-download"},on:{click:e.exportExcel}},[e._v("导出")])],1)],1)],1),e._v(" "),l("div",{attrs:{id:"reportDiv"}},[l("el-table",{staticStyle:{width:"100%"},attrs:{border:"",fit:"","highlight-current-row":""}},[l("el-table-column",{attrs:{align:"center",label:this.departmentName+"矿煤质化验月报表"}},[l("el-table-column",{attrs:{align:"center",label:"日期："+(e.listQuery.searchDate?e.listQuery.searchDate[0]:"")+" —— "+(e.listQuery.searchDate?e.listQuery.searchDate[1]:"")}})],1)],1),e._v(" "),l("el-table",{key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.dataList,stripe:"",border:"",fit:"","highlight-current-row":"",height:e.tableHeight}},[e.selectedCol.rq?e._e():l("el-table-column",{attrs:{width:"100px",label:"日期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.analysisDate))])]}}])}),e._v(" "),e.selectedCol.lx?e._e():l("el-table-column",{attrs:{width:"100px",label:"流向",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.spmTransportName))])]}}])}),e._v(" "),e.selectedCol.pz?e._e():l("el-table-column",{attrs:{width:"130px",label:"品种",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.spmName))])]}}])}),e._v(" "),e.selectedCol.bh?e._e():l("el-table-column",{attrs:{width:"150px",label:"化验编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.analysisCode))])]}}])}),e._v(" "),e.selectedCol.pc?e._e():l("el-table-column",{attrs:{width:"80px",label:"批次",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.batchCode))])]}}])}),e._v(" "),e.selectedCol.dbl?e._e():l("el-table-column",{attrs:{width:"100px",label:"代表量",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.representQuality))])]}}])}),e._v(" "),e.selectedCol.Mt?e._e():l("el-table-column",{attrs:{width:"80px",label:"Mt(%)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.mt))])]}}])}),e._v(" "),e.selectedCol.Mad?e._e():l("el-table-column",{attrs:{width:"80px",label:"Mad(%)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.mad))])]}}])}),e._v(" "),e.selectedCol.Ad?e._e():l("el-table-column",{attrs:{width:"80px",label:"Ad(%)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.ad))])]}}])}),e._v(" "),e.selectedCol.Vd?e._e():l("el-table-column",{attrs:{width:"80px",label:"Vd(%)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.vd))])]}}])}),e._v(" "),e.selectedCol.Vdaf?e._e():l("el-table-column",{attrs:{width:"80px",label:"Vdaf(%)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.vdaf))])]}}])}),e._v(" "),e.selectedCol.crc?e._e():l("el-table-column",{attrs:{width:"130px",label:"焦渣特性(1-8)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.crc))])]}}])}),e._v(" "),e.selectedCol.std?e._e():l("el-table-column",{attrs:{width:"80px",label:"St,d(%)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.std))])]}}])}),e._v(" "),e.selectedCol.qgrad?e._e():l("el-table-column",{attrs:{width:"120px",label:"Qgr,ad(%)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.qgrad))])]}}])}),e._v(" "),e.selectedCol.qgrd?e._e():l("el-table-column",{attrs:{width:"80px",label:"Qgr,d(%)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.qgrd))])]}}])}),e._v(" "),e.selectedCol.mj?e._e():l("el-table-column",{attrs:{width:"120px",label:"Qnet,ar(MJ/kg)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.qnetar))])]}}])}),e._v(" "),e.selectedCol.cal?e._e():l("el-table-column",{attrs:{width:"120px",label:"Qnet,ar(cal/g)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.qnetarCal))])]}}])})],1),e._v(" "),l("el-table",{staticStyle:{width:"100%"},attrs:{border:"",fit:"","highlight-current-row":""}},[l("el-table-column",{attrs:{label:"审核："}}),e._v(" "),l("el-table-column",{attrs:{label:"制表："}})],1)],1)])},staticRenderFns:[]};var b=l("VU/8")(g,_,!1,function(e){l("cfP7")},null,null);t.default=b.exports},cfP7:function(e,t,l){var a=l("0F+h");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);l("rjj0")("05d09290",a,!0)}});