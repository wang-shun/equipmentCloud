webpackJsonp([65],{"8PBv":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.btn_right{\n    float: right;\n}\n.btn_left{\n    float: left;\n}\n.block {\n    margin-top: 15px;\n}\n.el-table--medium td, .el-table--medium th {\n    padding: 3px 0 !important;\n}\n",""])},"iL/1":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("mvHQ"),s=i.n(a),n=i("/5sW"),o=i("cAgV"),l=i("ZjsX"),r=i("7t+N"),d=i.n(r),c=sessionStorage.getItem("token"),u={name:"complexTable",directives:{waves:o.a},data:function(){return{dataList:[{sorting:1,flow:"海港"},{sorting:2,flow:"运河"},{sorting:3,flow:"自营铁路"}],tableHeight:document.body.clientHeight-220,codeShowYN:!1,isUpdate:!0,setDisabled:!1,tableKey:0,list:null,total:null,currentPage:1,pageSize:15,listLoading:!0,listQuery:{code:"",name:""},temp:{code:"",name:"",remarks:"",id:""},dialogFormVisible:!1,dialogStatus:"",dialogPvVisible:!1,textMap:{update:"编辑流向",create:"添加流向",info:"流向详细"},rules:{name:[{validator:function(t,e,i){""!==e&&null!==e?!1===/^.{1,32}$/.test(e)?i(new Error("输入内容不得超过32位")):i():i(new Error(t.msg))},msg:"请输入流向"}],code:[{validator:function(t,e,i){""!==e&&null!==e?!1===/^[0-9]{1,10}$/.test(e)?i(new Error("请输入不超过10位的整数")):i():i(new Error(t.msg))},msg:"请输入编码"}]},sortOptions:[{label:"ID Ascending",key:"+id"},{label:"ID Descending",key:"-id"}],showReviewer:!1,buttonlist:[],authorityCodebutton:[],authorityCodePage:""}},filters:{},created:function(){var t=sessionStorage.getItem("index");this.buttonlist=Object(l.b)(t),this.authorityCodebutton=this.buttonlist[0],this.authorityCodePage=this.buttonlist[1],this.getList()},methods:{search:function(){this.getList()},reset:function(){this.listQuery.code="",this.listQuery.name="",this.getList()},selectRow:function(t){this.selectlistRow=t},handleCreate:function(){var t=this;this.dialogStatus="create",this.dialogFormVisible=!0,this.codeShowYN=!1,this.isUpdate=!0,this.setDisabled=!1,this.$nextTick(function(){t.$refs.dataForm.clearValidate()}),setTimeout(function(){t.$refs.dataForm.resetFields()},300)},edit:function(){var t=this;this.selectlistRow&&0!==this.selectlistRow.length&&1===this.selectlistRow.length?(this.dialogStatus="update",this.codeShowYN=!0,this.isUpdate=!0,this.setDisabled=!1,this.getSpModalInfo(this.selectlistRow[0].id),this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})):this.$notify({title:"系统提示",message:"请选择一条数据进行编辑！",type:"warning",duration:2e3})},handleInfo:function(t){var e=this;this.dialogStatus="info",this.dialogFormVisible=!0,this.codeShowYN=!0,this.isUpdate=!1,this.setDisabled=!0,this.$nextTick(function(){e.$refs.dataForm.clearValidate()}),this.getSpModalInfo(t.id)},getList:function(){this.listLoading=!0;var t=this;Object(l.d)("/v1/spmTransport",{token:c,authorityCode:1},{},function(e){if(t.listLoading=!1,console.log(e),200===e.data.status){t.total=e.data.data.total;var i=e.data.data.list;t.dataList=i}else t.$notify({title:"系统提示",message:e.data.msg,type:"error",duration:3e3})},function(e){t.listLoading=!1,console.log(e),t.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},addflow:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){var i=t;Object(l.f)("/v1/spmTransport",{token:c,authorityCode:1},i.temp,function(t){console.log(t),200===t.data.status?(i.dialogFormVisible=!1,i.getList(),i.$notify({title:"系统提示",message:"创建成功",type:"success",duration:3e3})):i.$notify({title:"系统提示",message:"创建失败",type:"error",duration:3e3})},function(t){i.listLoading=!1,n.default.use(t),i.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}})},getSpModalInfo:function(t){var e=this;Object(l.d)("/v1/spmTransport/"+t,{token:c,authorityCode:1},{},function(t){if(console.log(t),200===t.data.status){var i=t.data.data;e.temp=i}else e.$notify({title:"系统提示",message:"请求失败",type:"warning",duration:3e3})},function(t){e.listLoading=!1,n.default.use(t),e.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},updateflow:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){var i=t;i.temp.id=i.selectlistRow[0].id,Object(l.g)("/v1/spmTransport",{token:c,authorityCode:1},t.temp,function(t){200===t.data.status?(i.dialogFormVisible=!1,i.getList(),i.$notify({title:"系统提示",message:"更新成功",type:"success",duration:3e3})):i.$notify({title:"系统提示",message:"更新失败",type:"error",duration:3e3})},function(t){i.listLoading=!1,n.default.use(t),i.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}})},delSpModal:function(){var t=this;this.selectlistRow&&0!==this.selectlistRow.length?this.$confirm("确认要删除么?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var e=t,i=[],a=0;a<e.selectlistRow.length;a++)i.push(e.selectlistRow[a].id);d.a.ajax({url:l.a+"/v1/spmTransport/",method:"delete",headers:{token:c,authorityCode:1,"Content-Type":"application/json; charset=utf-8"},dataType:"json",data:s()({ids:i}),success:function(t){console.log(t),200===t.status?(e.$notify({title:"系统提示",message:"删除成功",type:"success",duration:2e3}),e.getList()):e.$notify({title:"系统提示",message:"删除失败",type:"warning",duration:2e3})}})}).catch(function(){t.$notify({title:"系统提示",message:"已取消删除",type:"info",duration:2e3})}):this.$notify({title:"系统提示",message:"请选择一条数据进行删除操作！",type:"warning",duration:2e3})},handleSizeChange:function(t){this.getList(this.currentPage,t)},handleCurrentChange:function(t){this.getList(t,this.pageSize)}}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container "},[i("div",{staticStyle:{float:"right"}},t._l(t.authorityCodebutton,function(e){return i("div",{key:e.a,staticClass:"btn_left"},["删除"===e.name?i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item btn_left",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(e){e.preventDefault(),t.delSpModal()}}},[t._v("删除")]):t._e(),t._v(" "),"编辑"===e.name?i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item btn_left",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.edit()}}},[t._v("编辑")]):t._e(),t._v(" "),"添加"===e.name?i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item btn_left",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(e){t.handleCreate()}}},[t._v("添加")]):t._e()],1)}))]),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,ref:"moviesTable",staticStyle:{width:"100%"},attrs:{data:t.dataList,height:t.tableHeight,border:"",fit:"","highlight-current-row":"","default-sort":{prop:"date",order:"descending"}},on:{"selection-change":t.selectRow}},[i("el-table-column",{attrs:{type:"selection",width:"35"}}),t._v(" "),i("el-table-column",{attrs:{prop:"id",label:"序号",sortable:"",width:"350px",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{width:"450px",align:"center",label:"流向"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.name))])]}}])})],1),t._v(" "),i("div",{staticClass:"block"},[i("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[15,30,45,60,75,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,width:"480px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"dataForm",staticStyle:{"margin-left":"25px"},attrs:{rules:t.rules,"status-icon":"",model:t.temp,"label-position":"right","label-width":"120px",disabled:t.setDisabled}},[i("el-form-item",{attrs:{label:"流向",required:"",prop:"name"}},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"250px"},model:{value:t.temp.name,callback:function(e){t.$set(t.temp,"name",e)},expression:"temp.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"编码",required:"",prop:"code"}},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"250px"},model:{value:t.temp.code,callback:function(e){t.$set(t.temp,"code",e)},expression:"temp.code"}})],1)],1),t._v(" "),t.isUpdate?i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),"create"==t.dialogStatus?i("el-button",{attrs:{type:"primary"},on:{click:t.addflow}},[t._v("确定")]):i("el-button",{attrs:{type:"primary"},on:{click:t.updateflow}},[t._v("确定")])],1):t._e()],1)],1)},staticRenderFns:[]};var g=i("VU/8")(u,f,!1,function(t){i("y0Ls")},null,null);e.default=g.exports},y0Ls:function(t,e,i){var a=i("8PBv");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("edbe15cc",a,!0)}});