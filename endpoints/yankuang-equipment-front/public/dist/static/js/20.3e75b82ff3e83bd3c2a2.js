webpackJsonp([20],{"N+yS":function(t,e,a){var i=a("ScQw");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("782918e2",i,!0)},OdKz:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("lDdF"),l=a.n(i),s=a("uXZL"),r=a.n(s),n=a("ZjsX"),o=a("7t+N"),u=a.n(o),c=sessionStorage.getItem("token"),d=JSON.parse(sessionStorage.getItem("dwList")),y=[{code:"01",name:"一季度"},{code:"02",name:"二季度"},{code:"03",name:"三季度"},{code:"04",name:"四季度"}],f=d.reduce(function(t,e){return t[e.code]=e.name,t},{}),m=y.reduce(function(t,e){return t[e.code]=e.name,t},{}),p={name:"listofcollectfees",data:function(){return{tableHeight:document.body.clientHeight-410,listQuery:{date:"",isdw:"",isdwname:"",isquer:"",isquername:""},positionList:d,querList:y,summarytable:[]}},mounted:function(){this.sfoutdate()},methods:{sfoutdate:function(){var t=(new Date).getDate();t>=21&&t<=31?u()("#resetjs").show():u()("#resetjs").hide()},recalculate:function(){var t=this;t.summarytable=[];var e={positionCode:t.listQuery.isdw,reportYear:t.listQuery.date,reportQuarter:t.listQuery.isquer};Object(n.d)("/v1/elFeeQuarterT/refresh",{token:c,authorityCode:1},e,function(e){if(console.log(e),200===e.data.status){var a=e.data.data;a?t.summarytable=a:t.$notify({title:"系统提示",message:e.data.msg,type:"warning",duration:2e3})}else t.$notify({title:"系统提示",message:e.data.msg,type:"warning",duration:2e3})},function(e){console.log(e),t.$notify({title:"系统提示",message:"重新计算失败",type:"warning",duration:2e3})})},search:function(){var t=this;t.summarytable=[],Object(n.d)("/v1/elFeeQuarterT",{token:c,authorityCode:1},{positionCode:t.listQuery.isdw,reportYear:t.listQuery.date,reportQuarter:t.listQuery.isquer},function(e){if(console.log(e),200===e.data.status){var a=e.data.data;a?t.summarytable=a:t.$notify({title:"系统提示",message:e.data.msg,type:"warning",duration:2e3})}else t.$notify({title:"系统提示",message:e.data.msg,type:"warning",duration:2e3})},function(e){console.log(e),t.$notify({title:"系统提示",message:"报表查询失败",type:"error",duration:2e3})})},reset:function(){this.listQuery.date="",this.listQuery.isdw="",this.listQuery.isquer="",this.listQuery.isquername="",this.summarytable=[]},exportExcel:function(){var t=this,e=t.summarytable;0===t.summarytable.length?t.$notify({title:"系统提示",message:"导出报表不能为空",type:"warning",duration:2e3}):Object(n.f)("/v1/elFeeQuarterT",{token:c,authorityCode:1},e,function(e){if(200===e.data.status){var a=r.a.utils.table_to_book(document.querySelector("#reportDiv")),i=r.a.write(a,{bookType:"xlsx",bookSST:!0,type:"array"});try{l.a.saveAs(new Blob([i],{type:"application/octet-stream"}),"通用设备折旧修理费确认单.xlsx")}catch(t){"undefined"!=typeof console&&console.log(t,i)}return t.$notify({title:"系统提示",message:"报表导出成功",type:"success",duration:2e3}),i}t.$notify({title:"系统提示",message:e.data.msg,type:"warning",duration:2e3})},function(e){console.log(e),t.$notify({title:"系统提示",message:"报表导出失败",type:"error",duration:2e3})})}},watch:{"listQuery.isdw":function(t,e){this.listQuery.isdwname=f[this.listQuery.isdw],void 0===this.listQuery.isdwname&&(this.listQuery.isdwname="")},"listQuery.isquer":function(t,e){this.listQuery.isquername=m[this.listQuery.isquer],void 0===this.listQuery.isquername&&(this.listQuery.isquername="")},"listQuery.date":function(t,e){null===this.listQuery.date&&(this.listQuery.date="")}},filters:{stateFilter:function(t){return f[t]}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{type:"year",placeholder:"选择年","value-format":"yyyy",format:"yyyy"},model:{value:t.listQuery.date,callback:function(e){t.$set(t.listQuery,"date",e)},expression:"listQuery.date"}}),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{filterable:"",clearable:"",placeholder:"选择季度"},model:{value:t.listQuery.isquer,callback:function(e){t.$set(t.listQuery,"isquer",e)},expression:"listQuery.isquer"}},t._l(t.querList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{filterable:"",clearable:"",placeholder:"选择使用单位"},model:{value:t.listQuery.isdw,callback:function(e){t.$set(t.listQuery,"isdw",e)},expression:"listQuery.isdw"}},t._l(t.positionList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-edit",id:"resetjs"},on:{click:t.recalculate}},[t._v("重新计算")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{size:"small",icon:"el-icon-refresh"},on:{click:t.reset}},[t._v("重置")]),t._v(" "),a("div",{staticClass:"btn_right",staticStyle:{float:"right"}},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"warning",icon:"el-icon-upload"},on:{click:t.exportExcel}},[t._v("导出")])],1)],1),t._v(" "),a("div",{staticClass:"content",attrs:{id:"reportDiv"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"兖州煤业股份有限公司"}},[a("el-table-column",{attrs:{align:"center",label:this.listQuery.isquername+" 通用设备折旧修理费确认单"}},[a("el-table-column",{attrs:{align:"left",label:"使用单位：（盖章）"+this.listQuery.isdwname}}),t._v(" "),a("el-table-column",{attrs:{align:"right",label:this.listQuery.date+"年"}})],1)],1)],1),t._v(" "),a("el-table",{ref:"moviesTable",staticClass:"tb-edit",staticStyle:{width:"100%","max-height":"740px"},attrs:{data:t.summarytable,border:"",fit:"","highlight-current-row":"",height:t.tableHeight}},[a("el-table-column",{attrs:{align:"center",label:"月份",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.reportMonth))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"在用数量",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.useNum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"月度费用（元）",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.totalCostA1))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"费用调整（元）",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.totalCostA3))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"月度合计（元）",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.totalFee))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"使用天数",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.totalDay))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"备注",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.row.remarks,callback:function(a){t.$set(e.row,"remarks",a)},expression:"scope.row.remarks"}}),t._v(" "),a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.remarks))])]}}])})],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"left",label:"中心主管："}}),t._v(" "),a("el-table-column",{attrs:{align:"left",label:"中心科室负责人："}}),t._v(" "),a("el-table-column",{attrs:{align:"left",label:"中心经办人："}})],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"left",label:"设备使用方机电矿长："}})],1)],1)])},staticRenderFns:[]};var b=a("VU/8")(p,h,!1,function(t){a("N+yS")},null,null);e.default=b.exports},ScQw:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.el-table__empty-block{\r\n  min-height: 0;\n}\n.app-container {\r\n    font-family: Helvetica Neue, Helvetica, PingFang SC, Hiragino Sans GB, Microsoft YaHei, SimSun, sans-serif;\r\n    overflow: auto;\r\n    font-weight: 400;\r\n    -webkit-font-smoothing: antialiased;\n}\n.tb-edit .el-input {\r\n    display: none\n}\n.el-input--small .el-input__inner {\r\n  height: 22px;\r\n  line-height: 22px;\n}\n.tb-edit .current-row .el-input {\r\n    display: block\n}\n.tb-edit .current-row .el-input+span {\r\n    display: none\n}\r\n",""])}});