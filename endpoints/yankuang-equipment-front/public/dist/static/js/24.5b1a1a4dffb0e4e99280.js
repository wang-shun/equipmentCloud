webpackJsonp([24],{jiz8:function(e,t,a){var l=a("wm4k");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a("rjj0")("2bb32fd2",l,!0)},wm4k:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.app-container {\r\n    font-family: Helvetica Neue, Helvetica, PingFang SC, Hiragino Sans GB, Microsoft YaHei, SimSun, sans-serif;\r\n    overflow: auto;\r\n    font-weight: 400;\r\n    -webkit-font-smoothing: antialiased;\n}\n.tb-edit .el-input {\r\n    display: none\n}\n.el-input--small .el-input__inner {\r\n  height: 22px;\r\n  line-height: 22px;\n}\n.tb-edit .current-row .el-input {\r\n    display: block\n}\n.tb-edit .current-row .el-input+span {\r\n    display: none\n}\r\n",""])},xd9W:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("lDdF"),n=a.n(l),s=a("uXZL"),o=a.n(s),i=a("ZjsX"),r=sessionStorage.getItem("id"),c=sessionStorage.getItem("token"),u=JSON.parse(sessionStorage.getItem("dwList"));console.log(u);var d={name:"listofleasing",data:function(){return{tableHeight:document.body.clientHeight-230,listQuery:{date:"",isdw:""},positionList:u,id:r,leasetable:[]}},created:function(){},methods:{search:function(){var e=this;e.leasetable=[],Object(i.d)("/v1/elFeeDetailT",{token:c,authorityCode:1},{positionCode:e.listQuery.isdw,exportAtStr:e.listQuery.date},function(t){if(200===t.data.status){var a=t.data.data;a?e.leasetable=a:e.$notify({title:"系统提示",message:t.data.msg,type:"warning",duration:2e3})}else e.$notify({title:"系统提示",message:t.data.msg,type:"warning",duration:2e3})},function(t){console.log(t),e.$notify({title:"系统提示",message:"报表查询失败",type:"error",duration:2e3})})},reset:function(){this.listQuery.date="",this.listQuery.isdw="",this.leasetable=[]},exportExcel:function(){for(var e=this,t=0;t<e.leasetable.length;t++)e.leasetable[t].createBy=parseFloat(e.id);for(var a=0;a<e.leasetable.length;a++)e.leasetable[a].costA1=parseFloat(e.leasetable[a].costA1);for(var l=0;l<e.leasetable.length;l++)e.leasetable[l].costA3=parseFloat(e.leasetable[l].costA3);for(var s=0;s<e.leasetable.length;s++)e.leasetable[s].elDays=parseFloat(e.leasetable[s].elDays);var r=e.leasetable;0===e.leasetable.length?e.$notify({title:"系统提示",message:"导出报表不能为空",type:"warning",duration:2e3}):Object(i.f)("/v1/elFeeDetailT",{token:c,authorityCode:1},r,function(t){if(console.log(t),200===t.data.status){var a=o.a.utils.table_to_book(document.querySelector("#reportDiv")),l=o.a.write(a,{bookType:"xlsx",bookSST:!0,type:"array"});try{n.a.saveAs(new Blob([l],{type:"application/octet-stream"}),"矿处通用机电租赁费用明细表.xlsx")}catch(e){"undefined"!=typeof console&&console.log(e,l)}return e.$notify({title:"系统提示",message:"报表导出成功",type:"success",duration:2e3}),l}e.$notify({title:"系统提示",message:t.data.msg,type:"warning",duration:2e3})},function(t){console.log(t),e.$notify({title:"系统提示",message:"报表导出失败",type:"error",duration:2e3})})},handleEdit:function(e,t){for(var a=/^(.*\..{3}).*$/,l=0;l<this.leasetable.length;l++)this.leasetable[l].totalFee=Number(String(parseFloat(this.leasetable[l].elDays*this.leasetable[l].costA1)+parseFloat(this.leasetable[l].costA3)).replace(a,"$1"))},handleCurrentChange:function(e,t,a){console.log(e,t,a,t.currentTarget)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{type:"month",placeholder:"选择年月","value-format":"yyyy-MM",format:"yyyy-MM"},model:{value:e.listQuery.date,callback:function(t){e.$set(e.listQuery,"date",t)},expression:"listQuery.date"}}),e._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{filterable:"",clearable:"",placeholder:"选择矿处单位"},model:{value:e.listQuery.isdw,callback:function(t){e.$set(e.listQuery,"isdw",t)},expression:"listQuery.isdw"}},e._l(e.positionList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{size:"small",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")]),e._v(" "),a("div",{staticClass:"btn_right",staticStyle:{float:"right"}},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"warning",icon:"el-icon-upload"},on:{click:e.exportExcel}},[e._v("导出")])],1)],1),e._v(" "),a("div",{attrs:{id:"reportDiv"}},[a("el-table",{ref:"moviesTable",staticClass:"tb-edit",staticStyle:{width:"100%","max-height":"740px"},attrs:{data:e.leasetable,border:"",fit:"","highlight-current-row":"",height:e.tableHeight},on:{"row-click":e.handleCurrentChange}},[a("el-table-column",{attrs:{align:"center",label:"矿处通用机电租赁费用明细表"}},[a("el-table-column",{attrs:{align:"center",label:"矿处单位",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.positionName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"设备中类",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.middleTypeName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"设备小类",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.smallTypeName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"设备识别码",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.equipmentCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"技术标识号",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.techCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"规格型号",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.modelName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"功能位置",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.effectName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"租赁结算天数",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",placeholder:"请输入内容"},on:{change:function(a){e.handleEdit(t.$index,t.row)}},model:{value:t.row.elDays,callback:function(a){e.$set(t.row,"elDays",a)},expression:"scope.row.elDays"}}),e._v(" "),a("span",[e._v(e._s(t.row.elDays))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"租赁价格",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",placeholder:"请输入内容"},on:{change:function(a){e.handleEdit(t.$index,t.row)}},model:{value:t.row.costA1,callback:function(a){e.$set(t.row,"costA1",a)},expression:"scope.row.costA1"}}),e._v(" "),a("span",[e._v(e._s(t.row.costA1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"调整金额",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",placeholder:"请输入内容"},on:{change:function(a){e.handleEdit(t.$index,t.row)}},model:{value:t.row.costA3,callback:function(a){e.$set(t.row,"costA3",a)},expression:"scope.row.costA3"}}),e._v(" "),a("span",[e._v(e._s(t.row.costA3))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"合计",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.totalFee))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"备注",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.row.remarks,callback:function(a){e.$set(t.row,"remarks",a)},expression:"scope.row.remarks"}}),e._v(" "),a("span",[e._v(e._s(t.row.remarks))])]}}])})],1)],1)],1)])},staticRenderFns:[]};var f=a("VU/8")(d,p,!1,function(e){a("jiz8")},null,null);t.default=f.exports}});