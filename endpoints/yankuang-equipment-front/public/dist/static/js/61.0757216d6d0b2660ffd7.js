webpackJsonp([61],{K7NB:function(t,e,i){var a=i("TyNe");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("b23885da",a,!0)},TyNe:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.el-table__empty-block{\r\n    min-height: 0;\n}\n.btn_right {\r\n    float: right;\n}\n.block {\r\n    margin-top: 15px;\n}\n.commonTit {\r\n    border-left: 4px solid rgba(22, 155, 213, 1);\r\n    padding-left: 5px;\r\n    margin-top: 0;\r\n    margin-bottom: 5px;\n}\n.el-dialog__body {\r\n    padding: 10px 20px !important\n}\n.delEq {\r\n    padding: 2px 10px;\r\n    color: #FF0000;\r\n    border: 1px solid #fff;\r\n    border-radius: 3px;\n}\n.delEq:hover {\r\n    border: 1px solid #FF0000;\r\n    background: #FF0000;\r\n    color: #fff;\r\n    border-radius: 3px;\n}\n.el-date-editor.el-input, .el-date-editor.el-input__inner {\r\n    width: 100%;\n}\n.showOperBtn {\r\n    pointer-events: none;\r\n    color: gray;\n}\n.danger{\r\n    color: red;\n}\n.el-table--medium td, .el-table--medium th {\r\n    padding: 3px 0 !important;\n}\r\n",""])},psh1:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("mvHQ"),n=i.n(a),l=i("cAgV"),s=i("ZjsX"),o=i("7t+N"),r=i.n(o),c=sessionStorage.getItem("token"),u=[{value:"1",label:"回采"},{value:"2",label:"新采"}],d=JSON.parse(sessionStorage.getItem("quduiList")),p=[{value:"1",label:"回采"},{value:"2",label:"新采"}],m=[{value:"1",label:"待审核"},{value:"2",label:"审核通过"},{value:"3",label:"审核不通过"},{value:"4",label:"已上报"}].reduce(function(t,e){return t[e.value]=e.label,t},{}),g=d.reduce(function(t,e){return t[e.partitionCode]=e.partitionName,t},{}),f={directives:{waves:l.a},filters:{statusFilter:function(t){return m[t]},quduiFilter:function(t){return g[t]}},data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},audit_opinion:"",listLoading:!0,tableHeight:document.body.clientHeight-200,dialogFormVisible:!1,examineFrom:!1,edit:!1,examines:!1,examineList:[],pageSize:15,currentPage:1,total:null,categoryList:u,districtTeamList:d,placeList:p,companyId:"东滩矿",eqColumn:[],textMap:{update:"编辑",create:"添加",info:"详情",shenhe:"审核"},auditOpinion:"",dialogStatus:"",listQuery:{},temp:{id:"",deptName:"",deptCode:"",createDate:"",createBy:"",subUnit:"",mmCount:"",buckleCount:"",bucklegCount:"",actualAsh:"",ashCount:"",actualWaste:"",wasteCount:"",updateDate:"",updateBy:"",type:"",audit_opinion:"",reportDate:"",reportBy:"",importExport:""},dataList:[],authorityCodebutton:[],authorityCodePage:""}},created:function(){var t=sessionStorage.getItem("index");this.buttonlist=Object(s.b)(t),this.authorityCodebutton=this.buttonlist[0],console.log(this.authorityCodebutton),this.authorityCodePage=this.buttonlist[1],this.getList(this.currentPage,this.pageSize)},methods:{selectRow:function(t){this.selectlistRow=t,console.log(t)},deleteRow:function(t,e){e.splice(t,1)},handleSizeChange:function(t){this.getList(this.currentPage,t)},handleCurrentChange:function(t){this.getList(t,this.pageSize)},getList:function(t,e){this.listLoading=!0;var i=this,a={jsonString:{},page:t,size:e};Object(s.d)("/v1/mm",{token:c,authorityCode:1},a,function(t){if(i.listLoading=!1,console.log(t),200===t.data.status){i.total=t.data.data.total;var e=t.data.data.list;i.dataList=e}else i.$notify({title:"系统提示",message:t.data.msg,type:"error",duration:3e3})},function(t){i.listLoading=!1,console.log(t),i.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},addData:function(){this.selectlistRow&&0!==this.selectlistRow.length&&1===this.selectlistRow.length?1===this.selectlistRow[0].type?(this.dialogFormVisible=!0,this.examineList=this.selectlistRow,this.dialogStatus="update",this.examines=!0,this.edit=!1,this.updata(this.selectlistRow[0].id)):this.$notify.info({title:"系统提示",message:"该条数据已经进行审核，不允许再编辑！",type:"warning",duration:3e3}):this.$notify.info({title:"系统提示",message:"请选择一条数据进行编辑！",type:"warning",duration:3e3})},updata:function(t){this.listLoadingin=!0;var e=this;Object(s.d)("/v1/mm/"+t,{token:c,authorityCode:1},{},function(t){console.log(t),e.listLoadingin=!1,200===t.data.status?e.temp=t.data.data:e.$notify({title:"系统提示",message:t.data.msg,type:"error",duration:3e3})},function(t){e.listLoadingin=!1,console.log(t),e.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},updateEq:function(){var t=this;t.temp.id=t.selectlistRow[0].id,Object(s.g)("/v1/mm",{token:c,authorityCode:1},t.temp,function(e){console.log(e),t.listLoadingin=!1,200===e.data.status?(t.dialogFormVisible=!1,t.$notify({title:"系统提示",message:"编辑成功",type:"success",duration:3e3}),t.getList(t.currentPage,t.pageSize)):t.$notify({title:"系统提示",message:e.data.msg,type:"error",duration:3e3})},function(e){t.listLoadingin=!1,console.log(e),t.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},delData:function(){var t=this;this.selectlistRow&&0!==this.selectlistRow.length&&1===this.selectlistRow.length?1===this.selectlistRow[0].type?this.$confirm("确认删除该条数据吗？删除后不可恢复！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var e=t,i=[],a=0;a<e.selectlistRow.length;a++)i.push(e.selectlistRow[a].id);r.a.ajax({url:s.a+"/v1/mm",method:"delete",headers:{token:c,authorityCode:1,"Content-Type":"application/json; charset=utf-8"},dataType:"json",data:n()({ids:i}),success:function(t){console.log(t),200===t.status?(e.$notify({title:"系统提示",message:"删除成功",type:"warning",duration:2e3}),e.getList(e.currentPage,e.pageSize)):e.$notify({title:"系统提示",message:"删除失败",type:"warning",duration:2e3})}})}):this.$notify.info({title:"系统提示",message:"该条数据已经进行审核，不允许删除！",type:"warning",duration:3e3}):this.$notify.info({title:"系统提示",message:"请选择一条数据进行删除！",type:"warning",duration:3e3})},examine:function(){this.selectlistRow&&0!==this.selectlistRow.length&&1===this.selectlistRow.length?1===this.selectlistRow[0].type?(this.dialogFormVisible=!0,this.examineList=this.selectlistRow,this.dialogStatus="shenhe",this.edit=!0,this.examines=!1,this.updata(this.selectlistRow[0].id)):this.$notify.info({title:"系统提示",message:"该条数据已经进行审核，不允许再审核！",type:"warning",duration:3e3}):this.$notify.info({title:"系统提示",message:"请选择一条数据进行审核！",type:"warning",duration:3e3})},examinePass:function(){var t=this;Object(s.g)("/v1/mm/success",{token:c,authorityCode:1},{id:t.selectlistRow[0].id,auditOpinion:t.auditOpinion},function(e){console.log(e),200===e.data.status?(t.$notify({title:"系统提示",message:"审核通过",type:"success",duration:3e3}),t.dialogFormVisible=!1,t.getList(t.currentPage,t.pageSize)):t.$notify({title:"系统提示",message:e.data.msg,type:"error",duration:3e3})},function(e){t.listLoadingin=!1,console.log(e),t.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},examineUnPass:function(){var t=this;Object(s.g)("/v1/mm/fail",{token:c,authorityCode:1},{id:t.selectlistRow[0].id,auditOpinion:t.auditOpinion},function(e){console.log(e),200===e.data.status?(t.$notify({title:"系统提示",message:"审核不通过",type:"success",duration:3e3}),t.dialogFormVisible=!1,t.getList(t.currentPage,t.pageSize)):t.$notify({title:"系统提示",message:e.data.msg,type:"error",duration:3e3})},function(e){t.listLoadingin=!1,console.log(e),t.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},Report:function(){var t=this;this.selectlistRow&&0!==this.selectlistRow.length&&1===this.selectlistRow.length?2===this.selectlistRow[0].type?this.$confirm("确认上报该条数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t;Object(s.g)("/v1/mm/report?id="+t.selectlistRow[0].id,{token:c,authorityCode:1},{},function(t){console.log(t),e.listLoadingin=!1,200===t.data.status?(e.dialogFormVisible=!1,e.$notify({title:"系统提示",message:"上报成功",type:"success",duration:3e3}),e.getList(e.currentPage,e.pageSize)):e.$notify({title:"系统提示",message:t.data.msg,type:"error",duration:3e3})},function(t){e.listLoadingin=!1,console.log(t),e.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})}):1===this.selectlistRow[0].type?this.$notify.info({title:"系统提示",message:"该条数据还未审核！",type:"warning",duration:3e3}):3===this.selectlistRow[0].type?this.$notify.info({title:"系统提示",message:"该条数据审核未通过！",type:"warning",duration:3e3}):this.$notify.info({title:"系统提示",message:"该条数据已经上报！",type:"warning",duration:3e3}):this.$notify.info({title:"系统提示",message:"请选择一条数据进行上报！",type:"warning",duration:3e3})}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container",staticStyle:{float:"right"}},t._l(t.authorityCodebutton,function(e){return i("div",{key:e.sorting,staticStyle:{"margin-top":"5px",float:"left"}},["删除"===e.name?i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:t.delData}},[t._v("删除")]):t._e(),t._v(" "),"上报"===e.name?i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-circle-check"},on:{click:t.Report}},[t._v("上报")]):t._e(),t._v(" "),"审核"===e.name?i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-question"},on:{click:t.examine}},[t._v("审核")]):t._e(),t._v(" "),"编辑"===e.name?i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(e){e.preventDefault(),t.addData(e)}}},[t._v("编辑")]):t._e()],1)})),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"moviesTable",staticStyle:{width:"100%"},attrs:{data:t.dataList,stripe:"",border:"",fit:"","highlight-current-row":"",height:t.tableHeight},on:{"selection-change":t.selectRow}},[i("el-table-column",{attrs:{type:"selection",width:"35"}}),t._v(" "),i("el-table-column",{attrs:{width:"70px",align:"center",label:"ID"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"100px",align:"center",label:"单位ID"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.deptCode))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"100px",align:"center",label:"日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.createDate))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"100px",align:"center",label:"区队"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("quduiFilter")(e.row.subUnit)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"100px",align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("statusFilter")(e.row.type)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"100px",align:"center",label:"审核意见"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.auditOpinion))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"80",align:"center",label:"毛煤产量"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.mmCount))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"80",align:"center",label:"扣产产量"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.buckleCount))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"100",align:"center",label:"扣产后产量"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.bucklegCount))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"80",align:"center",label:"实际灰分"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.actualAsh))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"80",align:"center",label:"灰分量"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.ashCount))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"80",align:"center",label:"实际含矸"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.actualWaste))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"80",align:"center",label:"含矸量"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.wasteCount))])]}}])})],1),t._v(" "),i("div",{staticClass:"block"},[i("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[15,30,45,60,75,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{staticStyle:{"margin-top":"-5% !important"},attrs:{id:"tc",title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,width:"80%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"eqDataForm",attrs:{"label-position":"right","label-width":"100px",disabled:t.edit}},[i("el-form-item",{staticClass:"el-col el-col-12",attrs:{label:"日期"}},[i("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{align:"right","picker-options":t.pickerOptions,type:"date","value-format":"yyyy/MM/dd",format:"yyyy/MM/dd",placeholder:"选择年"},model:{value:t.temp.createDate,callback:function(e){t.$set(t.temp,"createDate",e)},expression:"temp.createDate"}})],1),t._v(" "),i("el-form-item",{staticClass:"el-col el-col-12",attrs:{label:"区队",required:""}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"状态"},model:{value:t.temp.subUnit,callback:function(e){t.$set(t.temp,"subUnit",e)},expression:"temp.subUnit"}},t._l(t.districtTeamList,function(t){return i("el-option",{key:t.partitionCode,attrs:{label:t.partitionName,value:t.partitionCode}})}))],1),t._v(" "),i("div",{staticStyle:{clear:"both"}}),t._v(" "),i("el-form-item",{staticClass:"el-col el-col-6",attrs:{label:"毛煤产量",required:""}},[i("el-input",{model:{value:t.temp.mmCount,callback:function(e){t.$set(t.temp,"mmCount",e)},expression:"temp.mmCount"}})],1),t._v(" "),i("el-form-item",{staticClass:"el-col el-col-6",attrs:{label:"扣产产量",required:""}},[i("el-input",{model:{value:t.temp.buckleCount,callback:function(e){t.$set(t.temp,"buckleCount",e)},expression:"temp.buckleCount"}})],1),t._v(" "),i("el-form-item",{staticClass:"el-col el-col-6",attrs:{label:"扣产后产量",required:""}},[i("el-input",{model:{value:t.temp.bucklegCount,callback:function(e){t.$set(t.temp,"bucklegCount",e)},expression:"temp.bucklegCount"}})],1),t._v(" "),i("el-form-item",{staticClass:"el-col el-col-6",attrs:{label:"实际灰分",required:""}},[i("el-input",{model:{value:t.temp.actualAsh,callback:function(e){t.$set(t.temp,"actualAsh",e)},expression:"temp.actualAsh"}})],1),t._v(" "),i("el-form-item",{staticClass:"el-col el-col-6",attrs:{label:"灰分量",required:""}},[i("el-input",{model:{value:t.temp.ashCount,callback:function(e){t.$set(t.temp,"ashCount",e)},expression:"temp.ashCount"}})],1),t._v(" "),i("el-form-item",{staticClass:"el-col el-col-6",attrs:{label:"实际含矸",required:""}},[i("el-input",{model:{value:t.temp.actualWaste,callback:function(e){t.$set(t.temp,"actualWaste",e)},expression:"temp.actualWaste"}})],1),t._v(" "),i("el-form-item",{staticClass:"el-col el-col-6",attrs:{label:"含矸量",required:""}},[i("el-input",{model:{value:t.temp.wasteCount,callback:function(e){t.$set(t.temp,"wasteCount",e)},expression:"temp.wasteCount"}})],1),t._v(" "),i("div",{staticStyle:{clear:"both"}})],1),t._v(" "),i("el-form",[t.edit?i("el-form-item",{attrs:{label:"审核意见"}},[i("el-input",{attrs:{type:"textarea"},model:{value:t.auditOpinion,callback:function(e){t.auditOpinion=e},expression:"auditOpinion"}})],1):t._e()],1),t._v(" "),i("div",{staticStyle:{clear:"both"}}),t._v(" "),t.edit?i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"success"},on:{click:t.examinePass}},[t._v("通过")]),t._v(" "),i("el-button",{attrs:{type:"danger"},on:{click:t.examineUnPass}},[t._v("不通过")])],1):t._e(),t._v(" "),t.examines?i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.updateEq}},[t._v("确定")])],1):t._e(),t._v(" "),i("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var y=i("VU/8")(f,h,!1,function(t){i("K7NB")},null,null);e.default=y.exports}});