webpackJsonp([89],{XBEY:function(t,e,a){var i=a("lliR");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("73198bb4",i,!0)},ZubK:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("cAgV"),l=a("lDdF"),n=a.n(l),s=a("uXZL"),r=a.n(s),o=a("ZjsX"),c=sessionStorage.getItem("token"),u=[{code:"套一",name:"套一"},{code:"套二",name:"套二"},{code:"套三",name:"套三"}],d=JSON.parse(sessionStorage.getItem("dwbbList")),m=d.reduce(function(t,e){return t[e.code]=e.name,t},{}),b={directives:{waves:i.a},filters:{},data:function(){return{isloading:!1,tbList:u,reportdate:"",name:"",tableHeight:document.body.clientHeight-245,unitLists:d,listQuery:{date:"",istb:"",isdwname:"",datename:"",deptCode:""},temp:{},dataList:[]}},created:function(){},methods:{search:function(){var t=this;t.isloading=!0,t.dataList=[];var e={jsonString:{reportDateString:this.listQuery.date,setOff:this.listQuery.istb}};Object(o.d)("/v1/cc/findEquality",{token:c,authorityCode:1},e,function(e){if(console.log(e),200===e.data.status){t.isloading=!1;var a=e.data.data;t.dataList=a}else t.isloading=!1,t.$notify({title:"系统提示",message:e.data.msg,type:"warning",duration:2e3})},function(e){console.log(e),t.isloading=!1,t.$notify({title:"系统提示",message:"报表查询失败",type:"warning",duration:2e3})})},reset:function(){this.listQuery.date="",this.listQuery.istb="",this.listQuery.isdwname="",this.listQuery.datename="",this.dataList=[]},exportExcel:function(){var t=r.a.utils.table_to_book(document.querySelector("#reportDiv")),e=r.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{n.a.saveAs(new Blob([e],{type:"application/octet-stream"}),"煤炭质量完成统计表.xlsx")}catch(t){"undefined"!=typeof console&&console.log(t,e)}}},watch:{"listQuery.date":function(t,e){this.listQuery.date?(this.listQuery.datename=this.listQuery.date,this.listQuery.datename=this.listQuery.datename.replace("-","年").replace("-","月")+"日"):this.listQuery.datename=""},"listQuery.deptCode":function(t,e){this.listQuery.isdwname=m[this.listQuery.deptCode],void 0===this.listQuery.isdwname&&(this.listQuery.isdwname="")}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",size:"mini",format:"yyyy-MM-dd"},model:{value:t.listQuery.date,callback:function(e){t.$set(t.listQuery,"date",e)},expression:"listQuery.date"}}),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{clearable:"",placeholder:"选择套别",size:"mini"},model:{value:t.listQuery.istb,callback:function(e){t.$set(t.listQuery,"istb",e)},expression:"listQuery.istb"}},t._l(t.tbList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:t.reset}},[t._v("重置")]),t._v(" "),a("div",{staticClass:"btn_right",staticStyle:{float:"right"}},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"warning",icon:"el-icon-upload"},on:{click:t.exportExcel}},[t._v("导出")])],1)],1),t._v(" "),a("div",{staticClass:"content",attrs:{id:"reportDiv"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"煤炭质量完成统计表"}},[a("el-table-column",{attrs:{align:"right",label:this.listQuery.datename}}),t._v(" "),a("el-table-column",{attrs:{align:"right",label:"单位：%"}})],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isloading,expression:"isloading"}],ref:"moviesTable",staticClass:"tb-edit",staticStyle:{width:"100%","max-height":"740px"},attrs:{data:t.dataList,border:"",fit:"","highlight-current-row":"",height:t.tableHeight}},[a("el-table-column",{attrs:{align:"center",label:"",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.deptName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"商品煤灰分"}},[a("el-table-column",{attrs:{align:"center",label:"本月"}},[a("el-table-column",{attrs:{align:"center",label:"计划"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.monthAshPlan))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"实际"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.monthAshPractice))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"±"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.monthDValue))])]}}])})],1),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"累计"}},[a("el-table-column",{attrs:{align:"center",label:"计划"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.totalAshPlan))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"实际"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.totalAshPractice))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"±"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{attrs:{align:"center"}},[t._v(t._s(e.row.totalDValue))])]}}])})],1)],1)],1)],1)])},staticRenderFns:[]};var f=a("VU/8")(b,y,!1,function(t){a("XBEY")},null,null);e.default=f.exports},lliR:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.el-table__empty-block{\r\n    min-height: 0;\n}\n.btn_right {\r\n    float: right;\n}\n.el-table--medium td, .el-table--medium th {\r\n    padding: 3px 0 !important;\n}\r\n",""])}});