webpackJsonp([47],{Qu1l:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.el-table__empty-block{\r\n    min-height: 0;\n}\n.btn_right {\r\n    float: right;\n}\n.el-table--medium td, .el-table--medium th {\r\n    padding: 3px 0 !important;\n}\r\n\r\n",""])},QxHb:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("BO1k"),a=i.n(n),l=i("Gu7T"),s=i.n(l),r=i("cAgV"),o=i("lDdF"),c=i.n(o),u=i("uXZL"),d=i.n(u),f=i("ZjsX"),h=sessionStorage.getItem("token"),v=JSON.parse(sessionStorage.getItem("dwbbList")),p=v.reduce(function(t,e){return t[e.code]=e.name,t},{}),g={directives:{waves:r.a},filters:{},data:function(){return{isloading:!1,name:"",tableHeight:document.body.clientHeight-260,unitLists:v,unitList:[],listQuery:{date:"",varieties:[],unit:[],isdwname:"",datename:"",deptCode:""},dataList:[],varietiesLists:[],varietiesList:[],oldOptions:[],oldOptionsvarieties:[]}},created:function(){this.listQuery.date=this.formatDate();var t=[].concat(s()(this.unitLists));t.unshift({code:"全选",name:"全选"}),this.unitList=t,this.getPZ(),this.search()},methods:{formatDate:function(){var t=new Date,e=(t.getMonth()+1).toString().padStart(2,"0");return t.getFullYear()+"-"+e},getPZ:function(){var t=this;Object(f.d)("/v1/spmType/findSmallestTypes",{token:h,authorityCode:1},{},function(e){if(t.listLoading=!1,200===e.data.status){t.varietiesLists=e.data.data;var i=e.data.data,n=[].concat(s()(i));n.unshift({code:"全选",name:"全选"}),t.varietiesList=n}else t.$notify({title:"系统提示",message:e.data.msg,type:"error",duration:3e3})},function(e){t.listLoading=!1,console.log(e),t.$notify({title:"系统提示",message:"系统错误",type:"error",duration:3e3})})},search:function(){var t=this;t.dataList=[],t.isloading=!0;var e={q_year_month:this.listQuery.date,q_deptCodes:this.listQuery.unit.toString(),q_pzs:this.listQuery.varieties.toString()};Object(f.d)("/v1/spmzlcc/listSpmZlccReport",{token:h,authorityCode:1},e,function(e){if(console.log(e),200===e.data.status){t.isloading=!1;var i=e.data.data;t.dataList=i}else t.isloading=!1,t.$notify({title:"系统提示",message:e.data.msg,type:"warning",duration:2e3})},function(e){t.isloading=!1,console.log(e),t.$notify({title:"系统提示",message:"报表查询失败",type:"warning",duration:2e3})})},reset:function(){this.listQuery.date="",this.listQuery.unit="",this.listQuery.varieties="",this.listQuery.datename="",this.dataList=[]},exportExcel:function(){var t=d.a.utils.table_to_book(document.querySelector("#reportDiv")),e=d.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{c.a.saveAs(new Blob([e],{type:"application/octet-stream"}),"兖州煤业股份有限公司商品煤质量抽查情况表.xlsx")}catch(t){"undefined"!=typeof console&&console.log(t,e)}},selectAll:function(t){var e=[],i=!0,n=!1,l=void 0;try{for(var s,r=a()(this.unitList);!(i=(s=r.next()).done);i=!0){var o=s.value;e.push(o.code)}}catch(t){n=!0,l=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw l}}var c=1===this.oldOptions.length?this.oldOptions[0]:[];if(t.includes("全选")&&(this.listQuery.unit=e),c.includes("全选")&&!t.includes("全选")&&(this.listQuery.unit=[]),c.includes("全选")&&t.includes("全选")){var u=t.indexOf("全选");t.splice(u,1),this.listQuery.unit=t}c.includes("全选")||t.includes("全选")||(console.log(11),t.length===e.length-1&&(this.listQuery.unit=["全选"].concat(t))),this.oldOptions[0]=this.listQuery.unit},Allvarieties:function(t){var e=[],i=!0,n=!1,l=void 0;try{for(var s,r=a()(this.varietiesList);!(i=(s=r.next()).done);i=!0){var o=s.value;e.push(o.code)}}catch(t){n=!0,l=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw l}}var c=1===this.oldOptionsvarieties.length?this.oldOptionsvarieties[0]:[];if(t.includes("全选")&&(this.listQuery.varieties=e),c.includes("全选")&&!t.includes("全选")&&(this.listQuery.varieties=[]),c.includes("全选")&&t.includes("全选")){var u=t.indexOf("全选");t.splice(u,1),this.listQuery.varieties=t}c.includes("全选")||t.includes("全选")||(console.log(11),t.length===e.length-1&&(this.listQuery.varieties=["全选"].concat(t))),this.oldOptionsvarieties[0]=this.listQuery.varieties}},watch:{"listQuery.date":function(t,e){this.listQuery.date?(this.listQuery.datename=this.listQuery.date,this.listQuery.datename=this.listQuery.datename.replace("-","年")+"月"):this.listQuery.datename=""},"listQuery.deptCode":function(t,e){this.listQuery.isdwname=p[this.listQuery.deptCode],void 0===this.listQuery.isdwname&&(this.listQuery.isdwname="")}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{type:"month",placeholder:"选择日期","value-format":"yyyy-MM",size:"mini",format:"yyyy-MM"},model:{value:t.listQuery.date,callback:function(e){t.$set(t.listQuery,"date",e)},expression:"listQuery.date"}}),t._v(" "),i("el-select",{staticClass:"filter-item",attrs:{"collapse-tags":"",multiple:"",placeholder:"请选择抽查矿别",size:"mini"},on:{change:t.selectAll},model:{value:t.listQuery.unit,callback:function(e){t.$set(t.listQuery,"unit",e)},expression:"listQuery.unit"}},t._l(t.unitList,function(t){return i("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),i("el-select",{staticClass:"filter-item",attrs:{multiple:"",placeholder:"请选择品种","collapse-tags":"",size:"mini"},on:{change:t.Allvarieties},model:{value:t.listQuery.varieties,callback:function(e){t.$set(t.listQuery,"varieties",e)},expression:"listQuery.varieties"}},t._l(t.varietiesList,function(t){return i("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:t.reset}},[t._v("重置")]),t._v(" "),i("div",{staticClass:"btn_right",staticStyle:{float:"right"}},[i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"warning",icon:"el-icon-upload"},on:{click:t.exportExcel}},[t._v("导出")])],1)],1),t._v(" "),i("div",{staticClass:"content",attrs:{id:"reportDiv"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"兖州煤业股份有限公司商品煤质量抽查情况表"}},[i("el-table-column",{attrs:{align:"left",label:"抽查单位：兖矿集团选煤管理中心"}}),t._v(" "),i("el-table-column",{attrs:{align:"right",label:this.listQuery.datename}})],1)],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isloading,expression:"isloading"}],ref:"moviesTable",staticClass:"tb-edit",staticStyle:{width:"100%","max-height":"740px"},attrs:{data:t.dataList,border:"",fit:"","highlight-current-row":"",height:t.tableHeight}},[i("el-table-column",{attrs:{align:"center",label:"序号",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.xh))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"抽查时间",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.date))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"抽查地点",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.cydd))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"抽查矿井",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.cckbName))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"抽查品种",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.pzName))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"抽查方式",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.ccfs))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"抽查量(吨)",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.ds))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"全水分（%）"}},[i("el-table-column",{attrs:{align:"center",label:"矿报值",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.mtK))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"检验值",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.mt))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"差值",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.mtCz))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"允许差",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.mtYxc))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"合同指标",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.mtKhz))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"控制指标",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.mtKzzb))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"判定",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.pd))])]}}])})],1),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"灰分（%）或收到基低位发热量（kcal/kg）",width:"130"}},[i("el-table-column",{attrs:{align:"center",label:"矿报值",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.adK))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"检验值",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.ad))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"差值",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.adCz))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"允许差",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.adYxc))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"合同指标",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.adKhz))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"控制指标",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.adKzzb))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"判定",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{attrs:{align:"center"}},[t._v(t._s(e.row.pd))])]}}])})],1)],1),t._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"left",label:"备注:"}})],1)],1)])},staticRenderFns:[]};var _=i("VU/8")(g,y,!1,function(t){i("Zc+y")},null,null);e.default=_.exports},"Zc+y":function(t,e,i){var n=i("Qu1l");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("00066e02",n,!0)}});